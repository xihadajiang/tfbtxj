2016-08-23 09:26:12,135 T7072 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 09:26:26,565 T9268 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 09:26:26,828 T9268 INFO guocai_txj.py|57|组件[BEGIN]执行开始
2016-08-23 09:26:26,832 T9268 INFO guocai_txj.py|58|组件[BEGIN]执行结束
2016-08-23 09:26:26,835 T9268 INFO guocai_txj.py|205|组件[STRAC_Commbuf]执行开始
2016-08-23 09:26:26,842 T9268 INFO guocai_txj.py|208|组件[STRAC_Commbuf]执行结束
2016-08-23 09:26:26,846 T9268 INFO guocai_txj.py|217|组件[STRAC_XMLTree]执行开始
2016-08-23 09:26:26,854 T9268 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:26:26,871 T9268 INFO guocai_txj.py|219|组件[STRAC_XMLTree]执行结束
2016-08-23 09:26:26,875 T9268 INFO guocai_txj.py|131|组件[Agentx_SysInit]执行开始
2016-08-23 09:26:26,878 T9268 INFO guocai_txj.py|132|组件[Agentx_SysInit]执行结束
2016-08-23 09:26:26,882 T9268 INFO guocai_txj.py|143|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:26:26,908 T9268 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 144, in SSYS_GetIniCfg
    log.info(jyzd.get("systemsign",""),'%s|%s|GAPSETCDIR=[%s]',FN(),LN(),GAPSETCDIR)
                jyzd = AttrDict{
                       commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
                       <spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
                       iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
                       ...
NameError: global name 'GAPSETCDIR' is not defined

2016-08-23 09:26:26,946 T9268 ERROR 交易字典内容输出：AttrDict{
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 144, in SSYS_GetIniCfg\n    log.info(jyzd
.get("systemsign",""),\'%s|%s|GAPSETCDIR=[%s]\',FN(),LN(),GAPSETCDIR)\
n                jyzd = AttrDict{\n
commbuf:\'00000566<?xml version=\\\'1.0\\\'
encoding="GB2312"?><root><ver>1.0</ver>\n                       <spid>
11111</spid><spbillno>222222</spbillno><business_type>14900</bus\n
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
\n                       ...\nNameError: global name \'GAPSETCDIR\' is
not defined\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_4': 'jyzd/shh', '_3': 'shh', '_2': 'COMM', '_1':
'[jyzd/subsysname].ini'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:26:26,973 T9268 INFO guocai_txj.py|25|组件[pub_error]执行开始
2016-08-23 09:26:26,976 T9268 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 09:26:26,982 T9268 INFO guocai_txj.py|28|组件[pub_error]执行结束
2016-08-23 09:26:26,986 T9268 INFO 从三方接收到的数据：【】
2016-08-23 09:26:26,986 T9268 INFO 报文发往送到GAPS成功
2016-08-23 09:26:26,989 T9268 INFO 
--------------提交缓冲日志 END[2016-08-23 09:26:26.989000]---------------

2016-08-23 09:27:46,250 T5816 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 09:27:48,964 T8428 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 09:27:49,009 T8428 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:27:49,013 T8428 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:27:49,017 T8428 INFO guocai_txj.py|207|组件[STRAC_Commbuf]执行开始
2016-08-23 09:27:49,025 T8428 INFO guocai_txj.py|210|组件[STRAC_Commbuf]执行结束
2016-08-23 09:27:49,029 T8428 INFO guocai_txj.py|219|组件[STRAC_XMLTree]执行开始
2016-08-23 09:27:49,032 T8428 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:27:49,052 T8428 INFO guocai_txj.py|221|组件[STRAC_XMLTree]执行结束
2016-08-23 09:27:49,056 T8428 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:27:49,062 T8428 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:27:49,065 T8428 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:27:49,069 T8428 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 146, in SSYS_GetIniCfg
    log.info(jyzd.get("systemsign",""),'%s|%s|GAPSETCDIR=[%s]',FN(),LN(),GAPSETCDIR)
                jyzd = AttrDict{
                       commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
                       <spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
                       iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
                       ...
NameError: global name 'GAPSETCDIR' is not defined

2016-08-23 09:27:49,098 T8428 ERROR 交易字典内容输出：AttrDict{
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 146, in SSYS_GetIniCfg\n    log.info(jyzd
.get("systemsign",""),\'%s|%s|GAPSETCDIR=[%s]\',FN(),LN(),GAPSETCDIR)\
n                jyzd = AttrDict{\n
commbuf:\'00000566<?xml version=\\\'1.0\\\'
encoding="GB2312"?><root><ver>1.0</ver>\n                       <spid>
11111</spid><spbillno>222222</spbillno><business_type>14900</bus\n
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
\n                       ...\nNameError: global name \'GAPSETCDIR\' is
not defined\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_4': 'jyzd/shh', '_3': 'shh', '_2': 'COMM', '_1':
'[jyzd/subsysname].ini'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:27:49,121 T8428 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 09:27:49,125 T8428 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 09:27:49,128 T8428 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 09:27:49,131 T8428 INFO 从三方接收到的数据：【】
2016-08-23 09:27:49,132 T8428 INFO 报文发往送到GAPS成功
2016-08-23 09:27:49,134 T8428 INFO 
--------------提交缓冲日志 END[2016-08-23 09:27:49.135000]---------------

2016-08-23 09:29:33,482 T8240 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 09:29:35,522 T9972 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 09:29:35,551 T9972 INFO guocai_txj.py|57|组件[BEGIN]执行开始
2016-08-23 09:29:35,552 T9972 INFO guocai_txj.py|58|组件[BEGIN]执行结束
2016-08-23 09:29:35,555 T9972 INFO guocai_txj.py|205|组件[STRAC_Commbuf]执行开始
2016-08-23 09:29:35,562 T9972 INFO guocai_txj.py|208|组件[STRAC_Commbuf]执行结束
2016-08-23 09:29:35,563 T9972 INFO guocai_txj.py|217|组件[STRAC_XMLTree]执行开始
2016-08-23 09:29:35,568 T9972 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:29:35,582 T9972 INFO guocai_txj.py|219|组件[STRAC_XMLTree]执行结束
2016-08-23 09:29:35,591 T9972 INFO guocai_txj.py|131|组件[Agentx_SysInit]执行开始
2016-08-23 09:29:35,592 T9972 INFO guocai_txj.py|132|组件[Agentx_SysInit]执行结束
2016-08-23 09:29:35,598 T9972 INFO guocai_txj.py|143|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:29:35,601 T9972 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 144, in SSYS_GetIniCfg
    log.info(jyzd.get("systemsign",""),'%s|%s|GAPSETCDIR=[%s]',FN(),LN(),MQ_BACKEND)
                jyzd = AttrDict{
                       commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
                       <spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
                       iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
                       ...
NameError: global name 'MQ_BACKEND' is not defined

2016-08-23 09:29:35,631 T9972 ERROR 交易字典内容输出：AttrDict{
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 144, in SSYS_GetIniCfg\n    log.info(jyzd
.get("systemsign",""),\'%s|%s|GAPSETCDIR=[%s]\',FN(),LN(),MQ_BACKEND)\
n                jyzd = AttrDict{\n
commbuf:\'00000566<?xml version=\\\'1.0\\\'
encoding="GB2312"?><root><ver>1.0</ver>\n                       <spid>
11111</spid><spbillno>222222</spbillno><business_type>14900</bus\n
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
\n                       ...\nNameError: global name \'MQ_BACKEND\' is
not defined\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_4': 'jyzd/shh', '_3': 'shh', '_2': 'COMM', '_1':
'[jyzd/subsysname].ini'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:29:35,654 T9972 INFO guocai_txj.py|25|组件[pub_error]执行开始
2016-08-23 09:29:35,657 T9972 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 09:29:35,660 T9972 INFO guocai_txj.py|28|组件[pub_error]执行结束
2016-08-23 09:29:35,674 T9972 INFO 从三方接收到的数据：【】
2016-08-23 09:29:35,684 T9972 INFO 报文发往送到GAPS成功
2016-08-23 09:29:35,700 T9972 INFO 
--------------提交缓冲日志 END[2016-08-23 09:29:35.701000]---------------

2016-08-23 09:30:18,247 T8160 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 09:30:21,230 T9136 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 09:30:21,269 T9136 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:30:21,273 T9136 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:30:21,282 T9136 INFO guocai_txj.py|207|组件[STRAC_Commbuf]执行开始
2016-08-23 09:30:21,286 T9136 INFO guocai_txj.py|210|组件[STRAC_Commbuf]执行结束
2016-08-23 09:30:21,292 T9136 INFO guocai_txj.py|219|组件[STRAC_XMLTree]执行开始
2016-08-23 09:30:21,296 T9136 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:30:21,311 T9136 INFO guocai_txj.py|221|组件[STRAC_XMLTree]执行结束
2016-08-23 09:30:21,316 T9136 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:30:21,319 T9136 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:30:21,323 T9136 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:30:21,328 T9136 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 146, in SSYS_GetIniCfg
    log.info(jyzd.get("systemsign",""),'%s|%s|GAPSETCDIR=[%s]',FN(),LN(),MQ_BACKEND)
                jyzd = AttrDict{
                       commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
                       <spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
                       iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
                       ...
NameError: global name 'MQ_BACKEND' is not defined

2016-08-23 09:30:21,362 T9136 ERROR 交易字典内容输出：AttrDict{
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 146, in SSYS_GetIniCfg\n    log.info(jyzd
.get("systemsign",""),\'%s|%s|GAPSETCDIR=[%s]\',FN(),LN(),MQ_BACKEND)\
n                jyzd = AttrDict{\n
commbuf:\'00000566<?xml version=\\\'1.0\\\'
encoding="GB2312"?><root><ver>1.0</ver>\n                       <spid>
11111</spid><spbillno>222222</spbillno><business_type>14900</bus\n
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
\n                       ...\nNameError: global name \'MQ_BACKEND\' is
not defined\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_4': 'jyzd/shh', '_3': 'shh', '_2': 'COMM', '_1':
'[jyzd/subsysname].ini'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:30:21,385 T9136 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 09:30:21,388 T9136 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 09:30:21,392 T9136 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 09:30:21,397 T9136 INFO 从三方接收到的数据：【】
2016-08-23 09:30:21,398 T9136 INFO 报文发往送到GAPS成功
2016-08-23 09:30:21,401 T9136 INFO 
--------------提交缓冲日志 END[2016-08-23 09:30:21.401000]---------------

2016-08-23 09:32:20,877 T6380 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 09:32:23,447 T9228 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 09:32:23,480 T9228 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:32:23,483 T9228 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:32:23,487 T9228 INFO guocai_txj.py|207|组件[STRAC_Commbuf]执行开始
2016-08-23 09:32:23,493 T9228 INFO guocai_txj.py|210|组件[STRAC_Commbuf]执行结束
2016-08-23 09:32:23,497 T9228 INFO guocai_txj.py|219|组件[STRAC_XMLTree]执行开始
2016-08-23 09:32:23,502 T9228 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:32:23,515 T9228 INFO guocai_txj.py|221|组件[STRAC_XMLTree]执行结束
2016-08-23 09:32:23,520 T9228 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:32:23,523 T9228 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:32:23,526 T9228 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:32:23,529 T9228 INFO guocai_txj.py|146|GAPSETCDIR=[database]
2016-08-23 09:32:23,542 T9228 INFO guocai_txj.py|148|组件[SSYS_GetIniCfg]执行结束
2016-08-23 09:32:23,549 T9228 INFO guocai_txj.py|232|组件[SDATA_MStrCompare]执行开始
2016-08-23 09:32:23,558 T9228 INFO guocai_txj.py|234|执行['local2remote'=='local2remote']
2016-08-23 09:32:23,561 T9228 INFO guocai_txj.py|236|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 09:32:23,566 T9228 INFO guocai_txj.py|276|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 09:32:23,578 T9228 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 09:32:23,585 T9228 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:32:23,622 T9228 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 09:32:23,673 T9228 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:32:23,676 T9228 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:32:23,680 T9228 INFO guocai_txj.py|258|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 09:32:23,684 T9228 INFO guocai_txj.py|259|将commbuf内容转换到字典中
2016-08-23 09:32:23,687 T9228 INFO guocai_txj.py|263|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 09:32:23,694 T9228 INFO guocai_txj.py|265|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 09:32:23,698 T9228 INFO guocai_txj.py|248|组件[SDATA_MSetValue]执行开始
2016-08-23 09:32:23,703 T9228 INFO guocai_txj.py|249|组件[SDATA_MSetValue]执行结束
2016-08-23 09:32:23,707 T9228 INFO guocai_txj.py|166|组件[PY_GetCipher]执行开始
2016-08-23 09:32:23,713 T9228 INFO guocai_txj.py|168|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 09:32:23,717 T9228 INFO guocai_txj.py|170|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 09:32:23,723 T9228 INFO guocai_txj.py|172|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0
2016-08-23 09:32:23,730 T9228 INFO guocai_txj.py|174|进行MD5运算后sign_md5=42f5e82173b880a5213cfc640707a936
2016-08-23 09:32:23,733 T9228 INFO guocai_txj.py|175|组件[PY_GetCipher]执行结束
2016-08-23 09:32:23,739 T9228 INFO guocai_txj.py|157|组件[SAPEX_RESCHECK]执行开始
2016-08-23 09:32:23,742 T9228 INFO guocai_txj.py|158|组件[SAPEX_RESCHECK]执行结束
2016-08-23 09:32:23,747 T9228 INFO guocai_txj.py|183|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 09:32:23,752 T9228 INFO guocai_txj.py|184|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 09:32:23,759 T9228 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:32:23,763 T9228 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:32:23,766 T9228 INFO guocai_txj.py|310|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 09:32:23,773 T9228 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:32:23,782 T9228 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:32:23,788 T9228 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 09:32:23,812 T9228 INFO 报文发往送到GAPS成功
2016-08-23 09:32:23,813 T9228 INFO 
--------------提交缓冲日志 END[2016-08-23 09:32:23.814000]---------------

2016-08-23 09:32:23,878 T9912 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 01:34:26 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 09:32:23,900 T9912 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:32:23,903 T9912 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:32:23,907 T9912 INFO guocai_txj.py|207|组件[STRAC_Commbuf]执行开始
2016-08-23 09:32:23,917 T9912 INFO guocai_txj.py|210|组件[STRAC_Commbuf]执行结束
2016-08-23 09:32:23,921 T9912 INFO guocai_txj.py|219|组件[STRAC_XMLTree]执行开始
2016-08-23 09:32:23,927 T9912 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:34:26
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:32:23,977 T9912 INFO guocai_txj.py|221|组件[STRAC_XMLTree]执行结束
2016-08-23 09:32:23,983 T9912 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:32:23,986 T9912 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:32:23,990 T9912 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:32:23,996 T9912 INFO guocai_txj.py|146|GAPSETCDIR=[database]
2016-08-23 09:32:24,026 T9912 INFO guocai_txj.py|148|组件[SSYS_GetIniCfg]执行结束
2016-08-23 09:32:24,035 T9912 INFO guocai_txj.py|232|组件[SDATA_MStrCompare]执行开始
2016-08-23 09:32:24,071 T9912 INFO guocai_txj.py|234|执行['remote2local'=='local2remote']
2016-08-23 09:32:24,075 T9912 INFO guocai_txj.py|239|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 09:32:24,082 T9912 INFO guocai_txj.py|276|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 09:32:24,122 T9912 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 09:32:24,128 T9912 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:34:26
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:32:24,177 T9912 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 09:32:24,190 T9912 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:32:24,196 T9912 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:32:24,203 T9912 INFO guocai_txj.py|258|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 09:32:24,210 T9912 INFO guocai_txj.py|259|将commbuf内容转换到字典中
2016-08-23 09:32:24,239 T9912 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 261, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 09:32:24,312 T9912 ERROR 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 261, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:34:26
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:32:24,352 T9912 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 09:32:24,358 T9912 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 09:32:24,364 T9912 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 09:32:24,368 T9912 INFO guocai_txj.py|310|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 09:32:24,374 T9912 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:32:24,380 T9912 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:32:24,384 T9912 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 09:32:24,407 T9912 INFO 报文发往送到GAPS成功
2016-08-23 09:32:24,411 T9912 INFO 
--------------提交缓冲日志 END[2016-08-23 09:32:24.412000]---------------

2016-08-23 09:32:24,421 T9912 INFO 无数据break
2016-08-23 09:32:24,426 T9228 INFO 无数据break
2016-08-23 09:44:50,829 T9648 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 09:44:53,681 T9460 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 09:44:53,726 T9460 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:44:53,729 T9460 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:44:53,734 T9460 INFO guocai_txj.py|208|组件[STRAC_Commbuf]执行开始
2016-08-23 09:44:53,740 T9460 INFO guocai_txj.py|211|组件[STRAC_Commbuf]执行结束
2016-08-23 09:44:53,747 T9460 INFO guocai_txj.py|220|组件[STRAC_XMLTree]执行开始
2016-08-23 09:44:53,752 T9460 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:53,779 T9460 INFO guocai_txj.py|222|组件[STRAC_XMLTree]执行结束
2016-08-23 09:44:53,785 T9460 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:44:53,789 T9460 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:44:53,793 T9460 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:44:53,796 T9460 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 09:44:53,812 T9460 INFO guocai_txj.py|148|cmd='sys_guocai.ini'COMM'shh'
2016-08-23 09:44:53,815 T9460 INFO guocai_txj.py|149|组件[SSYS_GetIniCfg]执行结束
2016-08-23 09:44:53,819 T9460 INFO guocai_txj.py|233|组件[SDATA_MStrCompare]执行开始
2016-08-23 09:44:53,835 T9460 INFO guocai_txj.py|235|执行['local2remote'=='local2remote']
2016-08-23 09:44:53,838 T9460 INFO guocai_txj.py|237|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 09:44:53,842 T9460 INFO guocai_txj.py|277|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 09:44:53,858 T9460 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 09:44:53,862 T9460 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:53,901 T9460 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 09:44:53,914 T9460 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:44:53,915 T9460 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:44:53,921 T9460 INFO guocai_txj.py|259|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 09:44:53,926 T9460 INFO guocai_txj.py|260|将commbuf内容转换到字典中
2016-08-23 09:44:53,930 T9460 INFO guocai_txj.py|264|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 09:44:53,934 T9460 INFO guocai_txj.py|266|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 09:44:53,940 T9460 INFO guocai_txj.py|249|组件[SDATA_MSetValue]执行开始
2016-08-23 09:44:53,943 T9460 INFO guocai_txj.py|250|组件[SDATA_MSetValue]执行结束
2016-08-23 09:44:53,948 T9460 INFO guocai_txj.py|167|组件[PY_GetCipher]执行开始
2016-08-23 09:44:53,953 T9460 INFO guocai_txj.py|169|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 09:44:53,957 T9460 INFO guocai_txj.py|171|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 09:44:53,961 T9460 INFO guocai_txj.py|173|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0
2016-08-23 09:44:53,967 T9460 INFO guocai_txj.py|175|进行MD5运算后sign_md5=42f5e82173b880a5213cfc640707a936
2016-08-23 09:44:53,970 T9460 INFO guocai_txj.py|176|组件[PY_GetCipher]执行结束
2016-08-23 09:44:53,976 T9460 INFO guocai_txj.py|158|组件[SAPEX_RESCHECK]执行开始
2016-08-23 09:44:53,977 T9460 INFO guocai_txj.py|159|组件[SAPEX_RESCHECK]执行结束
2016-08-23 09:44:53,983 T9460 INFO guocai_txj.py|184|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 09:44:53,986 T9460 INFO guocai_txj.py|185|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 09:44:53,992 T9460 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:44:53,997 T9460 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:44:54,000 T9460 INFO guocai_txj.py|311|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 09:44:54,006 T9460 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:44:54,012 T9460 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:44:54,016 T9460 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 09:44:54,036 T9460 INFO 报文发往送到GAPS成功
2016-08-23 09:44:54,038 T9460 INFO 
--------------提交缓冲日志 END[2016-08-23 09:44:54.038000]---------------

2016-08-23 09:44:54,102 T8620 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 01:46:56 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 09:44:54,127 T8620 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:44:54,131 T8620 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:44:54,138 T8620 INFO guocai_txj.py|208|组件[STRAC_Commbuf]执行开始
2016-08-23 09:44:54,145 T8620 INFO guocai_txj.py|211|组件[STRAC_Commbuf]执行结束
2016-08-23 09:44:54,151 T8620 INFO guocai_txj.py|220|组件[STRAC_XMLTree]执行开始
2016-08-23 09:44:54,155 T8620 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:46:56
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:54,203 T8620 INFO guocai_txj.py|222|组件[STRAC_XMLTree]执行结束
2016-08-23 09:44:54,207 T8620 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:44:54,210 T8620 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:44:54,217 T8620 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:44:54,220 T8620 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 09:44:54,249 T8620 INFO guocai_txj.py|148|cmd='sys_guocai.ini'COMM'shh'
2016-08-23 09:44:54,253 T8620 INFO guocai_txj.py|149|组件[SSYS_GetIniCfg]执行结束
2016-08-23 09:44:54,257 T8620 INFO guocai_txj.py|233|组件[SDATA_MStrCompare]执行开始
2016-08-23 09:44:54,293 T8620 INFO guocai_txj.py|235|执行['remote2local'=='local2remote']
2016-08-23 09:44:54,296 T8620 INFO guocai_txj.py|240|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 09:44:54,302 T8620 INFO guocai_txj.py|277|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 09:44:54,335 T8620 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 09:44:54,341 T8620 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:46:56
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:54,388 T8620 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 09:44:54,400 T8620 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:44:54,403 T8620 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:44:54,408 T8620 INFO guocai_txj.py|259|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 09:44:54,411 T8620 INFO guocai_txj.py|260|将commbuf内容转换到字典中
2016-08-23 09:44:54,415 T8620 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 262, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 09:44:54,477 T8620 ERROR 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 262, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:46:56
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:54,509 T8620 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 09:44:54,515 T8620 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 09:44:54,519 T8620 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 09:44:54,522 T8620 INFO guocai_txj.py|311|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 09:44:54,528 T8620 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:44:54,533 T8620 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:44:54,538 T8620 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 09:44:54,556 T8620 INFO 报文发往送到GAPS成功
2016-08-23 09:44:54,559 T8620 INFO 
--------------提交缓冲日志 END[2016-08-23 09:44:54.559000]---------------

2016-08-23 09:44:54,566 T8620 INFO 无数据break
2016-08-23 09:44:54,581 T9460 INFO 无数据break
2016-08-23 09:44:58,355 T9752 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 09:44:58,378 T9752 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:44:58,382 T9752 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:44:58,387 T9752 INFO guocai_txj.py|208|组件[STRAC_Commbuf]执行开始
2016-08-23 09:44:58,392 T9752 INFO guocai_txj.py|211|组件[STRAC_Commbuf]执行结束
2016-08-23 09:44:58,397 T9752 INFO guocai_txj.py|220|组件[STRAC_XMLTree]执行开始
2016-08-23 09:44:58,405 T9752 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 262, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:58,471 T9752 INFO guocai_txj.py|222|组件[STRAC_XMLTree]执行结束
2016-08-23 09:44:58,477 T9752 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:44:58,480 T9752 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:44:58,486 T9752 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:44:58,490 T9752 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 09:44:58,528 T9752 INFO guocai_txj.py|148|cmd='sys_guocai.ini'COMM'shh'
2016-08-23 09:44:58,530 T9752 INFO guocai_txj.py|149|组件[SSYS_GetIniCfg]执行结束
2016-08-23 09:44:58,536 T9752 INFO guocai_txj.py|233|组件[SDATA_MStrCompare]执行开始
2016-08-23 09:44:58,573 T9752 INFO guocai_txj.py|235|执行['local2remote'=='local2remote']
2016-08-23 09:44:58,576 T9752 INFO guocai_txj.py|237|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 09:44:58,581 T9752 INFO guocai_txj.py|277|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 09:44:58,619 T9752 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 09:44:58,625 T9752 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 262, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:58,694 T9752 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 09:44:58,703 T9752 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:44:58,707 T9752 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:44:58,713 T9752 INFO guocai_txj.py|259|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 09:44:58,717 T9752 INFO guocai_txj.py|260|将commbuf内容转换到字典中
2016-08-23 09:44:58,721 T9752 INFO guocai_txj.py|264|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 09:44:58,727 T9752 INFO guocai_txj.py|266|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 09:44:58,733 T9752 INFO guocai_txj.py|249|组件[SDATA_MSetValue]执行开始
2016-08-23 09:44:58,736 T9752 INFO guocai_txj.py|250|组件[SDATA_MSetValue]执行结束
2016-08-23 09:44:58,742 T9752 INFO guocai_txj.py|167|组件[PY_GetCipher]执行开始
2016-08-23 09:44:58,744 T9752 INFO guocai_txj.py|169|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 09:44:58,750 T9752 INFO guocai_txj.py|171|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 09:44:58,757 T9752 INFO guocai_txj.py|173|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0
2016-08-23 09:44:58,762 T9752 INFO guocai_txj.py|175|进行MD5运算后sign_md5=42f5e82173b880a5213cfc640707a936
2016-08-23 09:44:58,763 T9752 INFO guocai_txj.py|176|组件[PY_GetCipher]执行结束
2016-08-23 09:44:58,772 T9752 INFO guocai_txj.py|158|组件[SAPEX_RESCHECK]执行开始
2016-08-23 09:44:58,776 T9752 INFO guocai_txj.py|159|组件[SAPEX_RESCHECK]执行结束
2016-08-23 09:44:58,780 T9752 INFO guocai_txj.py|184|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 09:44:58,785 T9752 INFO guocai_txj.py|185|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 09:44:58,789 T9752 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:44:58,795 T9752 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:44:58,798 T9752 INFO guocai_txj.py|311|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 09:44:58,803 T9752 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:44:58,808 T9752 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:44:58,812 T9752 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 09:44:58,832 T9752 INFO 报文发往送到GAPS成功
2016-08-23 09:44:58,836 T9752 INFO 
--------------提交缓冲日志 END[2016-08-23 09:44:58.837000]---------------

2016-08-23 09:44:58,900 T9756 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 01:47:01 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 09:44:58,921 T9756 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:44:58,926 T9756 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:44:58,931 T9756 INFO guocai_txj.py|208|组件[STRAC_Commbuf]执行开始
2016-08-23 09:44:58,937 T9756 INFO guocai_txj.py|211|组件[STRAC_Commbuf]执行结束
2016-08-23 09:44:58,944 T9756 INFO guocai_txj.py|220|组件[STRAC_XMLTree]执行开始
2016-08-23 09:44:58,951 T9756 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 262, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:47:01
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:59,022 T9756 INFO guocai_txj.py|222|组件[STRAC_XMLTree]执行结束
2016-08-23 09:44:59,026 T9756 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:44:59,030 T9756 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:44:59,036 T9756 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:44:59,039 T9756 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 09:44:59,078 T9756 INFO guocai_txj.py|148|cmd='sys_guocai.ini'COMM'shh'
2016-08-23 09:44:59,082 T9756 INFO guocai_txj.py|149|组件[SSYS_GetIniCfg]执行结束
2016-08-23 09:44:59,088 T9756 INFO guocai_txj.py|233|组件[SDATA_MStrCompare]执行开始
2016-08-23 09:44:59,132 T9756 INFO guocai_txj.py|235|执行['remote2local'=='local2remote']
2016-08-23 09:44:59,135 T9756 INFO guocai_txj.py|240|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 09:44:59,140 T9756 INFO guocai_txj.py|277|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 09:44:59,183 T9756 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 09:44:59,188 T9756 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 262, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:47:01
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:59,262 T9756 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 09:44:59,278 T9756 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:44:59,282 T9756 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:44:59,286 T9756 INFO guocai_txj.py|259|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 09:44:59,290 T9756 INFO guocai_txj.py|260|将commbuf内容转换到字典中
2016-08-23 09:44:59,295 T9756 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 262, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 09:44:59,364 T9756 ERROR 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 262, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:47:01
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:44:59,408 T9756 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 09:44:59,414 T9756 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 09:44:59,420 T9756 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 09:44:59,423 T9756 INFO guocai_txj.py|311|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 09:44:59,430 T9756 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:44:59,437 T9756 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:44:59,444 T9756 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 09:44:59,469 T9756 INFO 报文发往送到GAPS成功
2016-08-23 09:44:59,471 T9756 INFO 
--------------提交缓冲日志 END[2016-08-23 09:44:59.472000]---------------

2016-08-23 09:44:59,480 T9756 INFO 无数据break
2016-08-23 09:44:59,484 T9752 INFO 无数据break
2016-08-23 09:53:55,686 T6628 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 09:53:58,332 T6088 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 09:53:58,368 T6088 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:53:58,369 T6088 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:53:58,374 T6088 INFO guocai_txj.py|212|组件[STRAC_Commbuf]执行开始
2016-08-23 09:53:58,380 T6088 INFO guocai_txj.py|215|组件[STRAC_Commbuf]执行结束
2016-08-23 09:53:58,382 T6088 INFO guocai_txj.py|224|组件[STRAC_XMLTree]执行开始
2016-08-23 09:53:58,388 T6088 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:53:58,400 T6088 INFO guocai_txj.py|226|组件[STRAC_XMLTree]执行结束
2016-08-23 09:53:58,405 T6088 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:53:58,408 T6088 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:53:58,414 T6088 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:53:58,415 T6088 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 09:53:58,427 T6088 INFO guocai_txj.py|152|jyzd/shh=1800631877
2016-08-23 09:53:58,430 T6088 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 09:53:58,434 T6088 INFO guocai_txj.py|237|组件[SDATA_MStrCompare]执行开始
2016-08-23 09:53:58,443 T6088 INFO guocai_txj.py|239|执行['local2remote'=='local2remote']
2016-08-23 09:53:58,447 T6088 INFO guocai_txj.py|241|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 09:53:58,450 T6088 INFO guocai_txj.py|281|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 09:53:58,461 T6088 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 09:53:58,470 T6088 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:53:58,509 T6088 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 09:53:58,519 T6088 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:53:58,523 T6088 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:53:58,529 T6088 INFO guocai_txj.py|263|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 09:53:58,532 T6088 INFO guocai_txj.py|264|将commbuf内容转换到字典中
2016-08-23 09:53:58,536 T6088 INFO guocai_txj.py|268|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 09:53:58,540 T6088 INFO guocai_txj.py|270|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 09:53:58,546 T6088 INFO guocai_txj.py|253|组件[SDATA_MSetValue]执行开始
2016-08-23 09:53:58,549 T6088 INFO guocai_txj.py|254|组件[SDATA_MSetValue]执行结束
2016-08-23 09:53:58,555 T6088 INFO guocai_txj.py|171|组件[PY_GetCipher]执行开始
2016-08-23 09:53:58,558 T6088 INFO guocai_txj.py|173|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 09:53:58,562 T6088 INFO guocai_txj.py|175|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 09:53:58,569 T6088 INFO guocai_txj.py|177|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0
2016-08-23 09:53:58,573 T6088 INFO guocai_txj.py|179|进行MD5运算后sign_md5=42f5e82173b880a5213cfc640707a936
2016-08-23 09:53:58,575 T6088 INFO guocai_txj.py|180|组件[PY_GetCipher]执行结束
2016-08-23 09:53:58,579 T6088 INFO guocai_txj.py|162|组件[SAPEX_RESCHECK]执行开始
2016-08-23 09:53:58,585 T6088 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行结束
2016-08-23 09:53:58,591 T6088 INFO guocai_txj.py|188|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 09:53:58,594 T6088 INFO guocai_txj.py|189|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 09:53:58,598 T6088 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:53:58,605 T6088 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:53:58,608 T6088 INFO guocai_txj.py|315|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 09:53:58,612 T6088 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:53:58,618 T6088 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:53:58,621 T6088 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 09:53:58,641 T6088 INFO 报文发往送到GAPS成功
2016-08-23 09:53:58,642 T6088 INFO 
--------------提交缓冲日志 END[2016-08-23 09:53:58.643000]---------------

2016-08-23 09:53:58,706 T8336 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 01:56:00 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 09:53:58,730 T8336 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:53:58,733 T8336 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:53:58,740 T8336 INFO guocai_txj.py|212|组件[STRAC_Commbuf]执行开始
2016-08-23 09:53:58,746 T8336 INFO guocai_txj.py|215|组件[STRAC_Commbuf]执行结束
2016-08-23 09:53:58,752 T8336 INFO guocai_txj.py|224|组件[STRAC_XMLTree]执行开始
2016-08-23 09:53:58,756 T8336 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:56:00
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:53:58,803 T8336 INFO guocai_txj.py|226|组件[STRAC_XMLTree]执行结束
2016-08-23 09:53:58,809 T8336 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 09:53:58,813 T8336 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 09:53:58,819 T8336 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 09:53:58,822 T8336 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 09:53:58,852 T8336 INFO guocai_txj.py|152|jyzd/shh=1800631877
2016-08-23 09:53:58,855 T8336 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 09:53:58,861 T8336 INFO guocai_txj.py|237|组件[SDATA_MStrCompare]执行开始
2016-08-23 09:53:58,888 T8336 INFO guocai_txj.py|239|执行['remote2local'=='local2remote']
2016-08-23 09:53:58,891 T8336 INFO guocai_txj.py|244|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 09:53:58,895 T8336 INFO guocai_txj.py|281|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 09:53:58,924 T8336 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 09:53:58,930 T8336 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:56:00
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:53:58,976 T8336 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 09:53:58,989 T8336 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 09:53:58,993 T8336 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 09:53:58,996 T8336 INFO guocai_txj.py|263|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 09:53:59,000 T8336 INFO guocai_txj.py|264|将commbuf内容转换到字典中
2016-08-23 09:53:59,006 T8336 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 266, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 09:53:59,068 T8336 ERROR 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 266, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 01:56:00
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 09:53:59,099 T8336 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 09:53:59,104 T8336 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 09:53:59,111 T8336 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 09:53:59,115 T8336 INFO guocai_txj.py|315|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 09:53:59,119 T8336 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 09:53:59,125 T8336 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 09:53:59,130 T8336 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 09:53:59,148 T8336 INFO 报文发往送到GAPS成功
2016-08-23 09:53:59,151 T8336 INFO 
--------------提交缓冲日志 END[2016-08-23 09:53:59.152000]---------------

2016-08-23 09:53:59,160 T8336 INFO 无数据break
2016-08-23 09:53:59,170 T6088 INFO 无数据break
2016-08-23 10:12:06,674 T228 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 10:12:09,010 T9804 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 10:12:09,058 T9804 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 10:12:09,061 T9804 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 10:12:09,065 T9804 INFO guocai_txj.py|215|组件[STRAC_Commbuf]执行开始
2016-08-23 10:12:09,069 T9804 INFO guocai_txj.py|218|组件[STRAC_Commbuf]执行结束
2016-08-23 10:12:09,072 T9804 INFO guocai_txj.py|227|组件[STRAC_XMLTree]执行开始
2016-08-23 10:12:09,078 T9804 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:12:09,092 T9804 INFO guocai_txj.py|229|组件[STRAC_XMLTree]执行结束
2016-08-23 10:12:09,098 T9804 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 10:12:09,101 T9804 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 10:12:09,104 T9804 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 10:12:09,107 T9804 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 10:12:09,118 T9804 INFO guocai_txj.py|152|jyzd/shh=1800631877
2016-08-23 10:12:09,119 T9804 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 10:12:09,128 T9804 INFO guocai_txj.py|240|组件[SDATA_MStrCompare]执行开始
2016-08-23 10:12:09,138 T9804 INFO guocai_txj.py|242|执行['local2remote'=='local2remote']
2016-08-23 10:12:09,141 T9804 INFO guocai_txj.py|244|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 10:12:09,151 T9804 INFO guocai_txj.py|284|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 10:12:09,164 T9804 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 10:12:09,171 T9804 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:12:09,213 T9804 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 10:12:09,233 T9804 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 10:12:09,237 T9804 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 10:12:09,243 T9804 INFO guocai_txj.py|266|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 10:12:09,247 T9804 INFO guocai_txj.py|267|将commbuf内容转换到字典中
2016-08-23 10:12:09,253 T9804 INFO guocai_txj.py|271|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 10:12:09,259 T9804 INFO guocai_txj.py|273|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 10:12:09,266 T9804 INFO guocai_txj.py|256|组件[SDATA_MSetValue]执行开始
2016-08-23 10:12:09,269 T9804 INFO guocai_txj.py|257|组件[SDATA_MSetValue]执行结束
2016-08-23 10:12:09,273 T9804 INFO guocai_txj.py|171|组件[PY_GetCipher]执行开始
2016-08-23 10:12:09,278 T9804 INFO guocai_txj.py|173|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 10:12:09,283 T9804 INFO guocai_txj.py|175|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 10:12:09,290 T9804 INFO guocai_txj.py|177|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0
2016-08-23 10:12:09,295 T9804 INFO guocai_txj.py|179|进行MD5运算后sign_md5=42f5e82173b880a5213cfc640707a936
2016-08-23 10:12:09,299 T9804 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 181, in PY_GetCipher
    cipher_data = getcipher(signdata,pubkey)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 111, in getcipher
    result = result + rsa_base64_encrypt(signdata_tmp,publickey)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 77, in rsa_base64_encrypt
    return base64.b64encode(cipher.encrypt(data))
              cipher = <Crypto.Cipher.PKCS1_v1_5.PKCS115_Cipher instance at 0x03443148>
                data = 'bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222'
                 key = <_RSAobj @0x33e7cd8 n(1024),e>
NameError: global name 'base64' is not defined

2016-08-23 10:12:09,391 T9804 ERROR 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 181, in PY_GetCipher\n    cipher_data =
getcipher(signdata,pubkey)\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\
xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\
xfa\\tfb_txj\\bin\\tysf_uitls.py", line 111, in getcipher\n    result
= result + rsa_base64_encrypt(signdata_tmp,publickey)\n  File "H:\\sha
re\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\x
b1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\tysf_uitls.py", line 77,
in rsa_base64_encrypt\n    return
base64.b64encode(cipher.encrypt(data))\n              cipher =
<Crypto.Cipher.PKCS1_v1_5.PKCS115_Cipher instance at 0x03443148>\n
data = \'bank_ins_code=26520300&bank_name=10000&business_no=444444&bus
iness_type=14900&card_id=622384609891538799&spbillno=222\'\n
key = <_RSAobj @0x33e7cd8 n(1024),e>\nNameError: global name
\'base64\' is not defined\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_2': 'jyzd/yymc=[/xesb/req/yymc]', '_1': '0'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:12:09,427 T9804 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 317, in SCNTR_CallSubFlow
    ret = flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 115, in goflow
    curr = curr.go_next( ret )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 66, in go_next
    return self.next[ret][1]
                self = <flow.flow_utils.FlowNode instance at 0x03434E18>
                 ret = -1
KeyError: -1

2016-08-23 10:12:09,493 T9804 ERROR 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 317, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x03434E18>\n
ret = -1\nKeyError: -1\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_2': 'jyzd/yymc=[/xesb/req/yymc]', '_1': '0'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:12:09,529 T9804 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 10:12:09,532 T9804 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 10:12:09,538 T9804 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 10:12:09,542 T9804 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 10:12:09,562 T9804 INFO 报文发往送到GAPS成功
2016-08-23 10:12:09,563 T9804 INFO 
--------------提交缓冲日志 END[2016-08-23 10:12:09.564000]---------------

2016-08-23 10:12:09,642 T7536 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 02:14:11 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 10:12:09,664 T7536 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 10:12:09,668 T7536 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 10:12:09,674 T7536 INFO guocai_txj.py|215|组件[STRAC_Commbuf]执行开始
2016-08-23 10:12:09,680 T7536 INFO guocai_txj.py|218|组件[STRAC_Commbuf]执行结束
2016-08-23 10:12:09,686 T7536 INFO guocai_txj.py|227|组件[STRAC_XMLTree]执行开始
2016-08-23 10:12:09,693 T7536 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 317, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x03434E18>\n
ret = -1\nKeyError: -1\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 02:14:11
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:12:09,760 T7536 INFO guocai_txj.py|229|组件[STRAC_XMLTree]执行结束
2016-08-23 10:12:09,769 T7536 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 10:12:09,772 T7536 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 10:12:09,778 T7536 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 10:12:09,780 T7536 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 10:12:09,819 T7536 INFO guocai_txj.py|152|jyzd/shh=1800631877
2016-08-23 10:12:09,822 T7536 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 10:12:09,828 T7536 INFO guocai_txj.py|240|组件[SDATA_MStrCompare]执行开始
2016-08-23 10:12:09,867 T7536 INFO guocai_txj.py|242|执行['remote2local'=='local2remote']
2016-08-23 10:12:09,871 T7536 INFO guocai_txj.py|247|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 10:12:09,875 T7536 INFO guocai_txj.py|284|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 10:12:09,913 T7536 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 10:12:09,920 T7536 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 317, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x03434E18>\n
ret = -1\nKeyError: -1\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 02:14:11
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:12:09,983 T7536 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 10:12:09,996 T7536 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 10:12:09,999 T7536 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 10:12:10,003 T7536 INFO guocai_txj.py|266|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 10:12:10,006 T7536 INFO guocai_txj.py|267|将commbuf内容转换到字典中
2016-08-23 10:12:10,012 T7536 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 269, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 10:12:10,098 T7536 ERROR 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 269, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 02:14:11
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:12:10,135 T7536 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 10:12:10,140 T7536 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 10:12:10,151 T7536 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 10:12:10,157 T7536 INFO guocai_txj.py|318|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 10:12:10,167 T7536 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 10:12:10,197 T7536 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 10:12:10,206 T7536 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 10:12:10,250 T7536 INFO 报文发往送到GAPS成功
2016-08-23 10:12:10,255 T7536 INFO 
--------------提交缓冲日志 END[2016-08-23 10:12:10.255000]---------------

2016-08-23 10:12:10,263 T7536 INFO 无数据break
2016-08-23 10:12:10,285 T9804 INFO 无数据break
2016-08-23 10:13:03,983 T9944 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 10:13:05,864 T8232 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 10:13:05,907 T8232 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 10:13:05,921 T8232 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 10:13:05,956 T8232 INFO guocai_txj.py|215|组件[STRAC_Commbuf]执行开始
2016-08-23 10:13:05,963 T8232 INFO guocai_txj.py|218|组件[STRAC_Commbuf]执行结束
2016-08-23 10:13:05,969 T8232 INFO guocai_txj.py|227|组件[STRAC_XMLTree]执行开始
2016-08-23 10:13:05,976 T8232 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:13:05,996 T8232 INFO guocai_txj.py|229|组件[STRAC_XMLTree]执行结束
2016-08-23 10:13:06,013 T8232 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 10:13:06,016 T8232 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 10:13:06,022 T8232 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 10:13:06,025 T8232 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 10:13:06,039 T8232 INFO guocai_txj.py|152|jyzd/shh=1800631877
2016-08-23 10:13:06,043 T8232 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 10:13:06,051 T8232 INFO guocai_txj.py|240|组件[SDATA_MStrCompare]执行开始
2016-08-23 10:13:06,075 T8232 INFO guocai_txj.py|242|执行['local2remote'=='local2remote']
2016-08-23 10:13:06,095 T8232 INFO guocai_txj.py|244|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 10:13:06,132 T8232 INFO guocai_txj.py|284|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 10:13:06,151 T8232 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 10:13:06,161 T8232 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:13:06,209 T8232 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 10:13:06,336 T8232 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 10:13:06,388 T8232 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 10:13:06,404 T8232 INFO guocai_txj.py|266|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 10:13:06,506 T8232 INFO guocai_txj.py|267|将commbuf内容转换到字典中
2016-08-23 10:13:06,520 T8232 INFO guocai_txj.py|271|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 10:13:06,538 T8232 INFO guocai_txj.py|273|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 10:13:06,592 T8232 INFO guocai_txj.py|256|组件[SDATA_MSetValue]执行开始
2016-08-23 10:13:06,642 T8232 INFO guocai_txj.py|257|组件[SDATA_MSetValue]执行结束
2016-08-23 10:13:06,684 T8232 INFO guocai_txj.py|171|组件[PY_GetCipher]执行开始
2016-08-23 10:13:06,690 T8232 INFO guocai_txj.py|173|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 10:13:06,717 T8232 INFO guocai_txj.py|175|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 10:13:06,732 T8232 INFO guocai_txj.py|177|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0
2016-08-23 10:13:06,750 T8232 INFO guocai_txj.py|179|进行MD5运算后sign_md5=42f5e82173b880a5213cfc640707a936
2016-08-23 10:13:06,793 T8232 INFO guocai_txj.py|182|cipher_data[nJG3kGmlktb7dfplsXi/vaSaMd2nlutKBru0E4Z6EGQnUaC9U32ycVnp/X8/HHgTMbgeCCbb7in+6hdECqL7/rCQyeNftbhezTIbwM+F7YtxVugymNtmQZBxywEGxQN9ohwXXmufDfQr5nGXLE3LfNg7tkN56GcddtPGIiCORdY=X+hMkdwstRJT1zBI9AtLZvDmyUVE/f12qhG4amYVx5Xom26uDs1Ued8B2cZMohGcOoPw0EFYXVQ18260IacS43DRJ+qWJb6tPTIgudDfjp+glbMMW4E3sXoyWHKCmC1PXOXJ5Boj5iga3PwHv5oFBrhLddy+ySm6Me/AJWIkfsU=]
2016-08-23 10:13:06,910 T8232 INFO guocai_txj.py|183|组件[PY_GetCipher]执行结束
2016-08-23 10:13:07,048 T8232 INFO guocai_txj.py|162|组件[SAPEX_RESCHECK]执行开始
2016-08-23 10:13:07,056 T8232 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行结束
2016-08-23 10:13:07,085 T8232 INFO guocai_txj.py|191|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 10:13:07,098 T8232 INFO guocai_txj.py|192|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 10:13:07,119 T8232 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 10:13:07,144 T8232 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 10:13:07,151 T8232 INFO guocai_txj.py|318|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 10:13:07,161 T8232 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 10:13:07,191 T8232 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 10:13:07,200 T8232 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 10:13:07,244 T8232 INFO 报文发往送到GAPS成功
2016-08-23 10:13:07,253 T8232 INFO 
--------------提交缓冲日志 END[2016-08-23 10:13:07.253000]---------------

2016-08-23 10:13:07,305 T8408 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 02:15:09 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 10:13:07,358 T8408 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 10:13:07,367 T8408 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 10:13:07,381 T8408 INFO guocai_txj.py|215|组件[STRAC_Commbuf]执行开始
2016-08-23 10:13:07,438 T8408 INFO guocai_txj.py|218|组件[STRAC_Commbuf]执行结束
2016-08-23 10:13:07,448 T8408 INFO guocai_txj.py|227|组件[STRAC_XMLTree]执行开始
2016-08-23 10:13:07,457 T8408 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 02:15:09
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:13:07,572 T8408 INFO guocai_txj.py|229|组件[STRAC_XMLTree]执行结束
2016-08-23 10:13:07,588 T8408 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 10:13:07,595 T8408 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 10:13:07,608 T8408 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 10:13:07,618 T8408 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 10:13:07,678 T8408 INFO guocai_txj.py|152|jyzd/shh=1800631877
2016-08-23 10:13:07,684 T8408 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 10:13:07,697 T8408 INFO guocai_txj.py|240|组件[SDATA_MStrCompare]执行开始
2016-08-23 10:13:07,760 T8408 INFO guocai_txj.py|242|执行['remote2local'=='local2remote']
2016-08-23 10:13:07,766 T8408 INFO guocai_txj.py|247|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 10:13:07,778 T8408 INFO guocai_txj.py|284|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 10:13:07,842 T8408 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 10:13:07,851 T8408 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 02:15:09
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:13:07,967 T8408 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 10:13:07,989 T8408 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 10:13:07,996 T8408 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 10:13:08,068 T8408 INFO guocai_txj.py|266|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 10:13:08,073 T8408 INFO guocai_txj.py|267|将commbuf内容转换到字典中
2016-08-23 10:13:08,081 T8408 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 269, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 10:13:08,237 T8408 ERROR 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 269, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 02:15:09
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 10:13:08,296 T8408 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 10:13:08,302 T8408 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 10:13:08,309 T8408 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 10:13:08,313 T8408 INFO guocai_txj.py|318|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 10:13:08,323 T8408 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 10:13:08,332 T8408 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 10:13:08,341 T8408 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 10:13:08,371 T8408 INFO 报文发往送到GAPS成功
2016-08-23 10:13:08,403 T8408 INFO 
--------------提交缓冲日志 END[2016-08-23 10:13:08.403000]---------------

2016-08-23 10:13:08,407 T8232 INFO 无数据break
2016-08-23 10:13:08,428 T8408 INFO 无数据break
2016-08-23 10:46:48,490 T10056 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 10:46:51,661 T7728 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 10:49:22,770 T10468 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 10:49:24,851 T1056 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 10:53:29,706 T9672 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 10:53:32,168 T11152 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 10:58:14,039 T5084 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 10:58:16,957 T10352 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 11:05:51,984 T9884 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 11:05:56,434 T10084 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 11:12:49,131 T10836 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 11:12:52,207 T11240 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 11:16:06,686 T9968 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 11:16:09,637 T11068 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 11:18:25,841 T9784 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 11:18:28,618 T6380 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 11:19:35,020 T11052 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 11:19:37,112 T10244 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 11:19:37,140 T10244 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 11:19:37,141 T10244 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 11:19:37,147 T10244 INFO guocai_txj.py|215|组件[STRAC_Commbuf]执行开始
2016-08-23 11:19:37,154 T10244 INFO guocai_txj.py|218|组件[STRAC_Commbuf]执行结束
2016-08-23 11:19:37,161 T10244 INFO guocai_txj.py|227|组件[STRAC_XMLTree]执行开始
2016-08-23 11:19:37,164 T10244 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:19:37,180 T10244 INFO guocai_txj.py|229|组件[STRAC_XMLTree]执行结束
2016-08-23 11:19:37,186 T10244 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 11:19:37,187 T10244 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 11:19:37,191 T10244 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 11:19:37,194 T10244 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 11:19:37,206 T10244 INFO guocai_txj.py|152|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 11:19:37,209 T10244 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 11:19:37,214 T10244 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 11:19:37,217 T10244 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 11:19:37,229 T10244 INFO guocai_txj.py|152|jyzd/shh=1800631877
2016-08-23 11:19:37,232 T10244 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 11:19:37,239 T10244 INFO guocai_txj.py|240|组件[SDATA_MStrCompare]执行开始
2016-08-23 11:19:37,249 T10244 INFO guocai_txj.py|242|执行['local2remote'=='local2remote']
2016-08-23 11:19:37,253 T10244 INFO guocai_txj.py|244|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 11:19:37,256 T10244 INFO guocai_txj.py|284|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 11:19:37,276 T10244 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 11:19:37,282 T10244 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:19:37,325 T10244 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 11:19:37,344 T10244 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 11:19:37,348 T10244 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 11:19:37,355 T10244 INFO guocai_txj.py|266|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 11:19:37,361 T10244 INFO guocai_txj.py|267|将commbuf内容转换到字典中
2016-08-23 11:19:37,365 T10244 INFO guocai_txj.py|271|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 11:19:37,369 T10244 INFO guocai_txj.py|273|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 11:19:37,375 T10244 INFO guocai_txj.py|256|组件[SDATA_MSetValue]执行开始
2016-08-23 11:19:37,381 T10244 INFO guocai_txj.py|257|组件[SDATA_MSetValue]执行结束
2016-08-23 11:19:37,388 T10244 INFO guocai_txj.py|171|组件[PY_GetCipher]执行开始
2016-08-23 11:19:37,391 T10244 INFO guocai_txj.py|173|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 11:19:37,398 T10244 INFO guocai_txj.py|175|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 11:19:37,405 T10244 INFO guocai_txj.py|177|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0
2016-08-23 11:19:37,411 T10244 INFO guocai_txj.py|179|进行MD5运算后sign_md5=42f5e82173b880a5213cfc640707a936
2016-08-23 11:19:37,430 T10244 INFO guocai_txj.py|182|cipher_data[Q5MJrh52UoLk0XzmCWnkPOA8IhdnLdCwKT2rJmqJO2+w+3s66lnrR2UqR8frqpadyLykktg83wbVqX3NaU2Gu4/2JSnb0nM/Jysg3y6HLcjIoCUIKTqxXIwYdRbpc8IodmTIObkFDdRBaEt1M7vzzflvmHXzZATHavJIxU9OnCM=gBsuc4NOPQqoPiChrDaI7a9A8Az8d8uu9Pv9v6dTg0RD291R71Wx18+dQQKxHzpdlCv2EmWeENbmdEkR2HaYGwR7X2iuOO1oM/ZUniSTsyFgtn4kaGiMXsEIiHS3/ve0pdU3geuiNs/IPa1u4zqcic+iG72ZL11MamT7MfPYjmM=]
2016-08-23 11:19:37,436 T10244 INFO guocai_txj.py|183|组件[PY_GetCipher]执行结束
2016-08-23 11:19:37,443 T10244 INFO guocai_txj.py|162|组件[SAPEX_RESCHECK]执行开始
2016-08-23 11:19:37,447 T10244 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行结束
2016-08-23 11:19:37,453 T10244 INFO guocai_txj.py|191|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 11:19:37,459 T10244 INFO guocai_txj.py|192|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 11:19:37,466 T10244 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 11:19:37,473 T10244 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 11:19:37,476 T10244 INFO guocai_txj.py|318|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 11:19:37,483 T10244 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 11:19:37,489 T10244 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 11:19:37,493 T10244 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 11:19:37,513 T10244 INFO 报文发往送到GAPS成功
2016-08-23 11:19:37,516 T10244 INFO 
--------------提交缓冲日志 END[2016-08-23 11:19:37.516000]---------------

2016-08-23 11:19:37,582 T6380 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 03:21:39 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 11:19:37,609 T6380 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 11:19:37,617 T6380 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 11:19:37,625 T6380 INFO guocai_txj.py|215|组件[STRAC_Commbuf]执行开始
2016-08-23 11:19:37,632 T6380 INFO guocai_txj.py|218|组件[STRAC_Commbuf]执行结束
2016-08-23 11:19:37,640 T6380 INFO guocai_txj.py|227|组件[STRAC_XMLTree]执行开始
2016-08-23 11:19:37,647 T6380 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 03:21:39
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:19:37,698 T6380 INFO guocai_txj.py|229|组件[STRAC_XMLTree]执行结束
2016-08-23 11:19:37,706 T6380 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 11:19:37,710 T6380 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 11:19:37,717 T6380 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 11:19:37,723 T6380 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 11:19:37,760 T6380 INFO guocai_txj.py|152|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 11:19:37,763 T6380 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 11:19:37,773 T6380 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 11:19:37,778 T6380 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 11:19:37,813 T6380 INFO guocai_txj.py|152|jyzd/shh=1800631877
2016-08-23 11:19:37,816 T6380 INFO guocai_txj.py|153|组件[SSYS_GetIniCfg]执行结束
2016-08-23 11:19:37,823 T6380 INFO guocai_txj.py|240|组件[SDATA_MStrCompare]执行开始
2016-08-23 11:19:37,855 T6380 INFO guocai_txj.py|242|执行['remote2local'=='local2remote']
2016-08-23 11:19:37,857 T6380 INFO guocai_txj.py|247|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 11:19:37,864 T6380 INFO guocai_txj.py|284|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 11:19:37,898 T6380 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 11:19:37,904 T6380 INFO 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 03:21:39
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:19:37,961 T6380 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 11:19:37,974 T6380 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 11:19:37,979 T6380 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 11:19:37,986 T6380 INFO guocai_txj.py|266|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 11:19:37,990 T6380 INFO guocai_txj.py|267|将commbuf内容转换到字典中
2016-08-23 11:19:37,996 T6380 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 269, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 11:19:38,081 T6380 ERROR 交易字典内容输出：AttrDict{
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 269, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 03:21:39
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:19:38,124 T6380 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 11:19:38,128 T6380 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 11:19:38,132 T6380 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 11:19:38,137 T6380 INFO guocai_txj.py|318|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 11:19:38,144 T6380 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 11:19:38,151 T6380 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 11:19:38,157 T6380 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 11:19:38,180 T6380 INFO 报文发往送到GAPS成功
2016-08-23 11:19:38,183 T6380 INFO 
--------------提交缓冲日志 END[2016-08-23 11:19:38.183000]---------------

2016-08-23 11:19:38,191 T6380 INFO 无数据break
2016-08-23 11:19:38,204 T10244 INFO 无数据break
2016-08-23 11:26:12,365 T11052 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 11:26:15,328 T6740 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 11:26:15,365 T6740 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 11:26:15,369 T6740 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 11:26:15,375 T6740 INFO guocai_txj.py|216|组件[STRAC_Commbuf]执行开始
2016-08-23 11:26:15,381 T6740 INFO guocai_txj.py|219|组件[STRAC_Commbuf]执行结束
2016-08-23 11:26:15,385 T6740 INFO guocai_txj.py|228|组件[STRAC_XMLTree]执行开始
2016-08-23 11:26:15,391 T6740 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:26:15,404 T6740 INFO guocai_txj.py|230|组件[STRAC_XMLTree]执行结束
2016-08-23 11:26:15,410 T6740 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 11:26:15,411 T6740 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 11:26:15,418 T6740 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 11:26:15,421 T6740 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 11:26:15,433 T6740 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 11:26:15,437 T6740 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 11:26:15,443 T6740 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 11:26:15,447 T6740 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 11:26:15,457 T6740 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 11:26:15,460 T6740 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 11:26:15,467 T6740 INFO guocai_txj.py|241|组件[SDATA_MStrCompare]执行开始
2016-08-23 11:26:15,477 T6740 INFO guocai_txj.py|243|执行['local2remote'=='local2remote']
2016-08-23 11:26:15,483 T6740 INFO guocai_txj.py|245|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 11:26:15,487 T6740 INFO guocai_txj.py|285|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 11:26:15,513 T6740 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 11:26:15,517 T6740 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:26:15,566 T6740 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 11:26:15,582 T6740 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 11:26:15,588 T6740 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 11:26:15,594 T6740 INFO guocai_txj.py|267|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 11:26:15,598 T6740 INFO guocai_txj.py|268|将commbuf内容转换到字典中
2016-08-23 11:26:15,604 T6740 INFO guocai_txj.py|272|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 11:26:15,608 T6740 INFO guocai_txj.py|274|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 11:26:15,615 T6740 INFO guocai_txj.py|257|组件[SDATA_MSetValue]执行开始
2016-08-23 11:26:15,621 T6740 INFO guocai_txj.py|258|组件[SDATA_MSetValue]执行结束
2016-08-23 11:26:15,625 T6740 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 11:26:15,628 T6740 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 11:26:15,634 T6740 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 11:26:15,642 T6740 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 11:26:15,647 T6740 INFO guocai_txj.py|180|进行MD5运算后sign_md5=1895e4e1ec4dac1e6b375308704ad33e
2016-08-23 11:26:15,665 T6740 INFO guocai_txj.py|183|cipher_data[bJrxzyvyMm2KUm9j4hkXMZIBe4os2nCA71mUzfO0BTBPotDpUln5PAxjxfB4M0OUbTbSdiokC4x46TIgvBaUlk53V0Jcm+QNAQjdbMZGSW1LPB9a6KA4EotErpdUFrdQdNuoYclUju6rmNwfxVkXCBetqxLho8LgcTv7NSFsy/0=bd6F2+hr2VXfCi1I77jqwAirqRXRfdowbrMVlqA/RLjRPMSG1+mFLCNkk3SJ9suOpExySE+uQevinVQNs1TPTqKdeMDAbwlyLneKCc67hhv7zjDoID48MnIzLw3U1x/iLx5UO7fALRoFsMeV5+RoBv4WMmsb2KwzVhxOiAwuEuI=]
2016-08-23 11:26:15,671 T6740 INFO guocai_txj.py|184|组件[PY_GetCipher]执行结束
2016-08-23 11:26:15,677 T6740 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 11:26:15,680 T6740 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 11:26:15,687 T6740 INFO guocai_txj.py|192|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 11:26:15,691 T6740 INFO guocai_txj.py|193|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 11:26:15,698 T6740 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 11:26:15,703 T6740 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 11:26:15,709 T6740 INFO guocai_txj.py|319|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 11:26:15,717 T6740 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 11:26:15,723 T6740 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 11:26:15,727 T6740 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 11:26:15,750 T6740 INFO 报文发往送到GAPS成功
2016-08-23 11:26:15,753 T6740 INFO 
--------------提交缓冲日志 END[2016-08-23 11:26:15.753000]---------------

2016-08-23 11:26:15,809 T10692 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 03:28:17 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 11:26:15,844 T10692 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 11:26:15,848 T10692 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 11:26:15,855 T10692 INFO guocai_txj.py|216|组件[STRAC_Commbuf]执行开始
2016-08-23 11:26:15,861 T10692 INFO guocai_txj.py|219|组件[STRAC_Commbuf]执行结束
2016-08-23 11:26:15,867 T10692 INFO guocai_txj.py|228|组件[STRAC_XMLTree]执行开始
2016-08-23 11:26:15,874 T10692 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 03:28:17
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:26:15,927 T10692 INFO guocai_txj.py|230|组件[STRAC_XMLTree]执行结束
2016-08-23 11:26:15,934 T10692 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 11:26:15,938 T10692 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 11:26:15,944 T10692 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 11:26:15,950 T10692 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 11:26:15,989 T10692 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 11:26:15,990 T10692 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 11:26:15,997 T10692 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 11:26:16,003 T10692 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 11:26:16,035 T10692 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 11:26:16,039 T10692 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 11:26:16,043 T10692 INFO guocai_txj.py|241|组件[SDATA_MStrCompare]执行开始
2016-08-23 11:26:16,075 T10692 INFO guocai_txj.py|243|执行['remote2local'=='local2remote']
2016-08-23 11:26:16,079 T10692 INFO guocai_txj.py|248|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 11:26:16,086 T10692 INFO guocai_txj.py|285|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 11:26:16,121 T10692 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 11:26:16,127 T10692 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 03:28:17
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:26:16,187 T10692 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 11:26:16,200 T10692 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 11:26:16,204 T10692 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 11:26:16,213 T10692 INFO guocai_txj.py|267|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 11:26:16,217 T10692 INFO guocai_txj.py|268|将commbuf内容转换到字典中
2016-08-23 11:26:16,224 T10692 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 270, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 11:26:16,313 T10692 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 270, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 03:28:17
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 11:26:16,355 T10692 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 11:26:16,358 T10692 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 11:26:16,365 T10692 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 11:26:16,369 T10692 INFO guocai_txj.py|319|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 11:26:16,374 T10692 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 11:26:16,381 T10692 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 11:26:16,385 T10692 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 11:26:16,407 T10692 INFO 报文发往送到GAPS成功
2016-08-23 11:26:16,414 T10692 INFO 
--------------提交缓冲日志 END[2016-08-23 11:26:16.414000]---------------

2016-08-23 11:26:16,428 T10692 INFO 无数据break
2016-08-23 11:26:16,440 T6740 INFO 无数据break
2016-08-23 14:50:43,982 T12576 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 14:50:48,380 T9668 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 14:51:12,759 T12792 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 14:51:15,112 T10796 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 14:51:15,154 T10796 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 14:51:15,157 T10796 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 14:51:15,164 T10796 INFO guocai_txj.py|234|组件[STRAC_Commbuf]执行开始
2016-08-23 14:51:15,170 T10796 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行结束
2016-08-23 14:51:15,176 T10796 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行开始
2016-08-23 14:51:15,180 T10796 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:51:15,194 T10796 INFO guocai_txj.py|248|组件[STRAC_XMLTree]执行结束
2016-08-23 14:51:15,200 T10796 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 14:51:15,203 T10796 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 14:51:15,210 T10796 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:51:15,211 T10796 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:51:15,226 T10796 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 14:51:15,229 T10796 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:51:15,237 T10796 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:51:15,240 T10796 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:51:15,252 T10796 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 14:51:15,253 T10796 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:51:15,259 T10796 INFO guocai_txj.py|259|组件[SDATA_MStrCompare]执行开始
2016-08-23 14:51:15,273 T10796 INFO guocai_txj.py|261|执行['local2remote'=='local2remote']
2016-08-23 14:51:15,275 T10796 INFO guocai_txj.py|263|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 14:51:15,280 T10796 INFO guocai_txj.py|303|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 14:51:15,303 T10796 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 14:51:15,312 T10796 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:51:15,381 T10796 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 14:51:15,398 T10796 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 14:51:15,401 T10796 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 14:51:15,407 T10796 INFO guocai_txj.py|285|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 14:51:15,411 T10796 INFO guocai_txj.py|286|将commbuf内容转换到字典中
2016-08-23 14:51:15,417 T10796 INFO guocai_txj.py|290|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 14:51:15,427 T10796 INFO guocai_txj.py|292|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 14:51:15,434 T10796 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行开始
2016-08-23 14:51:15,438 T10796 INFO guocai_txj.py|276|组件[SDATA_MSetValue]执行结束
2016-08-23 14:51:15,443 T10796 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 14:51:15,447 T10796 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 14:51:15,454 T10796 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 14:51:15,459 T10796 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 14:51:15,470 T10796 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 180, in PY_GetCipher
    signdata = signdata + "&md5_sign=%s"%md5_sign
            signdata = u'bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053'
                root = {u'TransCode': u'api_acp_single.cgi',
                        u'bank_ins_code': u'26520300',
                        u'bank_name': u'10000',
                        u'business_no': u'444444',
                       ...
                 req = {u'root': {...}}
            sign_md5 = '1895e4e1ec4dac1e6b375308704ad33e'
                jyzd = AttrDict{
                       KEY:'2d3c22048b300db8b347b7024b378053'
                       REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
                       u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
                       ...
NameError: global name 'md5_sign' is not defined

2016-08-23 14:51:15,562 T10796 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 180, in PY_GetCipher\n    signdata =
signdata + "&md5_sign=%s"%md5_sign\n            signdata = u\'bank_ins
_code=26520300&bank_name=10000&business_no=444444&business_type=14900&
card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&t
rue_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053\'\n
root = {u\'TransCode\': u\'api_acp_single.cgi\',\n
u\'bank_ins_code\': u\'26520300\',\n
u\'bank_name\': u\'10000\',\n                        u\'business_no\':
u\'444444\',\n                       ...\n                 req =
{u\'root\': {...}}\n            sign_md5 =
\'1895e4e1ec4dac1e6b375308704ad33e\'\n                jyzd =
AttrDict{\n
KEY:\'2d3c22048b300db8b347b7024b378053\'\n
REQ:{u\'root\': {u\'business_type\': u\'14900\', u\'bank_name\':
u\'10000\',\n                       u\'cre_id\': \'\', u\'cre_type\':
\'\', u\'tran_amt\': u\'10000\', u\'card_prov\':\n
...\nNameError: global name \'md5_sign\' is not defined\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_2': 'jyzd/yymc=[/xesb/req/yymc]', '_1': '0'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:51:15,609 T10796 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 336, in SCNTR_CallSubFlow
    ret = flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 115, in goflow
    curr = curr.go_next( ret )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 66, in go_next
    return self.next[ret][1]
                self = <flow.flow_utils.FlowNode instance at 0x03230300>
                 ret = -1
KeyError: -1

2016-08-23 14:51:15,704 T10796 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x03230300>\n
ret = -1\nKeyError: -1\n'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_2': 'jyzd/yymc=[/xesb/req/yymc]', '_1': '0'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:51:15,749 T10796 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 14:51:15,753 T10796 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 14:51:15,759 T10796 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 14:51:15,763 T10796 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 14:51:15,789 T10796 INFO 报文发往送到GAPS成功
2016-08-23 14:51:15,792 T10796 INFO 
--------------提交缓冲日志 END[2016-08-23 14:51:15.793000]---------------

2016-08-23 14:51:16,279 T12412 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 06:53:17 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 14:51:16,302 T12412 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 14:51:16,305 T12412 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 14:51:16,309 T12412 INFO guocai_txj.py|234|组件[STRAC_Commbuf]执行开始
2016-08-23 14:51:16,318 T12412 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行结束
2016-08-23 14:51:16,322 T12412 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行开始
2016-08-23 14:51:16,332 T12412 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x03230300>\n
ret = -1\nKeyError: -1\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 06:53:17
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:51:16,417 T12412 INFO guocai_txj.py|248|组件[STRAC_XMLTree]执行结束
2016-08-23 14:51:16,423 T12412 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 14:51:16,427 T12412 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 14:51:16,434 T12412 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:51:16,440 T12412 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:51:16,489 T12412 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 14:51:16,490 T12412 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:51:16,496 T12412 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:51:16,500 T12412 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:51:16,552 T12412 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 14:51:16,553 T12412 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:51:16,559 T12412 INFO guocai_txj.py|259|组件[SDATA_MStrCompare]执行开始
2016-08-23 14:51:16,605 T12412 INFO guocai_txj.py|261|执行['remote2local'=='local2remote']
2016-08-23 14:51:16,609 T12412 INFO guocai_txj.py|266|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 14:51:16,615 T12412 INFO guocai_txj.py|303|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 14:51:16,667 T12412 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 14:51:16,677 T12412 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x03230300>\n
ret = -1\nKeyError: -1\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 06:53:17
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:51:16,756 T12412 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 14:51:16,773 T12412 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 14:51:16,776 T12412 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 14:51:16,782 T12412 INFO guocai_txj.py|285|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 14:51:16,789 T12412 INFO guocai_txj.py|286|将commbuf内容转换到字典中
2016-08-23 14:51:16,792 T12412 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 288, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 14:51:16,867 T12412 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 288, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 06:53:17
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:51:16,903 T12412 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 14:51:16,907 T12412 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 14:51:16,914 T12412 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 14:51:16,920 T12412 INFO guocai_txj.py|337|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 14:51:16,926 T12412 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 14:51:16,933 T12412 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 14:51:16,938 T12412 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 14:51:16,963 T12412 INFO 报文发往送到GAPS成功
2016-08-23 14:51:16,967 T12412 INFO 
--------------提交缓冲日志 END[2016-08-23 14:51:16.967000]---------------

2016-08-23 14:51:16,974 T12412 INFO 无数据break
2016-08-23 14:51:16,994 T10796 INFO 无数据break
2016-08-23 14:52:31,503 T228 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 14:52:34,049 T13184 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 14:52:34,089 T13184 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 14:52:34,094 T13184 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 14:52:34,101 T13184 INFO guocai_txj.py|234|组件[STRAC_Commbuf]执行开始
2016-08-23 14:52:34,118 T13184 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行结束
2016-08-23 14:52:34,121 T13184 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行开始
2016-08-23 14:52:34,128 T13184 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:52:34,144 T13184 INFO guocai_txj.py|248|组件[STRAC_XMLTree]执行结束
2016-08-23 14:52:34,151 T13184 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 14:52:34,154 T13184 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 14:52:34,160 T13184 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:52:34,164 T13184 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:52:34,180 T13184 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 14:52:34,183 T13184 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:52:34,188 T13184 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:52:34,190 T13184 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:52:34,203 T13184 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 14:52:34,207 T13184 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:52:34,210 T13184 INFO guocai_txj.py|259|组件[SDATA_MStrCompare]执行开始
2016-08-23 14:52:34,223 T13184 INFO guocai_txj.py|261|执行['local2remote'=='local2remote']
2016-08-23 14:52:34,226 T13184 INFO guocai_txj.py|263|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 14:52:34,233 T13184 INFO guocai_txj.py|303|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 14:52:34,247 T13184 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 14:52:34,253 T13184 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:52:34,299 T13184 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 14:52:34,316 T13184 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 14:52:34,322 T13184 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 14:52:34,332 T13184 INFO guocai_txj.py|285|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 14:52:34,336 T13184 INFO guocai_txj.py|286|将commbuf内容转换到字典中
2016-08-23 14:52:34,339 T13184 INFO guocai_txj.py|290|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 14:52:34,345 T13184 INFO guocai_txj.py|292|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 14:52:34,354 T13184 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行开始
2016-08-23 14:52:34,357 T13184 INFO guocai_txj.py|276|组件[SDATA_MSetValue]执行结束
2016-08-23 14:52:34,362 T13184 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 14:52:34,368 T13184 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 14:52:34,374 T13184 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 14:52:34,380 T13184 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 14:52:34,384 T13184 INFO guocai_txj.py|181|进行MD5运算后sign_md5=1895e4e1ec4dac1e6b375308704ad33e
2016-08-23 14:52:34,421 T13184 INFO guocai_txj.py|186|cipher_data[BIrleuou6v8gHYcRK++75Tp3bYH+PILuAZIf8idAdtUKX4IfF1HSCl85wcGgKVnK+SDaB8gBKCV5VODXObCJZlkn4ilkGV0siA59KcuAopPYdpybYhowVuffKIX4aYBDwk818Hmq4GWaSqPsJx1EEZlxUbr6DRgXJAzPrUQGmTU=Ly1cAyZBKC5vcD1+H+OWNiCdkxT2lkE4l0YZe+pEn575ttHq6Cq7Uzt0pFg04qzyG/MrywysVwaNOJIBTM2mYRlLFm/Qk7K+pk545stgeUARErLSWnr1kFx2BYE7Hj0HEL1wY4/JC9HKo1M17qSRPuGoQzvyrk42xFeGfvqB1jY=ByIghdOtf+J/Advzz+3JbTHaMjIMXFtMAm9U8j5Upm4GE/6HI3eiHWTeclgdtpwkqSMuBq9jusspIBCCeR+FFRlzG28ACQ0nriQrJMZoDbRUwf3ys+TmT7rVTyU1otGEQZ7E5ZgLIxXxK0T/MoSyYPAt58i6J9GedCBv89vEtiE=]
2016-08-23 14:52:34,427 T13184 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 14:52:34,434 T13184 INFO guocai_txj.py|196|组件[PY_MsgAddHead]执行开始
2016-08-23 14:52:34,743 T13184 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 198, in PY_MsgAddHead
    tmpl = Template(filename=os.sep.join([settings.TEMPLATE_DIR,ass( jyzd.input.get('_1') , jyzd )]))
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 75, in ass
    arg = arg.replace('[%s]'%blm,ress)
                name = <_sre.SRE_Pattern object at 0x03255B60>
                   g = ['jyzd/REQ/TransCode']
                   i = 'TransCode'
                ress = None
                jyzd = AttrDict{
                       KEY:'2d3c22048b300db8b347b7024b378053'
                       REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
                       u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
                       ...
                 blm = 'jyzd/REQ/TransCode'
                 arg = 'pkg_guocai_[jyzd/REQ/TransCode]_req'
TypeError: expected a character buffer object

2016-08-23 14:52:34,835 T13184 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 198, in PY_MsgAddHead\n    tmpl =
Template(filename=os.sep.join([settings.TEMPLATE_DIR,ass(
jyzd.input.get(\'_1\') , jyzd )]))\n  File "H:\\share\\work\\\xd2\xf8\
xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\
xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 75, in ass\n    arg
= arg.replace(\'[%s]\'%blm,ress)\n                name =
<_sre.SRE_Pattern object at 0x03255B60>\n                   g =
[\'jyzd/REQ/TransCode\']\n                   i = \'TransCode\'\n
ress = None\n                jyzd = AttrDict{\n
KEY:\'2d3c22048b300db8b347b7024b378053\'\n
REQ:{u\'root\': {u\'business_type\': u\'14900\', u\'bank_name\':
u\'10000\',\n                       u\'cre_id\': \'\', u\'cre_type\':
\'\', u\'tran_amt\': u\'10000\', u\'card_prov\':\n
...\n                 blm = \'jyzd/REQ/TransCode\'\n
arg = \'pkg_guocai_[jyzd/REQ/TransCode]_req\'\nTypeError: expected a
character buffer object\n'
cipher_data:'cipher_data=BIrleuou6v8gHYcRK%2B%2B75Tp3bYH%2BPILuAZIf8idAdtUKX4IfF1H
SCl85wcGgKVnK%2BSDaB8gBKCV5VODXObCJZlkn4ilkGV0siA59KcuAopPYdpybYhowVuf
fKIX4aYBDwk818Hmq4GWaSqPsJx1EEZlxUbr6DRgXJAzPrUQGmTU%3DLy1cAyZBKC5vcD1
%2BH%2BOWNiCdkxT2lkE4l0YZe%2BpEn575ttHq6Cq7Uzt0pFg04qzyG%2FMrywysVwaNO
JIBTM2mYRlLFm%2FQk7K%2Bpk545stgeUARErLSWnr1kFx2BYE7Hj0HEL1wY4%2FJC9HKo
1M17qSRPuGoQzvyrk42xFeGfvqB1jY%3DByIghdOtf%2BJ%2FAdvzz%2B3JbTHaMjIMXFt
MAm9U8j5Upm4GE%2F6HI3eiHWTeclgdtpwkqSMuBq9jusspIBCCeR%2BFFRlzG28ACQ0nr
iQrJMZoDbRUwf3ys%2BTmT7rVTyU1otGEQZ7E5ZgLIxXxK0T%2FMoSyYPAt58i6J9GedCB
v89vEtiE%3D'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'jyzd/req', '_2': 'jyzd/commbuf', '_1':
'pkg_guocai_[jyzd/REQ/TransCode]_req'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:52:34,888 T13184 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 336, in SCNTR_CallSubFlow
    ret = flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 115, in goflow
    curr = curr.go_next( ret )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 66, in go_next
    return self.next[ret][1]
                self = <flow.flow_utils.FlowNode instance at 0x0329A378>
                 ret = -1
KeyError: -1

2016-08-23 14:52:34,970 T13184 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0329A378>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=BIrleuou6v8gHYcRK%2B%2B75Tp3bYH%2BPILuAZIf8idAdtUKX4IfF1H
SCl85wcGgKVnK%2BSDaB8gBKCV5VODXObCJZlkn4ilkGV0siA59KcuAopPYdpybYhowVuf
fKIX4aYBDwk818Hmq4GWaSqPsJx1EEZlxUbr6DRgXJAzPrUQGmTU%3DLy1cAyZBKC5vcD1
%2BH%2BOWNiCdkxT2lkE4l0YZe%2BpEn575ttHq6Cq7Uzt0pFg04qzyG%2FMrywysVwaNO
JIBTM2mYRlLFm%2FQk7K%2Bpk545stgeUARErLSWnr1kFx2BYE7Hj0HEL1wY4%2FJC9HKo
1M17qSRPuGoQzvyrk42xFeGfvqB1jY%3DByIghdOtf%2BJ%2FAdvzz%2B3JbTHaMjIMXFt
MAm9U8j5Upm4GE%2F6HI3eiHWTeclgdtpwkqSMuBq9jusspIBCCeR%2BFFRlzG28ACQ0nr
iQrJMZoDbRUwf3ys%2BTmT7rVTyU1otGEQZ7E5ZgLIxXxK0T%2FMoSyYPAt58i6J9GedCB
v89vEtiE%3D'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'jyzd/req', '_2': 'jyzd/commbuf', '_1':
'pkg_guocai_[jyzd/REQ/TransCode]_req'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:52:35,019 T13184 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 14:52:35,022 T13184 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 14:52:35,026 T13184 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 14:52:35,030 T13184 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 14:52:35,058 T13184 INFO 报文发往送到GAPS成功
2016-08-23 14:52:35,061 T13184 INFO 
--------------提交缓冲日志 END[2016-08-23 14:52:35.061000]---------------

2016-08-23 14:52:35,765 T12632 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 06:54:37 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 14:52:35,801 T12632 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 14:52:35,805 T12632 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 14:52:35,812 T12632 INFO guocai_txj.py|234|组件[STRAC_Commbuf]执行开始
2016-08-23 14:52:35,828 T12632 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行结束
2016-08-23 14:52:35,835 T12632 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行开始
2016-08-23 14:52:35,845 T12632 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0329A378>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=BIrleuou6v8gHYcRK%2B%2B75Tp3bYH%2BPILuAZIf8idAdtUKX4IfF1H
SCl85wcGgKVnK%2BSDaB8gBKCV5VODXObCJZlkn4ilkGV0siA59KcuAopPYdpybYhowVuf
fKIX4aYBDwk818Hmq4GWaSqPsJx1EEZlxUbr6DRgXJAzPrUQGmTU%3DLy1cAyZBKC5vcD1
%2BH%2BOWNiCdkxT2lkE4l0YZe%2BpEn575ttHq6Cq7Uzt0pFg04qzyG%2FMrywysVwaNO
JIBTM2mYRlLFm%2FQk7K%2Bpk545stgeUARErLSWnr1kFx2BYE7Hj0HEL1wY4%2FJC9HKo
1M17qSRPuGoQzvyrk42xFeGfvqB1jY%3DByIghdOtf%2BJ%2FAdvzz%2B3JbTHaMjIMXFt
MAm9U8j5Upm4GE%2F6HI3eiHWTeclgdtpwkqSMuBq9jusspIBCCeR%2BFFRlzG28ACQ0nr
iQrJMZoDbRUwf3ys%2BTmT7rVTyU1otGEQZ7E5ZgLIxXxK0T%2FMoSyYPAt58i6J9GedCB
v89vEtiE%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 06:54:37
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:52:35,953 T12632 INFO guocai_txj.py|248|组件[STRAC_XMLTree]执行结束
2016-08-23 14:52:35,959 T12632 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 14:52:35,963 T12632 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 14:52:35,970 T12632 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:52:35,973 T12632 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:52:36,026 T12632 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 14:52:36,028 T12632 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:52:36,036 T12632 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:52:36,039 T12632 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:52:36,094 T12632 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 14:52:36,098 T12632 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:52:36,102 T12632 INFO guocai_txj.py|259|组件[SDATA_MStrCompare]执行开始
2016-08-23 14:52:36,148 T12632 INFO guocai_txj.py|261|执行['remote2local'=='local2remote']
2016-08-23 14:52:36,151 T12632 INFO guocai_txj.py|266|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 14:52:36,157 T12632 INFO guocai_txj.py|303|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 14:52:36,204 T12632 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 14:52:36,211 T12632 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0329A378>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=BIrleuou6v8gHYcRK%2B%2B75Tp3bYH%2BPILuAZIf8idAdtUKX4IfF1H
SCl85wcGgKVnK%2BSDaB8gBKCV5VODXObCJZlkn4ilkGV0siA59KcuAopPYdpybYhowVuf
fKIX4aYBDwk818Hmq4GWaSqPsJx1EEZlxUbr6DRgXJAzPrUQGmTU%3DLy1cAyZBKC5vcD1
%2BH%2BOWNiCdkxT2lkE4l0YZe%2BpEn575ttHq6Cq7Uzt0pFg04qzyG%2FMrywysVwaNO
JIBTM2mYRlLFm%2FQk7K%2Bpk545stgeUARErLSWnr1kFx2BYE7Hj0HEL1wY4%2FJC9HKo
1M17qSRPuGoQzvyrk42xFeGfvqB1jY%3DByIghdOtf%2BJ%2FAdvzz%2B3JbTHaMjIMXFt
MAm9U8j5Upm4GE%2F6HI3eiHWTeclgdtpwkqSMuBq9jusspIBCCeR%2BFFRlzG28ACQ0nr
iQrJMZoDbRUwf3ys%2BTmT7rVTyU1otGEQZ7E5ZgLIxXxK0T%2FMoSyYPAt58i6J9GedCB
v89vEtiE%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 06:54:37
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:52:36,295 T12632 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 14:52:36,305 T12632 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 14:52:36,309 T12632 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 14:52:36,315 T12632 INFO guocai_txj.py|285|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 14:52:36,319 T12632 INFO guocai_txj.py|286|将commbuf内容转换到字典中
2016-08-23 14:52:36,322 T12632 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 288, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 14:52:36,398 T12632 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 288, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
cipher_data:'cipher_data=BIrleuou6v8gHYcRK%2B%2B75Tp3bYH%2BPILuAZIf8idAdtUKX4IfF1H
SCl85wcGgKVnK%2BSDaB8gBKCV5VODXObCJZlkn4ilkGV0siA59KcuAopPYdpybYhowVuf
fKIX4aYBDwk818Hmq4GWaSqPsJx1EEZlxUbr6DRgXJAzPrUQGmTU%3DLy1cAyZBKC5vcD1
%2BH%2BOWNiCdkxT2lkE4l0YZe%2BpEn575ttHq6Cq7Uzt0pFg04qzyG%2FMrywysVwaNO
JIBTM2mYRlLFm%2FQk7K%2Bpk545stgeUARErLSWnr1kFx2BYE7Hj0HEL1wY4%2FJC9HKo
1M17qSRPuGoQzvyrk42xFeGfvqB1jY%3DByIghdOtf%2BJ%2FAdvzz%2B3JbTHaMjIMXFt
MAm9U8j5Upm4GE%2F6HI3eiHWTeclgdtpwkqSMuBq9jusspIBCCeR%2BFFRlzG28ACQ0nr
iQrJMZoDbRUwf3ys%2BTmT7rVTyU1otGEQZ7E5ZgLIxXxK0T%2FMoSyYPAt58i6J9GedCB
v89vEtiE%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 06:54:37
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:52:36,446 T12632 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 14:52:36,450 T12632 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 14:52:36,456 T12632 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 14:52:36,459 T12632 INFO guocai_txj.py|337|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 14:52:36,463 T12632 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 14:52:36,470 T12632 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 14:52:36,473 T12632 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 14:52:36,493 T12632 INFO 报文发往送到GAPS成功
2016-08-23 14:52:36,496 T12632 INFO 
--------------提交缓冲日志 END[2016-08-23 14:52:36.497000]---------------

2016-08-23 14:52:36,506 T12632 INFO 无数据break
2016-08-23 14:52:36,519 T13184 INFO 无数据break
2016-08-23 14:59:55,980 T11320 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 14:59:59,809 T9332 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 14:59:59,851 T9332 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 14:59:59,854 T9332 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 14:59:59,858 T9332 INFO guocai_txj.py|234|组件[STRAC_Commbuf]执行开始
2016-08-23 14:59:59,862 T9332 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行结束
2016-08-23 14:59:59,867 T9332 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行开始
2016-08-23 14:59:59,872 T9332 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 14:59:59,887 T9332 INFO guocai_txj.py|248|组件[STRAC_XMLTree]执行结束
2016-08-23 14:59:59,894 T9332 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 14:59:59,900 T9332 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 14:59:59,904 T9332 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:59:59,905 T9332 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:59:59,918 T9332 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 14:59:59,921 T9332 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:59:59,927 T9332 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 14:59:59,933 T9332 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 14:59:59,943 T9332 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 14:59:59,946 T9332 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 14:59:59,951 T9332 INFO guocai_txj.py|259|组件[SDATA_MStrCompare]执行开始
2016-08-23 14:59:59,964 T9332 INFO guocai_txj.py|261|执行['local2remote'=='local2remote']
2016-08-23 14:59:59,967 T9332 INFO guocai_txj.py|263|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 14:59:59,976 T9332 INFO guocai_txj.py|303|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 14:59:59,997 T9332 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 15:00:00,005 T9332 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:00:00,049 T9332 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:00:00,062 T9332 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:00:00,065 T9332 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:00:00,072 T9332 INFO guocai_txj.py|285|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:00:00,075 T9332 INFO guocai_txj.py|286|将commbuf内容转换到字典中
2016-08-23 15:00:00,079 T9332 INFO guocai_txj.py|290|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 15:00:00,086 T9332 INFO guocai_txj.py|292|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:00:00,092 T9332 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行开始
2016-08-23 15:00:00,096 T9332 INFO guocai_txj.py|276|组件[SDATA_MSetValue]执行结束
2016-08-23 15:00:00,104 T9332 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:00:00,108 T9332 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 15:00:00,115 T9332 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 15:00:00,121 T9332 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:00:00,128 T9332 INFO guocai_txj.py|181|进行MD5运算后sign_md5=1895e4e1ec4dac1e6b375308704ad33e
2016-08-23 15:00:00,157 T9332 INFO guocai_txj.py|186|cipher_data[WnrADrs2rQGlHbUAJR4gzzLMNp0ks2BVVRHwzJWLWozR4KJi8Z9bx1sK/wJqs1zag550H04xI5DQGNMkqTKY7wtRnBuNfMkhcXacWpxzz6ATYtp+ltRqD7JtbENCHUGWun5rZ5QiOM+L7SysGWEVRP9Ec56zEbtLsS8/Xy4sIyM=NKMbKm35LWWlMVlQ4uJyxF3eTW1F8R51ONycqEV9PL7qYZybqia6b6dbfr+rdlkU8aAkFCYEIcGAkW9jhE1ZvVRR4jGcRVIDnDc2qOn2dHkHIVscu3r8pe4sYdRCKZ27B2MIfTAc91ph7jMDIu7aHCPXo4h+sS7xT/3Muk2/2Fs=C6wxJ+nt6aFF0aZWAteaHJ7yzV2Kbo3HdfJIKdKdsXU64/KykKV30m+UAO/BzvG27MLF7xHEOCW6IZCHLJYOvfWG6UcI4kiD1zwLhFjSjjD8+jIqHN6d2UdtSxf+DVbdkD8jE8nHTfsU2s7afDUhS6v89k7Q85p7Rd25Ret7BHg=]
2016-08-23 15:00:00,165 T9332 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:00:00,173 T9332 INFO guocai_txj.py|196|组件[PY_MsgAddHead]执行开始
2016-08-23 15:00:00,479 T9332 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 198, in PY_MsgAddHead
    tmpl = Template(filename=os.sep.join([settings.TEMPLATE_DIR,ass( jyzd.input.get('_1') , jyzd )]))
  File "C:\Python26\lib\site-packages\mako-1.0.1-py2.6.egg\mako\template.py", line 321, in __init__
    module = self._compile_from_file(path, filename)
  File "C:\Python26\lib\site-packages\mako-1.0.1-py2.6.egg\mako\template.py", line 395, in _compile_from_file
    data = util.read_file(filename)
  File "C:\Python26\lib\site-packages\mako-1.0.1-py2.6.egg\mako\util.py", line 343, in read_file
    fp = open(path, mode)
                path = 'H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\templates\\pkg_guocai_None_req'
                mode = 'rb'
IOError: [Errno 2] No such file or directory: 'H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\templates\\pkg_guocai_None_req'

2016-08-23 15:00:00,573 T9332 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 198, in PY_MsgAddHead\n    tmpl =
Template(filename=os.sep.join([settings.TEMPLATE_DIR,ass(
jyzd.input.get(\'_1\') , jyzd )]))\n  File "C:\\Python26\\lib\\site-
packages\\mako-1.0.1-py2.6.egg\\mako\\template.py", line 321, in
__init__\n    module = self._compile_from_file(path, filename)\n  File
"C:\\Python26\\lib\\site-
packages\\mako-1.0.1-py2.6.egg\\mako\\template.py", line 395, in
_compile_from_file\n    data = util.read_file(filename)\n  File
"C:\\Python26\\lib\\site-
packages\\mako-1.0.1-py2.6.egg\\mako\\util.py", line 343, in
read_file\n    fp = open(path, mode)\n                path = \'H:\\\\s
hare\\\\work\\\\\\xd2\\xf8\\xc1\\xaa\\xc8\\xab\\xc7\\xfe\\xb5\\xc0\\\\
\\xcc\\xec\\xb8\\xb6\\xb1\\xa6\\xcd\\xa8\\xd1\\xb6\\xbb\\xfa\\\\tfb_tx
j\\\\templates\\\\pkg_guocai_None_req\'\n                mode =
\'rb\'\nIOError: [Errno 2] No such file or directory: \'H:\\\\share\\\
\work\\\\\\xd2\\xf8\\xc1\\xaa\\xc8\\xab\\xc7\\xfe\\xb5\\xc0\\\\\\xcc\\
xec\\xb8\\xb6\\xb1\\xa6\\xcd\\xa8\\xd1\\xb6\\xbb\\xfa\\\\tfb_txj\\\\te
mplates\\\\pkg_guocai_None_req\'\n'
cipher_data:'cipher_data=WnrADrs2rQGlHbUAJR4gzzLMNp0ks2BVVRHwzJWLWozR4KJi8Z9bx1sK%
2FwJqs1zag550H04xI5DQGNMkqTKY7wtRnBuNfMkhcXacWpxzz6ATYtp%2BltRqD7JtbEN
CHUGWun5rZ5QiOM%2BL7SysGWEVRP9Ec56zEbtLsS8%2FXy4sIyM%3DNKMbKm35LWWlMVl
Q4uJyxF3eTW1F8R51ONycqEV9PL7qYZybqia6b6dbfr%2BrdlkU8aAkFCYEIcGAkW9jhE1
ZvVRR4jGcRVIDnDc2qOn2dHkHIVscu3r8pe4sYdRCKZ27B2MIfTAc91ph7jMDIu7aHCPXo
4h%2BsS7xT%2F3Muk2%2F2Fs%3DC6wxJ%2Bnt6aFF0aZWAteaHJ7yzV2Kbo3HdfJIKdKds
XU64%2FKykKV30m%2BUAO%2FBzvG27MLF7xHEOCW6IZCHLJYOvfWG6UcI4kiD1zwLhFjSj
jD8%2BjIqHN6d2UdtSxf%2BDVbdkD8jE8nHTfsU2s7afDUhS6v89k7Q85p7Rd25Ret7BHg
%3D'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'jyzd/req', '_2': 'jyzd/commbuf', '_1':
'pkg_guocai_[jyzd/REQ/TransCode]_req'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:00:00,622 T9332 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 336, in SCNTR_CallSubFlow
    ret = flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 115, in goflow
    curr = curr.go_next( ret )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 66, in go_next
    return self.next[ret][1]
                self = <flow.flow_utils.FlowNode instance at 0x0318D8A0>
                 ret = -1
KeyError: -1

2016-08-23 15:00:00,703 T9332 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0318D8A0>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=WnrADrs2rQGlHbUAJR4gzzLMNp0ks2BVVRHwzJWLWozR4KJi8Z9bx1sK%
2FwJqs1zag550H04xI5DQGNMkqTKY7wtRnBuNfMkhcXacWpxzz6ATYtp%2BltRqD7JtbEN
CHUGWun5rZ5QiOM%2BL7SysGWEVRP9Ec56zEbtLsS8%2FXy4sIyM%3DNKMbKm35LWWlMVl
Q4uJyxF3eTW1F8R51ONycqEV9PL7qYZybqia6b6dbfr%2BrdlkU8aAkFCYEIcGAkW9jhE1
ZvVRR4jGcRVIDnDc2qOn2dHkHIVscu3r8pe4sYdRCKZ27B2MIfTAc91ph7jMDIu7aHCPXo
4h%2BsS7xT%2F3Muk2%2F2Fs%3DC6wxJ%2Bnt6aFF0aZWAteaHJ7yzV2Kbo3HdfJIKdKds
XU64%2FKykKV30m%2BUAO%2FBzvG27MLF7xHEOCW6IZCHLJYOvfWG6UcI4kiD1zwLhFjSj
jD8%2BjIqHN6d2UdtSxf%2BDVbdkD8jE8nHTfsU2s7afDUhS6v89k7Q85p7Rd25Ret7BHg
%3D'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'jyzd/req', '_2': 'jyzd/commbuf', '_1':
'pkg_guocai_[jyzd/REQ/TransCode]_req'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:00:00,746 T9332 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:00:00,750 T9332 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:00:00,755 T9332 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:00:00,760 T9332 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 15:00:00,780 T9332 INFO 报文发往送到GAPS成功
2016-08-23 15:00:00,782 T9332 INFO 
--------------提交缓冲日志 END[2016-08-23 15:00:00.783000]---------------

2016-08-23 15:00:01,151 T12556 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 07:02:02 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 15:00:01,213 T12556 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:00:01,220 T12556 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:00:01,236 T12556 INFO guocai_txj.py|234|组件[STRAC_Commbuf]执行开始
2016-08-23 15:00:01,247 T12556 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行结束
2016-08-23 15:00:01,256 T12556 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行开始
2016-08-23 15:00:01,265 T12556 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0318D8A0>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=WnrADrs2rQGlHbUAJR4gzzLMNp0ks2BVVRHwzJWLWozR4KJi8Z9bx1sK%
2FwJqs1zag550H04xI5DQGNMkqTKY7wtRnBuNfMkhcXacWpxzz6ATYtp%2BltRqD7JtbEN
CHUGWun5rZ5QiOM%2BL7SysGWEVRP9Ec56zEbtLsS8%2FXy4sIyM%3DNKMbKm35LWWlMVl
Q4uJyxF3eTW1F8R51ONycqEV9PL7qYZybqia6b6dbfr%2BrdlkU8aAkFCYEIcGAkW9jhE1
ZvVRR4jGcRVIDnDc2qOn2dHkHIVscu3r8pe4sYdRCKZ27B2MIfTAc91ph7jMDIu7aHCPXo
4h%2BsS7xT%2F3Muk2%2F2Fs%3DC6wxJ%2Bnt6aFF0aZWAteaHJ7yzV2Kbo3HdfJIKdKds
XU64%2FKykKV30m%2BUAO%2FBzvG27MLF7xHEOCW6IZCHLJYOvfWG6UcI4kiD1zwLhFjSj
jD8%2BjIqHN6d2UdtSxf%2BDVbdkD8jE8nHTfsU2s7afDUhS6v89k7Q85p7Rd25Ret7BHg
%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:02:02
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:00:01,367 T12556 INFO guocai_txj.py|248|组件[STRAC_XMLTree]执行结束
2016-08-23 15:00:01,375 T12556 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:00:01,380 T12556 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:00:01,385 T12556 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:00:01,388 T12556 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:00:01,447 T12556 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:00:01,451 T12556 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:00:01,457 T12556 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:00:01,460 T12556 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:00:01,510 T12556 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:00:01,516 T12556 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:00:01,520 T12556 INFO guocai_txj.py|259|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:00:01,581 T12556 INFO guocai_txj.py|261|执行['remote2local'=='local2remote']
2016-08-23 15:00:01,584 T12556 INFO guocai_txj.py|266|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:00:01,594 T12556 INFO guocai_txj.py|303|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:00:01,650 T12556 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:00:01,657 T12556 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0318D8A0>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=WnrADrs2rQGlHbUAJR4gzzLMNp0ks2BVVRHwzJWLWozR4KJi8Z9bx1sK%
2FwJqs1zag550H04xI5DQGNMkqTKY7wtRnBuNfMkhcXacWpxzz6ATYtp%2BltRqD7JtbEN
CHUGWun5rZ5QiOM%2BL7SysGWEVRP9Ec56zEbtLsS8%2FXy4sIyM%3DNKMbKm35LWWlMVl
Q4uJyxF3eTW1F8R51ONycqEV9PL7qYZybqia6b6dbfr%2BrdlkU8aAkFCYEIcGAkW9jhE1
ZvVRR4jGcRVIDnDc2qOn2dHkHIVscu3r8pe4sYdRCKZ27B2MIfTAc91ph7jMDIu7aHCPXo
4h%2BsS7xT%2F3Muk2%2F2Fs%3DC6wxJ%2Bnt6aFF0aZWAteaHJ7yzV2Kbo3HdfJIKdKds
XU64%2FKykKV30m%2BUAO%2FBzvG27MLF7xHEOCW6IZCHLJYOvfWG6UcI4kiD1zwLhFjSj
jD8%2BjIqHN6d2UdtSxf%2BDVbdkD8jE8nHTfsU2s7afDUhS6v89k7Q85p7Rd25Ret7BHg
%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:02:02
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:00:01,739 T12556 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:00:01,750 T12556 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:00:01,756 T12556 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:00:01,760 T12556 INFO guocai_txj.py|285|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:00:01,765 T12556 INFO guocai_txj.py|286|将commbuf内容转换到字典中
2016-08-23 15:00:01,770 T12556 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 288, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 15:00:01,851 T12556 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 288, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
cipher_data:'cipher_data=WnrADrs2rQGlHbUAJR4gzzLMNp0ks2BVVRHwzJWLWozR4KJi8Z9bx1sK%
2FwJqs1zag550H04xI5DQGNMkqTKY7wtRnBuNfMkhcXacWpxzz6ATYtp%2BltRqD7JtbEN
CHUGWun5rZ5QiOM%2BL7SysGWEVRP9Ec56zEbtLsS8%2FXy4sIyM%3DNKMbKm35LWWlMVl
Q4uJyxF3eTW1F8R51ONycqEV9PL7qYZybqia6b6dbfr%2BrdlkU8aAkFCYEIcGAkW9jhE1
ZvVRR4jGcRVIDnDc2qOn2dHkHIVscu3r8pe4sYdRCKZ27B2MIfTAc91ph7jMDIu7aHCPXo
4h%2BsS7xT%2F3Muk2%2F2Fs%3DC6wxJ%2Bnt6aFF0aZWAteaHJ7yzV2Kbo3HdfJIKdKds
XU64%2FKykKV30m%2BUAO%2FBzvG27MLF7xHEOCW6IZCHLJYOvfWG6UcI4kiD1zwLhFjSj
jD8%2BjIqHN6d2UdtSxf%2BDVbdkD8jE8nHTfsU2s7afDUhS6v89k7Q85p7Rd25Ret7BHg
%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:02:02
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:00:01,894 T12556 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:00:01,898 T12556 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:00:01,904 T12556 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:00:01,907 T12556 INFO guocai_txj.py|337|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:00:01,914 T12556 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:00:01,921 T12556 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:00:01,924 T12556 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 15:00:01,948 T12556 INFO 报文发往送到GAPS成功
2016-08-23 15:00:01,950 T12556 INFO 
--------------提交缓冲日志 END[2016-08-23 15:00:01.951000]---------------

2016-08-23 15:00:01,960 T12556 INFO 无数据break
2016-08-23 15:00:01,973 T9332 INFO 无数据break
2016-08-23 15:11:13,286 T3408 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 15:11:16,599 T12832 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 15:11:16,635 T12832 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:11:16,641 T12832 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:11:16,648 T12832 INFO guocai_txj.py|234|组件[STRAC_Commbuf]执行开始
2016-08-23 15:11:16,654 T12832 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行结束
2016-08-23 15:11:16,657 T12832 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行开始
2016-08-23 15:11:16,663 T12832 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:11:16,674 T12832 INFO guocai_txj.py|248|组件[STRAC_XMLTree]执行结束
2016-08-23 15:11:16,683 T12832 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:11:16,684 T12832 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:11:16,687 T12832 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:11:16,690 T12832 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:11:16,701 T12832 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:11:16,703 T12832 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:11:16,713 T12832 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:11:16,714 T12832 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:11:16,723 T12832 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:11:16,726 T12832 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:11:16,733 T12832 INFO guocai_txj.py|259|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:11:16,743 T12832 INFO guocai_txj.py|261|执行['local2remote'=='local2remote']
2016-08-23 15:11:16,746 T12832 INFO guocai_txj.py|263|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 15:11:16,753 T12832 INFO guocai_txj.py|303|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:11:16,769 T12832 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 15:11:16,775 T12832 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:11:16,822 T12832 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:11:16,835 T12832 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:11:16,839 T12832 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:11:16,845 T12832 INFO guocai_txj.py|285|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:11:16,848 T12832 INFO guocai_txj.py|286|将commbuf内容转换到字典中
2016-08-23 15:11:16,852 T12832 INFO guocai_txj.py|290|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 15:11:16,861 T12832 INFO guocai_txj.py|292|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:11:16,869 T12832 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行开始
2016-08-23 15:11:16,874 T12832 INFO guocai_txj.py|276|组件[SDATA_MSetValue]执行结束
2016-08-23 15:11:16,881 T12832 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:11:16,884 T12832 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 15:11:16,891 T12832 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 15:11:16,901 T12832 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:11:16,907 T12832 INFO guocai_txj.py|181|进行MD5运算后sign_md5=1895e4e1ec4dac1e6b375308704ad33e
2016-08-23 15:11:16,934 T12832 INFO guocai_txj.py|186|cipher_data[HFFcbVVDF20ndpQ+5iCd/XXOJk4hbwdgwDu199Ieu+HMZclZHWTVK9nmlAIL5fn5N+h2qYllkYlJdt0JYu7QPK3Mm6jQ8UhlRnOPZNpgGLdsoILINi0Ns6HABIkwcfGJYrduGVzIerlyWxejFbBRa2suTIEdkKF5J+oJNyK5sSI=lfNn7x29xON7J89ZcImgbrT3vbbjtG+zE9h1vKyaJT5ynZWXJ5sAuS4cCQdu8oY9RjZYkd270eJeNUC9MFmDXackAzrAHv1t+/8U3XlYZJVDjmcO2xzGYQ3xf+JTo796EnP/R9kRhHqXfBWCEIML6dnMB+yHk76KvWUiG881bhk=Mc5MjTKkwbiIXBPw+G10NsPBKSXY56CrLM+QmUDrMDFJz4t6ayJNH/Pa/Ynab31hMQmfNGU17ZX1sJIV4mKsp7SiZ+1fjsbCYgqSACKEXBJLp+1YGG8IBUJ/mqvZDqnVxzFn95PPa5JyOpi+HKNsoZ/NXw1U6Y3xNhPn2/mxbmo=]
2016-08-23 15:11:16,940 T12832 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:11:16,947 T12832 INFO guocai_txj.py|196|组件[PY_MsgAddHead]执行开始
2016-08-23 15:11:17,302 T12832 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 198, in PY_MsgAddHead
    tmpl = Template(filename=os.sep.join([settings.TEMPLATE_DIR,ass( jyzd.input.get('_1') , jyzd )]))
                jyzd = AttrDict{
                       KEY:'2d3c22048b300db8b347b7024b378053'
                       REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
                       u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
                       ...
            Template = <class 'mako.template.Template'>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xd2 in position 14: ordinal not in range(128)

2016-08-23 15:11:17,391 T12832 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 198, in PY_MsgAddHead\n    tmpl =
Template(filename=os.sep.join([settings.TEMPLATE_DIR,ass(
jyzd.input.get(\'_1\') , jyzd )]))\n                jyzd = AttrDict{\n
KEY:\'2d3c22048b300db8b347b7024b378053\'\n
REQ:{u\'root\': {u\'business_type\': u\'14900\', u\'bank_name\':
u\'10000\',\n                       u\'cre_id\': \'\', u\'cre_type\':
\'\', u\'tran_amt\': u\'10000\', u\'card_prov\':\n
...\n            Template = <class
\'mako.template.Template\'>\nUnicodeDecodeError: \'ascii\' codec
can\'t decode byte 0xd2 in position 14: ordinal not in range(128)\n'
cipher_data:'cipher_data=HFFcbVVDF20ndpQ%2B5iCd%2FXXOJk4hbwdgwDu199Ieu%2BHMZclZHWT
VK9nmlAIL5fn5N%2Bh2qYllkYlJdt0JYu7QPK3Mm6jQ8UhlRnOPZNpgGLdsoILINi0Ns6H
ABIkwcfGJYrduGVzIerlyWxejFbBRa2suTIEdkKF5J%2BoJNyK5sSI%3DlfNn7x29xON7J
89ZcImgbrT3vbbjtG%2BzE9h1vKyaJT5ynZWXJ5sAuS4cCQdu8oY9RjZYkd270eJeNUC9M
FmDXackAzrAHv1t%2B%2F8U3XlYZJVDjmcO2xzGYQ3xf%2BJTo796EnP%2FR9kRhHqXfBW
CEIML6dnMB%2ByHk76KvWUiG881bhk%3DMc5MjTKkwbiIXBPw%2BG10NsPBKSXY56CrLM%
2BQmUDrMDFJz4t6ayJNH%2FPa%2FYnab31hMQmfNGU17ZX1sJIV4mKsp7SiZ%2B1fjsbCY
gqSACKEXBJLp%2B1YGG8IBUJ%2FmqvZDqnVxzFn95PPa5JyOpi%2BHKNsoZ%2FNXw1U6Y3
xNhPn2%2Fmxbmo%3D'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'jyzd/req', '_2': 'jyzd/commbuf', '_1':
'pkg_guocai_[jyzd/REQ/root/TransCode]_req'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:11:17,433 T12832 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 336, in SCNTR_CallSubFlow
    ret = flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 115, in goflow
    curr = curr.go_next( ret )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 66, in go_next
    return self.next[ret][1]
                self = <flow.flow_utils.FlowNode instance at 0x034278A0>
                 ret = -1
KeyError: -1

2016-08-23 15:11:17,513 T12832 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x034278A0>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=HFFcbVVDF20ndpQ%2B5iCd%2FXXOJk4hbwdgwDu199Ieu%2BHMZclZHWT
VK9nmlAIL5fn5N%2Bh2qYllkYlJdt0JYu7QPK3Mm6jQ8UhlRnOPZNpgGLdsoILINi0Ns6H
ABIkwcfGJYrduGVzIerlyWxejFbBRa2suTIEdkKF5J%2BoJNyK5sSI%3DlfNn7x29xON7J
89ZcImgbrT3vbbjtG%2BzE9h1vKyaJT5ynZWXJ5sAuS4cCQdu8oY9RjZYkd270eJeNUC9M
FmDXackAzrAHv1t%2B%2F8U3XlYZJVDjmcO2xzGYQ3xf%2BJTo796EnP%2FR9kRhHqXfBW
CEIML6dnMB%2ByHk76KvWUiG881bhk%3DMc5MjTKkwbiIXBPw%2BG10NsPBKSXY56CrLM%
2BQmUDrMDFJz4t6ayJNH%2FPa%2FYnab31hMQmfNGU17ZX1sJIV4mKsp7SiZ%2B1fjsbCY
gqSACKEXBJLp%2B1YGG8IBUJ%2FmqvZDqnVxzFn95PPa5JyOpi%2BHKNsoZ%2FNXw1U6Y3
xNhPn2%2Fmxbmo%3D'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'jyzd/req', '_2': 'jyzd/commbuf', '_1':
'pkg_guocai_[jyzd/REQ/root/TransCode]_req'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:11:17,555 T12832 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:11:17,558 T12832 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:11:17,562 T12832 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:11:17,566 T12832 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 15:11:17,589 T12832 INFO 报文发往送到GAPS成功
2016-08-23 15:11:17,592 T12832 INFO 
--------------提交缓冲日志 END[2016-08-23 15:11:17.592000]---------------

2016-08-23 15:11:18,377 T13224 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 07:13:19 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 15:11:18,415 T13224 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:11:18,420 T13224 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:11:18,428 T13224 INFO guocai_txj.py|234|组件[STRAC_Commbuf]执行开始
2016-08-23 15:11:18,434 T13224 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行结束
2016-08-23 15:11:18,443 T13224 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行开始
2016-08-23 15:11:18,450 T13224 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x034278A0>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=HFFcbVVDF20ndpQ%2B5iCd%2FXXOJk4hbwdgwDu199Ieu%2BHMZclZHWT
VK9nmlAIL5fn5N%2Bh2qYllkYlJdt0JYu7QPK3Mm6jQ8UhlRnOPZNpgGLdsoILINi0Ns6H
ABIkwcfGJYrduGVzIerlyWxejFbBRa2suTIEdkKF5J%2BoJNyK5sSI%3DlfNn7x29xON7J
89ZcImgbrT3vbbjtG%2BzE9h1vKyaJT5ynZWXJ5sAuS4cCQdu8oY9RjZYkd270eJeNUC9M
FmDXackAzrAHv1t%2B%2F8U3XlYZJVDjmcO2xzGYQ3xf%2BJTo796EnP%2FR9kRhHqXfBW
CEIML6dnMB%2ByHk76KvWUiG881bhk%3DMc5MjTKkwbiIXBPw%2BG10NsPBKSXY56CrLM%
2BQmUDrMDFJz4t6ayJNH%2FPa%2FYnab31hMQmfNGU17ZX1sJIV4mKsp7SiZ%2B1fjsbCY
gqSACKEXBJLp%2B1YGG8IBUJ%2FmqvZDqnVxzFn95PPa5JyOpi%2BHKNsoZ%2FNXw1U6Y3
xNhPn2%2Fmxbmo%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:13:19
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:11:18,543 T13224 INFO guocai_txj.py|248|组件[STRAC_XMLTree]执行结束
2016-08-23 15:11:18,552 T13224 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:11:18,555 T13224 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:11:18,561 T13224 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:11:18,565 T13224 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:11:18,624 T13224 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:11:18,627 T13224 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:11:18,634 T13224 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:11:18,638 T13224 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:11:18,697 T13224 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:11:18,700 T13224 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:11:18,709 T13224 INFO guocai_txj.py|259|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:11:18,760 T13224 INFO guocai_txj.py|261|执行['remote2local'=='local2remote']
2016-08-23 15:11:18,763 T13224 INFO guocai_txj.py|266|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:11:18,775 T13224 INFO guocai_txj.py|303|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:11:18,838 T13224 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:11:18,844 T13224 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 336, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x034278A0>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=HFFcbVVDF20ndpQ%2B5iCd%2FXXOJk4hbwdgwDu199Ieu%2BHMZclZHWT
VK9nmlAIL5fn5N%2Bh2qYllkYlJdt0JYu7QPK3Mm6jQ8UhlRnOPZNpgGLdsoILINi0Ns6H
ABIkwcfGJYrduGVzIerlyWxejFbBRa2suTIEdkKF5J%2BoJNyK5sSI%3DlfNn7x29xON7J
89ZcImgbrT3vbbjtG%2BzE9h1vKyaJT5ynZWXJ5sAuS4cCQdu8oY9RjZYkd270eJeNUC9M
FmDXackAzrAHv1t%2B%2F8U3XlYZJVDjmcO2xzGYQ3xf%2BJTo796EnP%2FR9kRhHqXfBW
CEIML6dnMB%2ByHk76KvWUiG881bhk%3DMc5MjTKkwbiIXBPw%2BG10NsPBKSXY56CrLM%
2BQmUDrMDFJz4t6ayJNH%2FPa%2FYnab31hMQmfNGU17ZX1sJIV4mKsp7SiZ%2B1fjsbCY
gqSACKEXBJLp%2B1YGG8IBUJ%2FmqvZDqnVxzFn95PPa5JyOpi%2BHKNsoZ%2FNXw1U6Y3
xNhPn2%2Fmxbmo%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:13:19
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:11:18,947 T13224 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:11:18,961 T13224 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:11:18,966 T13224 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:11:18,973 T13224 INFO guocai_txj.py|285|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:11:18,977 T13224 INFO guocai_txj.py|286|将commbuf内容转换到字典中
2016-08-23 15:11:18,980 T13224 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 288, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 15:11:19,065 T13224 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 288, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
cipher_data:'cipher_data=HFFcbVVDF20ndpQ%2B5iCd%2FXXOJk4hbwdgwDu199Ieu%2BHMZclZHWT
VK9nmlAIL5fn5N%2Bh2qYllkYlJdt0JYu7QPK3Mm6jQ8UhlRnOPZNpgGLdsoILINi0Ns6H
ABIkwcfGJYrduGVzIerlyWxejFbBRa2suTIEdkKF5J%2BoJNyK5sSI%3DlfNn7x29xON7J
89ZcImgbrT3vbbjtG%2BzE9h1vKyaJT5ynZWXJ5sAuS4cCQdu8oY9RjZYkd270eJeNUC9M
FmDXackAzrAHv1t%2B%2F8U3XlYZJVDjmcO2xzGYQ3xf%2BJTo796EnP%2FR9kRhHqXfBW
CEIML6dnMB%2ByHk76KvWUiG881bhk%3DMc5MjTKkwbiIXBPw%2BG10NsPBKSXY56CrLM%
2BQmUDrMDFJz4t6ayJNH%2FPa%2FYnab31hMQmfNGU17ZX1sJIV4mKsp7SiZ%2B1fjsbCY
gqSACKEXBJLp%2B1YGG8IBUJ%2FmqvZDqnVxzFn95PPa5JyOpi%2BHKNsoZ%2FNXw1U6Y3
xNhPn2%2Fmxbmo%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:13:19
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:11:19,112 T13224 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:11:19,115 T13224 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:11:19,121 T13224 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:11:19,124 T13224 INFO guocai_txj.py|337|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:11:19,130 T13224 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:11:19,134 T13224 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:11:19,138 T13224 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 15:11:19,161 T13224 INFO 报文发往送到GAPS成功
2016-08-23 15:11:19,164 T13224 INFO 
--------------提交缓冲日志 END[2016-08-23 15:11:19.165000]---------------

2016-08-23 15:11:19,173 T13224 INFO 无数据break
2016-08-23 15:11:19,187 T12832 INFO 无数据break
2016-08-23 15:16:00,772 T480 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 15:16:03,413 T12088 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 15:16:03,451 T12088 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:16:03,456 T12088 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:16:03,466 T12088 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行开始
2016-08-23 15:16:03,476 T12088 INFO guocai_txj.py|240|组件[STRAC_Commbuf]执行结束
2016-08-23 15:16:03,480 T12088 INFO guocai_txj.py|249|组件[STRAC_XMLTree]执行开始
2016-08-23 15:16:03,483 T12088 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:16:03,496 T12088 INFO guocai_txj.py|251|组件[STRAC_XMLTree]执行结束
2016-08-23 15:16:03,505 T12088 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:16:03,506 T12088 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:16:03,509 T12088 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:16:03,512 T12088 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:16:03,520 T12088 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:16:03,523 T12088 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:16:03,533 T12088 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:16:03,536 T12088 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:16:03,543 T12088 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:16:03,546 T12088 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:16:03,552 T12088 INFO guocai_txj.py|262|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:16:03,559 T12088 INFO guocai_txj.py|264|执行['local2remote'=='local2remote']
2016-08-23 15:16:03,562 T12088 INFO guocai_txj.py|266|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 15:16:03,569 T12088 INFO guocai_txj.py|306|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:16:03,588 T12088 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 15:16:03,592 T12088 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:16:03,638 T12088 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:16:03,651 T12088 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:16:03,654 T12088 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:16:03,661 T12088 INFO guocai_txj.py|288|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:16:03,664 T12088 INFO guocai_txj.py|289|将commbuf内容转换到字典中
2016-08-23 15:16:03,668 T12088 INFO guocai_txj.py|293|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 15:16:03,674 T12088 INFO guocai_txj.py|295|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:16:03,680 T12088 INFO guocai_txj.py|278|组件[SDATA_MSetValue]执行开始
2016-08-23 15:16:03,686 T12088 INFO guocai_txj.py|279|组件[SDATA_MSetValue]执行结束
2016-08-23 15:16:03,693 T12088 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:16:03,696 T12088 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 15:16:03,703 T12088 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 15:16:03,710 T12088 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:16:03,714 T12088 INFO guocai_txj.py|181|进行MD5运算后sign_md5=1895e4e1ec4dac1e6b375308704ad33e
2016-08-23 15:16:03,743 T12088 INFO guocai_txj.py|186|cipher_data[VS1bL5supbza8MevwTZxuCSfh12oaHo5ZIGeaN8nkMZEKFVzzTiX1tJIUlxdov1C23DUa4SXsqXdszdqpyeJpyrOUgjXoNtnLGDN1k78JE4VZjUKZVtVLX68+259PdAketSAqYsq/U3ImgX6RFkVzRJRYWuD2Tg1LoqCswMfJ0U=YV7gFc9afkGE0i3/evlpKBkA9Kt1haVGYpraCEqsUh7h7R4RVJMJnhoiUmU4uV/9nfKBrY/SD6DbnRmYb0+s/qXMiPCyagp9aI8OvMhbPOq9WBo3OM5PGUQyytxOfwseCUYnxwDfMix2we/Bq8LNGbVlDJ1MRTcS5sTu/NQUTJY=QpqDGbVo6ocetorn9f5NNRAHLpNlaVk7+JOgM1MVpaG69kxyvtFinUvMY/eXgyEd4nwKsgRCh775+rCRLxpYX9/ZwYacmpsGXX4E+K00/eLDa4PHssTW+NI6A6vDL6d+2ZXas5/GR/17HjfyN0GOYJw1PhNdfkBx/JQNwTGQ24A=]
2016-08-23 15:16:03,749 T12088 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:16:03,755 T12088 INFO guocai_txj.py|196|组件[PY_MsgAddHead]执行开始
2016-08-23 15:16:04,026 T12088 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 199, in PY_MsgAddHead
    tmpl = Template(filename='../templates/pkg_guocai_api_acp_single.cgi_req')
  File "C:\Python26\lib\site-packages\mako-1.0.1-py2.6.egg\mako\template.py", line 266, in __init__
    "of the root path." % self.uri)
          cache_type = None
             imports = None
                 uri = None
       error_handler = None
         enable_loop = True
          cache_args = None
                self = <mako.template.Template object at 0x0317EB30>
   format_exceptions = False
    strict_undefined = False
            filename = '../templates/pkg_guocai_api_acp_single.cgi_req'
      buffer_filters = ()
                text = None
              lookup = None
     default_filters = None
      future_imports = None
     module_filename = None
      input_encoding = None
     encoding_errors = 'strict'
bytestring_passthrough = False
          cache_impl = 'beaker'
           lexer_cls = None
           cache_dir = None
        preprocessor = None
    module_directory = None
                path = '../templates/pkg_guocai_api_acp_single.cgi_req'
           cache_url = None
     output_encoding = None
     disable_unicode = False
               drive = ''
       cache_enabled = True
       module_writer = None
              u_norm = '..\\templates\\pkg_guocai_api_acp_single.cgi_req'
TemplateLookupException: Template uri "../templates/pkg_guocai_api_acp_single.cgi_req" is invalid - it cannot be relative outside of the root path.

2016-08-23 15:16:04,148 T12088 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 199, in PY_MsgAddHead\n    tmpl = Templat
e(filename=\'../templates/pkg_guocai_api_acp_single.cgi_req\')\n  File
"C:\\Python26\\lib\\site-
packages\\mako-1.0.1-py2.6.egg\\mako\\template.py", line 266, in
__init__\n    "of the root path." % self.uri)\n          cache_type =
None\n             imports = None\n                 uri = None\n
error_handler = None\n         enable_loop = True\n
cache_args = None\n                self = <mako.template.Template
object at 0x0317EB30>\n   format_exceptions = False\n
strict_undefined = False\n            filename =
\'../templates/pkg_guocai_api_acp_single.cgi_req\'\n
buffer_filters = ()\n                text = None\n              lookup
= None\n     default_filters = None\n      future_imports = None\n
module_filename = None\n      input_encoding = None\n
encoding_errors = \'strict\'\nbytestring_passthrough = False\n
cache_impl = \'beaker\'\n           lexer_cls = None\n
cache_dir = None\n        preprocessor = None\n    module_directory =
None\n                path =
\'../templates/pkg_guocai_api_acp_single.cgi_req\'\n
cache_url = None\n     output_encoding = None\n     disable_unicode =
False\n               drive = \'\'\n       cache_enabled = True\n
module_writer = None\n              u_norm = \'..\\\\templates\\\\pkg_
guocai_api_acp_single.cgi_req\'\nTemplateLookupException: Template uri
"../templates/pkg_guocai_api_acp_single.cgi_req" is invalid - it
cannot be relative outside of the root path.\n'
cipher_data:'cipher_data=VS1bL5supbza8MevwTZxuCSfh12oaHo5ZIGeaN8nkMZEKFVzzTiX1tJIU
lxdov1C23DUa4SXsqXdszdqpyeJpyrOUgjXoNtnLGDN1k78JE4VZjUKZVtVLX68%2B259P
dAketSAqYsq%2FU3ImgX6RFkVzRJRYWuD2Tg1LoqCswMfJ0U%3DYV7gFc9afkGE0i3%2Fe
vlpKBkA9Kt1haVGYpraCEqsUh7h7R4RVJMJnhoiUmU4uV%2F9nfKBrY%2FSD6DbnRmYb0%
2Bs%2FqXMiPCyagp9aI8OvMhbPOq9WBo3OM5PGUQyytxOfwseCUYnxwDfMix2we%2FBq8L
NGbVlDJ1MRTcS5sTu%2FNQUTJY%3DQpqDGbVo6ocetorn9f5NNRAHLpNlaVk7%2BJOgM1M
VpaG69kxyvtFinUvMY%2FeXgyEd4nwKsgRCh775%2BrCRLxpYX9%2FZwYacmpsGXX4E%2B
K00%2FeLDa4PHssTW%2BNI6A6vDL6d%2B2ZXas5%2FGR%2F17HjfyN0GOYJw1PhNdfkBx%
2FJQNwTGQ24A%3D'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'jyzd/req', '_2': 'jyzd/commbuf', '_1':
'pkg_guocai_[jyzd/REQ/root/TransCode]_req'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:16:04,198 T12088 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 339, in SCNTR_CallSubFlow
    ret = flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 115, in goflow
    curr = curr.go_next( ret )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 66, in go_next
    return self.next[ret][1]
                self = <flow.flow_utils.FlowNode instance at 0x0316E3A0>
                 ret = -1
KeyError: -1

2016-08-23 15:16:04,282 T12088 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 339, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0316E3A0>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=VS1bL5supbza8MevwTZxuCSfh12oaHo5ZIGeaN8nkMZEKFVzzTiX1tJIU
lxdov1C23DUa4SXsqXdszdqpyeJpyrOUgjXoNtnLGDN1k78JE4VZjUKZVtVLX68%2B259P
dAketSAqYsq%2FU3ImgX6RFkVzRJRYWuD2Tg1LoqCswMfJ0U%3DYV7gFc9afkGE0i3%2Fe
vlpKBkA9Kt1haVGYpraCEqsUh7h7R4RVJMJnhoiUmU4uV%2F9nfKBrY%2FSD6DbnRmYb0%
2Bs%2FqXMiPCyagp9aI8OvMhbPOq9WBo3OM5PGUQyytxOfwseCUYnxwDfMix2we%2FBq8L
NGbVlDJ1MRTcS5sTu%2FNQUTJY%3DQpqDGbVo6ocetorn9f5NNRAHLpNlaVk7%2BJOgM1M
VpaG69kxyvtFinUvMY%2FeXgyEd4nwKsgRCh775%2BrCRLxpYX9%2FZwYacmpsGXX4E%2B
K00%2FeLDa4PHssTW%2BNI6A6vDL6d%2B2ZXas5%2FGR%2F17HjfyN0GOYJw1PhNdfkBx%
2FJQNwTGQ24A%3D'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'jyzd/req', '_2': 'jyzd/commbuf', '_1':
'pkg_guocai_[jyzd/REQ/root/TransCode]_req'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:16:04,326 T12088 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:16:04,331 T12088 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:16:04,335 T12088 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:16:04,338 T12088 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 15:16:04,361 T12088 INFO 报文发往送到GAPS成功
2016-08-23 15:16:04,364 T12088 INFO 
--------------提交缓冲日志 END[2016-08-23 15:16:04.364000]---------------

2016-08-23 15:16:04,453 T13060 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 07:18:06 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 15:16:04,480 T13060 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:16:04,486 T13060 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:16:04,493 T13060 INFO guocai_txj.py|237|组件[STRAC_Commbuf]执行开始
2016-08-23 15:16:04,500 T13060 INFO guocai_txj.py|240|组件[STRAC_Commbuf]执行结束
2016-08-23 15:16:04,509 T13060 INFO guocai_txj.py|249|组件[STRAC_XMLTree]执行开始
2016-08-23 15:16:04,519 T13060 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 339, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0316E3A0>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=VS1bL5supbza8MevwTZxuCSfh12oaHo5ZIGeaN8nkMZEKFVzzTiX1tJIU
lxdov1C23DUa4SXsqXdszdqpyeJpyrOUgjXoNtnLGDN1k78JE4VZjUKZVtVLX68%2B259P
dAketSAqYsq%2FU3ImgX6RFkVzRJRYWuD2Tg1LoqCswMfJ0U%3DYV7gFc9afkGE0i3%2Fe
vlpKBkA9Kt1haVGYpraCEqsUh7h7R4RVJMJnhoiUmU4uV%2F9nfKBrY%2FSD6DbnRmYb0%
2Bs%2FqXMiPCyagp9aI8OvMhbPOq9WBo3OM5PGUQyytxOfwseCUYnxwDfMix2we%2FBq8L
NGbVlDJ1MRTcS5sTu%2FNQUTJY%3DQpqDGbVo6ocetorn9f5NNRAHLpNlaVk7%2BJOgM1M
VpaG69kxyvtFinUvMY%2FeXgyEd4nwKsgRCh775%2BrCRLxpYX9%2FZwYacmpsGXX4E%2B
K00%2FeLDa4PHssTW%2BNI6A6vDL6d%2B2ZXas5%2FGR%2F17HjfyN0GOYJw1PhNdfkBx%
2FJQNwTGQ24A%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:18:06
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:16:04,617 T13060 INFO guocai_txj.py|251|组件[STRAC_XMLTree]执行结束
2016-08-23 15:16:04,624 T13060 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:16:04,628 T13060 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:16:04,634 T13060 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:16:04,638 T13060 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:16:04,698 T13060 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:16:04,703 T13060 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:16:04,710 T13060 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:16:04,713 T13060 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:16:04,762 T13060 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:16:04,766 T13060 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:16:04,773 T13060 INFO guocai_txj.py|262|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:16:04,832 T13060 INFO guocai_txj.py|264|执行['remote2local'=='local2remote']
2016-08-23 15:16:04,835 T13060 INFO guocai_txj.py|269|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:16:04,845 T13060 INFO guocai_txj.py|306|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:16:04,907 T13060 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:16:04,915 T13060 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 339, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0316E3A0>\n
ret = -1\nKeyError: -1\n'
cipher_data:'cipher_data=VS1bL5supbza8MevwTZxuCSfh12oaHo5ZIGeaN8nkMZEKFVzzTiX1tJIU
lxdov1C23DUa4SXsqXdszdqpyeJpyrOUgjXoNtnLGDN1k78JE4VZjUKZVtVLX68%2B259P
dAketSAqYsq%2FU3ImgX6RFkVzRJRYWuD2Tg1LoqCswMfJ0U%3DYV7gFc9afkGE0i3%2Fe
vlpKBkA9Kt1haVGYpraCEqsUh7h7R4RVJMJnhoiUmU4uV%2F9nfKBrY%2FSD6DbnRmYb0%
2Bs%2FqXMiPCyagp9aI8OvMhbPOq9WBo3OM5PGUQyytxOfwseCUYnxwDfMix2we%2FBq8L
NGbVlDJ1MRTcS5sTu%2FNQUTJY%3DQpqDGbVo6ocetorn9f5NNRAHLpNlaVk7%2BJOgM1M
VpaG69kxyvtFinUvMY%2FeXgyEd4nwKsgRCh775%2BrCRLxpYX9%2FZwYacmpsGXX4E%2B
K00%2FeLDa4PHssTW%2BNI6A6vDL6d%2B2ZXas5%2FGR%2F17HjfyN0GOYJw1PhNdfkBx%
2FJQNwTGQ24A%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:18:06
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:16:05,026 T13060 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:16:05,040 T13060 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:16:05,046 T13060 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:16:05,052 T13060 INFO guocai_txj.py|288|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:16:05,055 T13060 INFO guocai_txj.py|289|将commbuf内容转换到字典中
2016-08-23 15:16:05,059 T13060 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 291, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 15:16:05,144 T13060 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 291, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
cipher_data:'cipher_data=VS1bL5supbza8MevwTZxuCSfh12oaHo5ZIGeaN8nkMZEKFVzzTiX1tJIU
lxdov1C23DUa4SXsqXdszdqpyeJpyrOUgjXoNtnLGDN1k78JE4VZjUKZVtVLX68%2B259P
dAketSAqYsq%2FU3ImgX6RFkVzRJRYWuD2Tg1LoqCswMfJ0U%3DYV7gFc9afkGE0i3%2Fe
vlpKBkA9Kt1haVGYpraCEqsUh7h7R4RVJMJnhoiUmU4uV%2F9nfKBrY%2FSD6DbnRmYb0%
2Bs%2FqXMiPCyagp9aI8OvMhbPOq9WBo3OM5PGUQyytxOfwseCUYnxwDfMix2we%2FBq8L
NGbVlDJ1MRTcS5sTu%2FNQUTJY%3DQpqDGbVo6ocetorn9f5NNRAHLpNlaVk7%2BJOgM1M
VpaG69kxyvtFinUvMY%2FeXgyEd4nwKsgRCh775%2BrCRLxpYX9%2FZwYacmpsGXX4E%2B
K00%2FeLDa4PHssTW%2BNI6A6vDL6d%2B2ZXas5%2FGR%2F17HjfyN0GOYJw1PhNdfkBx%
2FJQNwTGQ24A%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:18:06
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:16:05,187 T13060 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:16:05,191 T13060 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:16:05,196 T13060 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:16:05,200 T13060 INFO guocai_txj.py|340|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:16:05,207 T13060 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:16:05,211 T13060 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:16:05,217 T13060 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 15:16:05,240 T13060 INFO 报文发往送到GAPS成功
2016-08-23 15:16:05,244 T13060 INFO 
--------------提交缓冲日志 END[2016-08-23 15:16:05.244000]---------------

2016-08-23 15:16:05,253 T13060 INFO 无数据break
2016-08-23 15:16:05,269 T12088 INFO 无数据break
2016-08-23 15:27:54,351 T9152 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 15:27:56,795 T10960 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 15:27:56,845 T10960 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:27:56,848 T10960 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:27:56,854 T10960 INFO guocai_txj.py|232|组件[STRAC_Commbuf]执行开始
2016-08-23 15:27:56,865 T10960 INFO guocai_txj.py|235|组件[STRAC_Commbuf]执行结束
2016-08-23 15:27:56,871 T10960 INFO guocai_txj.py|244|组件[STRAC_XMLTree]执行开始
2016-08-23 15:27:56,878 T10960 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:27:56,900 T10960 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行结束
2016-08-23 15:27:56,905 T10960 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:27:56,911 T10960 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:27:56,914 T10960 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:27:56,917 T10960 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:27:56,930 T10960 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:27:56,931 T10960 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:27:56,936 T10960 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:27:56,937 T10960 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:27:56,950 T10960 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:27:56,954 T10960 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:27:56,963 T10960 INFO guocai_txj.py|257|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:27:56,980 T10960 INFO guocai_txj.py|259|执行['local2remote'=='local2remote']
2016-08-23 15:27:56,983 T10960 INFO guocai_txj.py|261|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 15:27:56,996 T10960 INFO guocai_txj.py|301|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:27:57,015 T10960 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 15:27:57,020 T10960 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:27:57,073 T10960 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:27:57,094 T10960 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:27:57,099 T10960 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:27:57,107 T10960 INFO guocai_txj.py|283|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:27:57,109 T10960 INFO guocai_txj.py|284|将commbuf内容转换到字典中
2016-08-23 15:27:57,115 T10960 INFO guocai_txj.py|288|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 15:27:57,119 T10960 INFO guocai_txj.py|290|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:27:57,127 T10960 INFO guocai_txj.py|273|组件[SDATA_MSetValue]执行开始
2016-08-23 15:27:57,131 T10960 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行结束
2016-08-23 15:27:57,137 T10960 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:27:57,141 T10960 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 15:27:57,148 T10960 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 15:27:57,154 T10960 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:27:57,160 T10960 INFO guocai_txj.py|181|进行MD5运算后sign_md5=1895e4e1ec4dac1e6b375308704ad33e
2016-08-23 15:27:57,197 T10960 INFO guocai_txj.py|186|cipher_data[flWr+F7SVa2+r2ZmAYXvF4aho5Bo5kV7Rw2XpmUNPPQqYBCFbo6B4mCmghAwhstubxB5/spmfjyonk/qG+BBxTsfkTSxS21xDgqPIXe0hs+eeI2ezBCZdKGfPvsdTbgQUqjH4QCtzSAOFh0/X2dxye9v4T8OX1eEq0ojWYY+bzU=STLnVe/2jN8rgoSsviKYRQsxFwcH+f7h2n6spaXGwU+t4gB972VNDfemvPR1PFkJfjG1tX6acGFxsCMRK+Qb5gWskZeVCO8cucQW2ZVqoA7NGVyASALQssI0jFhpvgX7lz9rConmVfgBB4L9k677QqClVZHvzAOmne4TmvXd6AU=isskSjqwZKuqCBpVSokrMsgjRAGuLYsoDy6iwNCCO7j402rERKM8z3fRFMPdDuzBjvc7Nsyabd6TlqOxj7+4KDypgh6mUal4jwpEWYBttWqLuJ6N+fdy2ncupDY1zkNSj4YOqN/e/6yE2QYQVaBEOg8ibyb8oLEMLRa4CV96IRM=]
2016-08-23 15:27:57,204 T10960 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:27:57,211 T10960 INFO guocai_txj.py|196|组件[PY_MsgAddHead]执行开始
2016-08-23 15:27:57,214 T10960 INFO guocai_txj.py|198|resp=[POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1
Content-Length: 566
Host: apitest.tfb8.com
Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi
Accept-Encoding: UTF-8, deflate
Cache-Control: no-cache
Accept-Language: zh-cn
Content-Type: application/x-www-form-urlencoded
Connection: Keep-Alive
Accept: image/gif, */*
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)

cipher_data=flWr%2BF7SVa2%2Br2ZmAYXvF4aho5Bo5kV7Rw2XpmUNPPQqYBCFbo6B4mCmghAwhstubxB5%2Fspmfjyonk%2FqG%2BBBxTsfkTSxS21xDgqPIXe0hs%2BeeI2ezBCZdKGfPvsdTbgQUqjH4QCtzSAOFh0%2FX2dxye9v4T8OX1eEq0ojWYY%2BbzU%3DSTLnVe%2F2jN8rgoSsviKYRQsxFwcH%2Bf7h2n6spaXGwU%2Bt4gB972VNDfemvPR1PFkJfjG1tX6acGFxsCMRK%2BQb5gWskZeVCO8cucQW2ZVqoA7NGVyASALQssI0jFhpvgX7lz9rConmVfgBB4L9k677QqClVZHvzAOmne4TmvXd6AU%3DisskSjqwZKuqCBpVSokrMsgjRAGuLYsoDy6iwNCCO7j402rERKM8z3fRFMPdDuzBjvc7Nsyabd6TlqOxj7%2B4KDypgh6mUal4jwpEWYBttWqLuJ6N%2Bfdy2ncupDY1zkNSj4YOqN%2Fe%2F6yE2QYQVaBEOg8ibyb8oLEMLRa4CV96IRM%3D]
2016-08-23 15:27:57,226 T10960 INFO guocai_txj.py|199|组件[PY_MsgAddHead]执行结束
2016-08-23 15:27:57,232 T10960 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 15:27:57,236 T10960 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 15:27:57,242 T10960 INFO guocai_txj.py|208|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 15:27:57,246 T10960 INFO guocai_txj.py|209|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 15:27:57,253 T10960 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:27:57,257 T10960 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:27:57,260 T10960 INFO guocai_txj.py|335|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:27:57,269 T10960 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:27:57,276 T10960 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:27:57,280 T10960 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 15:27:57,309 T10960 INFO 报文发往送到GAPS成功
2016-08-23 15:27:57,312 T10960 INFO 
--------------提交缓冲日志 END[2016-08-23 15:27:57.312000]---------------

2016-08-23 15:27:57,387 T10388 INFO 从GAPS接收到的数据：【HTTP/1.1 400 Bad Request
Date: Tue, 23 Aug 2016 07:29:59 GMT
Server: Apache/2.4.12 (Unix) OpenSSL/1.0.2
Content-Length: 226
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
】
2016-08-23 15:27:57,411 T10388 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:27:57,414 T10388 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:27:57,420 T10388 INFO guocai_txj.py|232|组件[STRAC_Commbuf]执行开始
2016-08-23 15:27:57,428 T10388 INFO guocai_txj.py|235|组件[STRAC_Commbuf]执行结束
2016-08-23 15:27:57,434 T10388 INFO guocai_txj.py|244|组件[STRAC_XMLTree]执行开始
2016-08-23 15:27:57,443 T10388 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
cipher_data:'cipher_data=flWr%2BF7SVa2%2Br2ZmAYXvF4aho5Bo5kV7Rw2XpmUNPPQqYBCFbo6B4
mCmghAwhstubxB5%2Fspmfjyonk%2FqG%2BBBxTsfkTSxS21xDgqPIXe0hs%2BeeI2ezBC
ZdKGfPvsdTbgQUqjH4QCtzSAOFh0%2FX2dxye9v4T8OX1eEq0ojWYY%2BbzU%3DSTLnVe%
2F2jN8rgoSsviKYRQsxFwcH%2Bf7h2n6spaXGwU%2Bt4gB972VNDfemvPR1PFkJfjG1tX6
acGFxsCMRK%2BQb5gWskZeVCO8cucQW2ZVqoA7NGVyASALQssI0jFhpvgX7lz9rConmVfg
BB4L9k677QqClVZHvzAOmne4TmvXd6AU%3DisskSjqwZKuqCBpVSokrMsgjRAGuLYsoDy6
iwNCCO7j402rERKM8z3fRFMPdDuzBjvc7Nsyabd6TlqOxj7%2B4KDypgh6mUal4jwpEWYB
ttWqLuJ6N%2Bfdy2ncupDY1zkNSj4YOqN%2Fe%2F6yE2QYQVaBEOg8ibyb8oLEMLRa4CV9
6IRM%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:29:59
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:27:57,503 T10388 INFO guocai_txj.py|246|组件[STRAC_XMLTree]执行结束
2016-08-23 15:27:57,510 T10388 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:27:57,513 T10388 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:27:57,520 T10388 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:27:57,525 T10388 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:27:57,563 T10388 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:27:57,566 T10388 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:27:57,572 T10388 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:27:57,575 T10388 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:27:57,615 T10388 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:27:57,618 T10388 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:27:57,624 T10388 INFO guocai_txj.py|257|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:27:57,674 T10388 INFO guocai_txj.py|259|执行['remote2local'=='local2remote']
2016-08-23 15:27:57,678 T10388 INFO guocai_txj.py|264|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:27:57,684 T10388 INFO guocai_txj.py|301|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:27:57,736 T10388 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:27:57,742 T10388 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
cipher_data:'cipher_data=flWr%2BF7SVa2%2Br2ZmAYXvF4aho5Bo5kV7Rw2XpmUNPPQqYBCFbo6B4
mCmghAwhstubxB5%2Fspmfjyonk%2FqG%2BBBxTsfkTSxS21xDgqPIXe0hs%2BeeI2ezBC
ZdKGfPvsdTbgQUqjH4QCtzSAOFh0%2FX2dxye9v4T8OX1eEq0ojWYY%2BbzU%3DSTLnVe%
2F2jN8rgoSsviKYRQsxFwcH%2Bf7h2n6spaXGwU%2Bt4gB972VNDfemvPR1PFkJfjG1tX6
acGFxsCMRK%2BQb5gWskZeVCO8cucQW2ZVqoA7NGVyASALQssI0jFhpvgX7lz9rConmVfg
BB4L9k677QqClVZHvzAOmne4TmvXd6AU%3DisskSjqwZKuqCBpVSokrMsgjRAGuLYsoDy6
iwNCCO7j402rERKM8z3fRFMPdDuzBjvc7Nsyabd6TlqOxj7%2B4KDypgh6mUal4jwpEWYB
ttWqLuJ6N%2Bfdy2ncupDY1zkNSj4YOqN%2Fe%2F6yE2QYQVaBEOg8ibyb8oLEMLRa4CV9
6IRM%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:29:59
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:27:57,812 T10388 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:27:57,825 T10388 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:27:57,831 T10388 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:27:57,835 T10388 INFO guocai_txj.py|283|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:27:57,839 T10388 INFO guocai_txj.py|284|将commbuf内容转换到字典中
2016-08-23 15:27:57,848 T10388 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 286, in SDATA_ImpFromBuf
    xml = changeCode(xml,'UTF-8')
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 40, in changeCode
    coding_before  = re.findall('encoding="(.*?)"',xml,re.S)[0]
                 xml = '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\n</p>\n</body></html>'
              coding = 'UTF-8'
IndexError: list index out of range

2016-08-23 15:27:57,937 T10388 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 286, in SDATA_ImpFromBuf\n    xml =
changeCode(xml,\'UTF-8\')\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\x
c8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\x
fa\\tfb_txj\\bin\\tysf_uitls.py", line 40, in changeCode\n
coding_before  = re.findall(\'encoding="(.*?)"\',xml,re.S)[0]\n
xml = \'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\\n<html><head>\\n<title>400 Bad
Request</title>\\n</head><body>\\n<h1>Bad Request</h1>\\n<p>Your
browser sent a request that this server could not understand.<br
/>\\n</p>\\n</body></html>\'\n              coding =
\'UTF-8\'\nIndexError: list index out of range\n'
cipher_data:'cipher_data=flWr%2BF7SVa2%2Br2ZmAYXvF4aho5Bo5kV7Rw2XpmUNPPQqYBCFbo6B4
mCmghAwhstubxB5%2Fspmfjyonk%2FqG%2BBBxTsfkTSxS21xDgqPIXe0hs%2BeeI2ezBC
ZdKGfPvsdTbgQUqjH4QCtzSAOFh0%2FX2dxye9v4T8OX1eEq0ojWYY%2BbzU%3DSTLnVe%
2F2jN8rgoSsviKYRQsxFwcH%2Bf7h2n6spaXGwU%2Bt4gB972VNDfemvPR1PFkJfjG1tX6
acGFxsCMRK%2BQb5gWskZeVCO8cucQW2ZVqoA7NGVyASALQssI0jFhpvgX7lz9rConmVfg
BB4L9k677QqClVZHvzAOmne4TmvXd6AU%3DisskSjqwZKuqCBpVSokrMsgjRAGuLYsoDy6
iwNCCO7j402rERKM8z3fRFMPdDuzBjvc7Nsyabd6TlqOxj7%2B4KDypgh6mUal4jwpEWYB
ttWqLuJ6N%2Bfdy2ncupDY1zkNSj4YOqN%2Fe%2F6yE2QYQVaBEOg8ibyb8oLEMLRa4CV9
6IRM%3D'
commbuf:'HTTP/1.1 400 Bad Request\r\nDate: Tue, 23 Aug 2016 07:29:59
GMT\r\nServer: Apache/2.4.12 (Unix) OpenSSL/1.0.2\r\nContent-Length:
226\r\nConnection: close\r\nContent-Type: text/html;
charset=iso-8859-1\r\n\r\n<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML
2.0//EN">\n<html><head>\n<title>400 Bad
Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser
sent a request that this server could not understand.<br
/>\n</p>\n</body></html>\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\n\nContent-Length:
557\n\nHost: apitest.tfb8.com\n\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\n\nAccept-Encoding: GBK, deflate\n\nCache-
Control: no-cache\n\nAccept-Language: zh-cn\n\nContent-Type:
application/x-www-form-urlencoded\n\nConnection: Keep-Alive\n\nAccept:
image/gif, */*\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\n\n\n\n<?xml version=\'1.0\' 
encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222
222</spbillno><business_type>14900</business_type><business_no>444444<
/business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name
>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_ty
pe><card_id>622384609891538799</card_id><card_type></card_type><bank_n
ame>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov
></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f
5e82173b880a5213cfc640707a936</md5_sign></root>\xa1\xbf\n'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:27:57,990 T10388 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:27:57,994 T10388 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:27:58,000 T10388 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:27:58,006 T10388 INFO guocai_txj.py|335|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:27:58,016 T10388 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:27:58,020 T10388 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:27:58,026 T10388 INFO 从三方接收到的数据：【POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1

Content-Length: 557

Host: apitest.tfb8.com

Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi

Accept-Encoding: GBK, deflate

Cache-Control: no-cache

Accept-Language: zh-cn

Content-Type: application/x-www-form-urlencoded

Connection: Keep-Alive

Accept: image/gif, */*

User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)



<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign>42f5e82173b880a5213cfc640707a936</md5_sign></root>】
】
2016-08-23 15:27:58,046 T10388 INFO 报文发往送到GAPS成功
2016-08-23 15:27:58,049 T10388 INFO 
--------------提交缓冲日志 END[2016-08-23 15:27:58.050000]---------------

2016-08-23 15:27:58,056 T10388 INFO 无数据break
2016-08-23 15:27:58,072 T10960 INFO 无数据break
2016-08-23 15:30:19,413 T8524 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 15:30:21,779 T11024 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 15:30:21,818 T11024 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:30:21,822 T11024 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:30:21,825 T11024 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:30:21,832 T11024 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:30:21,835 T11024 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:30:21,842 T11024 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:30:21,855 T11024 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:30:21,861 T11024 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:30:21,865 T11024 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:30:21,872 T11024 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:30:21,875 T11024 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:30:21,891 T11024 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:30:21,894 T11024 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:30:21,901 T11024 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:30:21,905 T11024 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:30:21,921 T11024 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:30:21,923 T11024 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:30:21,930 T11024 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:30:21,950 T11024 INFO guocai_txj.py|260|执行['local2remote'=='local2remote']
2016-08-23 15:30:21,953 T11024 INFO guocai_txj.py|262|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 15:30:21,963 T11024 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:30:21,983 T11024 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 15:30:21,990 T11024 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:30:22,032 T11024 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:30:22,049 T11024 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:30:22,053 T11024 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:30:22,062 T11024 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:30:22,066 T11024 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:30:22,075 T11024 INFO guocai_txj.py|289|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 15:30:22,082 T11024 INFO guocai_txj.py|291|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:30:22,091 T11024 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行开始
2016-08-23 15:30:22,095 T11024 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行结束
2016-08-23 15:30:22,101 T11024 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:30:22,108 T11024 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 15:30:22,115 T11024 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 15:30:22,121 T11024 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:30:22,131 T11024 INFO guocai_txj.py|181|进行MD5运算后sign_md5=1895e4e1ec4dac1e6b375308704ad33e
2016-08-23 15:30:22,167 T11024 INFO guocai_txj.py|186|cipher_data[ddWH6hoaYTiG99FPWhzowMVnWOyG44XPf6yQ9kSWVm/o/QwMegy62TS8uWJOTe8aohtPlZy2+kBYc7CRRTtNhUqCFue5P68upfXdSE5We5xANxk4ACvIJdNT0TCkuxZ7yb6nT7CynGjt0earcyPHJxmR1f41yDn+MKyiWaUGnGg=mnpg0JHOeE8pU4e3kUqoGq+/46EfhctGJziswz1168gnyjiGdWVOOsnH0s36E9+/+UdxeKxIBSaQPWdAgJzGY7A253uTRRZ6GlW0YvuNTbciPQ7zGUyHZ5UCo2/GKy3NzU0YMbzZwmtmeJhsALoD0NEOZMjrdTfRFTt/MWlmGjQ=SVWFoDdGKhW7uwEqSejvt6YywgRuz9t4K+pYwEtfBppps390wiSeDSHnuGS4iKkK3EeO6cQ43CjxDNA/daJ6a0pCZrX/JOSDknsJtKTFcCSp0rzsTZUZMOHVB3UQFXmiMIrto/Veo9gBoiGRqXqrMjmms04aUBcU8fXVdMSvJnA=]
2016-08-23 15:30:22,174 T11024 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:30:22,177 T11024 INFO guocai_txj.py|196|组件[PY_MsgAddHead]执行开始
2016-08-23 15:30:22,183 T11024 INFO guocai_txj.py|199|resp=[POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1
Content-Length: 564
Host: apitest.tfb8.com
Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi
Accept-Encoding: UTF-8, deflate
Cache-Control: no-cache
Accept-Language: zh-cn
Content-Type: application/x-www-form-urlencoded
Connection: Keep-Alive
Accept: image/gif, */*
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)

cipher_data=ddWH6hoaYTiG99FPWhzowMVnWOyG44XPf6yQ9kSWVm%2Fo%2FQwMegy62TS8uWJOTe8aohtPlZy2%2BkBYc7CRRTtNhUqCFue5P68upfXdSE5We5xANxk4ACvIJdNT0TCkuxZ7yb6nT7CynGjt0earcyPHJxmR1f41yDn%2BMKyiWaUGnGg%3Dmnpg0JHOeE8pU4e3kUqoGq%2B%2F46EfhctGJziswz1168gnyjiGdWVOOsnH0s36E9%2B%2F%2BUdxeKxIBSaQPWdAgJzGY7A253uTRRZ6GlW0YvuNTbciPQ7zGUyHZ5UCo2%2FGKy3NzU0YMbzZwmtmeJhsALoD0NEOZMjrdTfRFTt%2FMWlmGjQ%3DSVWFoDdGKhW7uwEqSejvt6YywgRuz9t4K%2BpYwEtfBppps390wiSeDSHnuGS4iKkK3EeO6cQ43CjxDNA%2FdaJ6a0pCZrX%2FJOSDknsJtKTFcCSp0rzsTZUZMOHVB3UQFXmiMIrto%2FVeo9gBoiGRqXqrMjmms04aUBcU8fXVdMSvJnA%3D]
2016-08-23 15:30:22,197 T11024 INFO guocai_txj.py|200|组件[PY_MsgAddHead]执行结束
2016-08-23 15:30:22,203 T11024 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 15:30:22,207 T11024 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 15:30:22,214 T11024 INFO guocai_txj.py|209|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 15:30:22,220 T11024 INFO guocai_txj.py|210|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 15:30:22,230 T11024 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:30:22,236 T11024 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:30:22,240 T11024 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:30:22,250 T11024 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:30:22,260 T11024 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:30:22,293 T11024 INFO 报文发往送到GAPS成功
2016-08-23 15:30:22,296 T11024 INFO 
--------------提交缓冲日志 END[2016-08-23 15:30:22.296000]---------------

2016-08-23 15:30:22,403 T8148 INFO 从GAPS接收到的数据：【HTTP/1.1 200 OK
Date: Tue, 23 Aug 2016 07:38:00 GMT
Server: Apache/2.2.29 (Unix) DAV/2
Vary: Accept-Encoding
Content-Type: application/xml;charset=UTF-8
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked

87
<?xml version="1.0" encoding="UTF-8" ?><root><retcode>207502</retcode><retmsg>峰烽璇</retmsg><tid>api_acp_single</tid></root>

】
2016-08-23 15:30:22,427 T8148 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:30:22,433 T8148 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:30:22,443 T8148 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:30:22,450 T8148 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:30:22,456 T8148 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:30:22,463 T8148 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
cipher_data:'cipher_data=ddWH6hoaYTiG99FPWhzowMVnWOyG44XPf6yQ9kSWVm%2Fo%2FQwMegy62
TS8uWJOTe8aohtPlZy2%2BkBYc7CRRTtNhUqCFue5P68upfXdSE5We5xANxk4ACvIJdNT0
TCkuxZ7yb6nT7CynGjt0earcyPHJxmR1f41yDn%2BMKyiWaUGnGg%3Dmnpg0JHOeE8pU4e
3kUqoGq%2B%2F46EfhctGJziswz1168gnyjiGdWVOOsnH0s36E9%2B%2F%2BUdxeKxIBSa
QPWdAgJzGY7A253uTRRZ6GlW0YvuNTbciPQ7zGUyHZ5UCo2%2FGKy3NzU0YMbzZwmtmeJh
sALoD0NEOZMjrdTfRFTt%2FMWlmGjQ%3DSVWFoDdGKhW7uwEqSejvt6YywgRuz9t4K%2Bp
YwEtfBppps390wiSeDSHnuGS4iKkK3EeO6cQ43CjxDNA%2FdaJ6a0pCZrX%2FJOSDknsJt
KTFcCSp0rzsTZUZMOHVB3UQFXmiMIrto%2FVeo9gBoiGRqXqrMjmms04aUBcU8fXVdMSvJ
nA%3D'
commbuf:'HTTP/1.1 200 OK\r\nDate: Tue, 23 Aug 2016 07:38:00 GMT\r\nServer:
Apache/2.2.29 (Unix) DAV/2\r\nVary: Accept-Encoding\r\nContent-Type:
application/xml;charset=UTF-8\r\nKeep-Alive: timeout=5,
max=100\r\nConnection: Keep-Alive\r\nTransfer-Encoding:
chunked\r\n\r\n87\r\n<?xml version="1.0" encoding="UTF-8" ?><root><ret
code>207502</retcode><retmsg>\xe5\x95\x86\xe6\x88\xb7\xe5\x8f\xb7\xe9\
x94\x99\xe8\xaf\xaf</retmsg><tid>api_acp_single</tid></root>\n\r\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
564\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=ddWH6hoaYT
iG99FPWhzowMVnWOyG44XPf6yQ9kSWVm%2Fo%2FQwMegy62TS8uWJOTe8aohtPlZy2%2Bk
BYc7CRRTtNhUqCFue5P68upfXdSE5We5xANxk4ACvIJdNT0TCkuxZ7yb6nT7CynGjt0ear
cyPHJxmR1f41yDn%2BMKyiWaUGnGg%3Dmnpg0JHOeE8pU4e3kUqoGq%2B%2F46EfhctGJz
iswz1168gnyjiGdWVOOsnH0s36E9%2B%2F%2BUdxeKxIBSaQPWdAgJzGY7A253uTRRZ6Gl
W0YvuNTbciPQ7zGUyHZ5UCo2%2FGKy3NzU0YMbzZwmtmeJhsALoD0NEOZMjrdTfRFTt%2F
MWlmGjQ%3DSVWFoDdGKhW7uwEqSejvt6YywgRuz9t4K%2BpYwEtfBppps390wiSeDSHnuG
S4iKkK3EeO6cQ43CjxDNA%2FdaJ6a0pCZrX%2FJOSDknsJtKTFcCSp0rzsTZUZMOHVB3UQ
FXmiMIrto%2FVeo9gBoiGRqXqrMjmms04aUBcU8fXVdMSvJnA%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:30:22,536 T8148 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:30:22,540 T8148 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:30:22,545 T8148 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:30:22,551 T8148 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:30:22,555 T8148 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:30:22,607 T8148 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:30:22,611 T8148 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:30:22,621 T8148 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:30:22,630 T8148 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:30:22,681 T8148 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:30:22,686 T8148 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:30:22,696 T8148 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:30:22,756 T8148 INFO guocai_txj.py|260|执行['remote2local'=='local2remote']
2016-08-23 15:30:22,759 T8148 INFO guocai_txj.py|265|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:30:22,766 T8148 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:30:22,825 T8148 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:30:22,841 T8148 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
cipher_data:'cipher_data=ddWH6hoaYTiG99FPWhzowMVnWOyG44XPf6yQ9kSWVm%2Fo%2FQwMegy62
TS8uWJOTe8aohtPlZy2%2BkBYc7CRRTtNhUqCFue5P68upfXdSE5We5xANxk4ACvIJdNT0
TCkuxZ7yb6nT7CynGjt0earcyPHJxmR1f41yDn%2BMKyiWaUGnGg%3Dmnpg0JHOeE8pU4e
3kUqoGq%2B%2F46EfhctGJziswz1168gnyjiGdWVOOsnH0s36E9%2B%2F%2BUdxeKxIBSa
QPWdAgJzGY7A253uTRRZ6GlW0YvuNTbciPQ7zGUyHZ5UCo2%2FGKy3NzU0YMbzZwmtmeJh
sALoD0NEOZMjrdTfRFTt%2FMWlmGjQ%3DSVWFoDdGKhW7uwEqSejvt6YywgRuz9t4K%2Bp
YwEtfBppps390wiSeDSHnuGS4iKkK3EeO6cQ43CjxDNA%2FdaJ6a0pCZrX%2FJOSDknsJt
KTFcCSp0rzsTZUZMOHVB3UQFXmiMIrto%2FVeo9gBoiGRqXqrMjmms04aUBcU8fXVdMSvJ
nA%3D'
commbuf:'HTTP/1.1 200 OK\r\nDate: Tue, 23 Aug 2016 07:38:00 GMT\r\nServer:
Apache/2.2.29 (Unix) DAV/2\r\nVary: Accept-Encoding\r\nContent-Type:
application/xml;charset=UTF-8\r\nKeep-Alive: timeout=5,
max=100\r\nConnection: Keep-Alive\r\nTransfer-Encoding:
chunked\r\n\r\n87\r\n<?xml version="1.0" encoding="UTF-8" ?><root><ret
code>207502</retcode><retmsg>\xe5\x95\x86\xe6\x88\xb7\xe5\x8f\xb7\xe9\
x94\x99\xe8\xaf\xaf</retmsg><tid>api_acp_single</tid></root>\n\r\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
564\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=ddWH6hoaYT
iG99FPWhzowMVnWOyG44XPf6yQ9kSWVm%2Fo%2FQwMegy62TS8uWJOTe8aohtPlZy2%2Bk
BYc7CRRTtNhUqCFue5P68upfXdSE5We5xANxk4ACvIJdNT0TCkuxZ7yb6nT7CynGjt0ear
cyPHJxmR1f41yDn%2BMKyiWaUGnGg%3Dmnpg0JHOeE8pU4e3kUqoGq%2B%2F46EfhctGJz
iswz1168gnyjiGdWVOOsnH0s36E9%2B%2F%2BUdxeKxIBSaQPWdAgJzGY7A253uTRRZ6Gl
W0YvuNTbciPQ7zGUyHZ5UCo2%2FGKy3NzU0YMbzZwmtmeJhsALoD0NEOZMjrdTfRFTt%2F
MWlmGjQ%3DSVWFoDdGKhW7uwEqSejvt6YywgRuz9t4K%2BpYwEtfBppps390wiSeDSHnuG
S4iKkK3EeO6cQ43CjxDNA%2FdaJ6a0pCZrX%2FJOSDknsJtKTFcCSp0rzsTZUZMOHVB3UQ
FXmiMIrto%2FVeo9gBoiGRqXqrMjmms04aUBcU8fXVdMSvJnA%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:30:23,002 T8148 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:30:23,026 T8148 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:30:23,032 T8148 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:30:23,043 T8148 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:30:23,049 T8148 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:30:23,061 T8148 INFO guocai_txj.py|289|转换后的字典resp_dict={u'root': {u'tid': u'api_acp_single', u'retcode': u'207502', u'retmsg': u'\u5546\u6237\u53f7\u9519\u8bef'}}
2016-08-23 15:30:23,068 T8148 INFO guocai_txj.py|291|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:30:23,079 T8148 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行开始
2016-08-23 15:30:23,086 T8148 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行结束
2016-08-23 15:30:23,098 T8148 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:30:23,104 T8148 INFO guocai_txj.py|174|对字典req={u'root': {u'tid': u'api_acp_single', u'retcode': u'207502', u'retmsg': u'\u5546\u6237\u53f7\u9519\u8bef'}}进行处理
2016-08-23 15:30:23,109 T8148 INFO guocai_txj.py|176|字典root={u'tid': u'api_acp_single', u'retcode': u'207502', u'retmsg': u'\u5546\u6237\u53f7\u9519\u8bef'}
2016-08-23 15:30:23,115 T8148 INFO guocai_txj.py|178|排序后的数据signdata=tid=api_acp_single&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:30:23,118 T8148 INFO guocai_txj.py|181|进行MD5运算后sign_md5=84a2afe3c78aef0c47509ba67328cddd
2016-08-23 15:30:23,134 T8148 INFO guocai_txj.py|186|cipher_data[VJo0Hoo8Nq+q4gklRMKMmk6HnByYDSJ9mPmUDRSXFtwJI0W+x7z9b49DfA6C4aM4HOEgLo8B7Jf3naUVB/Ls407D9oRbwtab3ImkslzG+nUazrVmitA0s4fpujLawcM1clEDPrwkj3JV42+xhoGk0BWl3mGGq/DXetwTVDqSsmY=]
2016-08-23 15:30:23,140 T8148 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:30:23,180 T8148 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 15:30:23,194 T8148 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 15:30:23,207 T8148 INFO guocai_txj.py|209|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 15:30:23,211 T8148 INFO guocai_txj.py|210|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 15:30:23,224 T8148 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:30:23,242 T8148 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:30:23,250 T8148 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:30:23,267 T8148 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:30:23,302 T8148 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:30:23,487 T8148 INFO 报文发往送到GAPS成功
2016-08-23 15:30:23,509 T8148 INFO 
--------------提交缓冲日志 END[2016-08-23 15:30:23.510000]---------------

2016-08-23 15:30:23,519 T11024 INFO 无数据break
2016-08-23 15:30:23,546 T8148 INFO 从GAPS接收到的数据：【0

】
2016-08-23 15:30:23,604 T8148 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:30:23,607 T8148 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:30:23,615 T8148 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:30:23,625 T8148 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:30:23,637 T8148 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:30:23,648 T8148 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'tid': u'api_acp_single', u'retcode': u'207502',
u'retmsg': u'\u5546\u6237\u53f7\u9519\u8bef'}}
cipher_data:'cipher_data=VJo0Hoo8Nq%2Bq4gklRMKMmk6HnByYDSJ9mPmUDRSXFtwJI0W%2Bx7z9b
49DfA6C4aM4HOEgLo8B7Jf3naUVB%2FLs407D9oRbwtab3ImkslzG%2BnUazrVmitA0s4f
pujLawcM1clEDPrwkj3JV42%2BxhoGk0BWl3mGGq%2FDXetwTVDqSsmY%3D'
commbuf:'0\r\n\r\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
564\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=ddWH6hoaYT
iG99FPWhzowMVnWOyG44XPf6yQ9kSWVm%2Fo%2FQwMegy62TS8uWJOTe8aohtPlZy2%2Bk
BYc7CRRTtNhUqCFue5P68upfXdSE5We5xANxk4ACvIJdNT0TCkuxZ7yb6nT7CynGjt0ear
cyPHJxmR1f41yDn%2BMKyiWaUGnGg%3Dmnpg0JHOeE8pU4e3kUqoGq%2B%2F46EfhctGJz
iswz1168gnyjiGdWVOOsnH0s36E9%2B%2F%2BUdxeKxIBSaQPWdAgJzGY7A253uTRRZ6Gl
W0YvuNTbciPQ7zGUyHZ5UCo2%2FGKy3NzU0YMbzZwmtmeJhsALoD0NEOZMjrdTfRFTt%2F
MWlmGjQ%3DSVWFoDdGKhW7uwEqSejvt6YywgRuz9t4K%2BpYwEtfBppps390wiSeDSHnuG
S4iKkK3EeO6cQ43CjxDNA%2FdaJ6a0pCZrX%2FJOSDknsJtKTFcCSp0rzsTZUZMOHVB3UQ
FXmiMIrto%2FVeo9gBoiGRqXqrMjmms04aUBcU8fXVdMSvJnA%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:30:23,716 T8148 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:30:23,737 T8148 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:30:23,743 T8148 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:30:23,759 T8148 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:30:23,769 T8148 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:30:23,836 T8148 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:30:23,841 T8148 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:30:23,851 T8148 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:30:23,857 T8148 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:30:23,901 T8148 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:30:23,904 T8148 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:30:23,914 T8148 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:30:23,948 T8148 INFO guocai_txj.py|260|执行['remote2local'=='local2remote']
2016-08-23 15:30:23,953 T8148 INFO guocai_txj.py|265|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:30:23,960 T8148 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:30:23,997 T8148 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:30:24,006 T8148 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'tid': u'api_acp_single', u'retcode': u'207502',
u'retmsg': u'\u5546\u6237\u53f7\u9519\u8bef'}}
cipher_data:'cipher_data=VJo0Hoo8Nq%2Bq4gklRMKMmk6HnByYDSJ9mPmUDRSXFtwJI0W%2Bx7z9b
49DfA6C4aM4HOEgLo8B7Jf3naUVB%2FLs407D9oRbwtab3ImkslzG%2BnUazrVmitA0s4f
pujLawcM1clEDPrwkj3JV42%2BxhoGk0BWl3mGGq%2FDXetwTVDqSsmY%3D'
commbuf:'0\r\n\r\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
564\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=ddWH6hoaYT
iG99FPWhzowMVnWOyG44XPf6yQ9kSWVm%2Fo%2FQwMegy62TS8uWJOTe8aohtPlZy2%2Bk
BYc7CRRTtNhUqCFue5P68upfXdSE5We5xANxk4ACvIJdNT0TCkuxZ7yb6nT7CynGjt0ear
cyPHJxmR1f41yDn%2BMKyiWaUGnGg%3Dmnpg0JHOeE8pU4e3kUqoGq%2B%2F46EfhctGJz
iswz1168gnyjiGdWVOOsnH0s36E9%2B%2F%2BUdxeKxIBSaQPWdAgJzGY7A253uTRRZ6Gl
W0YvuNTbciPQ7zGUyHZ5UCo2%2FGKy3NzU0YMbzZwmtmeJhsALoD0NEOZMjrdTfRFTt%2F
MWlmGjQ%3DSVWFoDdGKhW7uwEqSejvt6YywgRuz9t4K%2BpYwEtfBppps390wiSeDSHnuG
S4iKkK3EeO6cQ43CjxDNA%2FdaJ6a0pCZrX%2FJOSDknsJtKTFcCSp0rzsTZUZMOHVB3UQ
FXmiMIrto%2FVeo9gBoiGRqXqrMjmms04aUBcU8fXVdMSvJnA%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:30:24,062 T8148 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:30:24,076 T8148 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:30:24,082 T8148 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:30:24,088 T8148 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:30:24,092 T8148 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:30:24,095 T8148 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 286, in SDATA_ImpFromBuf
    xml = getxml(jyzd.commbuf)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 36, in getxml
    body = re.findall('<.*>',data,re.S)[0]
                data = '0\r\n\r\n'
IndexError: list index out of range

2016-08-23 15:30:24,180 T8148 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'tid': u'api_acp_single', u'retcode': u'207502',
u'retmsg': u'\u5546\u6237\u53f7\u9519\u8bef'}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 286, in SDATA_ImpFromBuf\n    xml =
getxml(jyzd.commbuf)\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xa
b\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\t
fb_txj\\bin\\tysf_uitls.py", line 36, in getxml\n    body =
re.findall(\'<.*>\',data,re.S)[0]\n                data =
\'0\\r\\n\\r\\n\'\nIndexError: list index out of range\n'
cipher_data:'cipher_data=VJo0Hoo8Nq%2Bq4gklRMKMmk6HnByYDSJ9mPmUDRSXFtwJI0W%2Bx7z9b
49DfA6C4aM4HOEgLo8B7Jf3naUVB%2FLs407D9oRbwtab3ImkslzG%2BnUazrVmitA0s4f
pujLawcM1clEDPrwkj3JV42%2BxhoGk0BWl3mGGq%2FDXetwTVDqSsmY%3D'
commbuf:'0\r\n\r\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
564\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=ddWH6hoaYT
iG99FPWhzowMVnWOyG44XPf6yQ9kSWVm%2Fo%2FQwMegy62TS8uWJOTe8aohtPlZy2%2Bk
BYc7CRRTtNhUqCFue5P68upfXdSE5We5xANxk4ACvIJdNT0TCkuxZ7yb6nT7CynGjt0ear
cyPHJxmR1f41yDn%2BMKyiWaUGnGg%3Dmnpg0JHOeE8pU4e3kUqoGq%2B%2F46EfhctGJz
iswz1168gnyjiGdWVOOsnH0s36E9%2B%2F%2BUdxeKxIBSaQPWdAgJzGY7A253uTRRZ6Gl
W0YvuNTbciPQ7zGUyHZ5UCo2%2FGKy3NzU0YMbzZwmtmeJhsALoD0NEOZMjrdTfRFTt%2F
MWlmGjQ%3DSVWFoDdGKhW7uwEqSejvt6YywgRuz9t4K%2BpYwEtfBppps390wiSeDSHnuG
S4iKkK3EeO6cQ43CjxDNA%2FdaJ6a0pCZrX%2FJOSDknsJtKTFcCSp0rzsTZUZMOHVB3UQ
FXmiMIrto%2FVeo9gBoiGRqXqrMjmms04aUBcU8fXVdMSvJnA%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:30:24,217 T8148 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:30:24,223 T8148 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:30:24,230 T8148 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:30:24,233 T8148 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:30:24,243 T8148 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:30:24,252 T8148 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:30:24,282 T8148 INFO line[238] Dispatch Socket write error of 127.0.0.1:50347: [Errno 10058] 
2016-08-23 15:38:21,250 T8440 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 15:38:22,808 T9352 INFO 从GAPS接收到的数据：【00000566<?xml version='1.0' encoding="GB2312"?><root><ver>1.0</ver><spid>11111</spid><spbillno>222222</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>26520300</bank_ins_code><card_prov></card_prov><purpose></purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 15:38:22,838 T9352 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:38:22,841 T9352 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:38:22,845 T9352 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:38:22,851 T9352 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:38:22,855 T9352 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:38:22,861 T9352 INFO 交易字典内容输出：AttrDict{
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:38:22,872 T9352 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:38:22,880 T9352 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:38:22,882 T9352 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:38:22,887 T9352 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:38:22,888 T9352 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:38:22,904 T9352 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:38:22,907 T9352 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:38:22,914 T9352 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:38:22,917 T9352 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:38:22,936 T9352 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:38:22,938 T9352 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:38:22,944 T9352 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:38:22,960 T9352 INFO guocai_txj.py|260|执行['local2remote'=='local2remote']
2016-08-23 15:38:22,963 T9352 INFO guocai_txj.py|262|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 15:38:22,969 T9352 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:38:22,986 T9352 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 15:38:22,990 T9352 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000566<?xml version=\'1.0\' encoding="GB2312"?><root><ver>1.0</ver>
<spid>11111</spid><spbillno>222222</spbillno><business_type>14900</bus
iness_type><business_no>444444</business_no><tran_amt>10000</tran_amt>
<cur_type></cur_type><true_name>11111</true_name><mobile></mobile><cre
_id></cre_id><cre_type></cre_type><card_id>622384609891538799</card_id
><card_type></card_type><bank_name>10000</bank_name><bank_ins_code>265
20300</bank_ins_code><card_prov></card_prov><purpose></purpose><postsc
ript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</
TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:38:23,013 T9352 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:38:23,025 T9352 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:38:23,029 T9352 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:38:23,033 T9352 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:38:23,038 T9352 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:38:23,040 T9352 INFO guocai_txj.py|289|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}
2016-08-23 15:38:23,046 T9352 INFO guocai_txj.py|291|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:38:23,051 T9352 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行开始
2016-08-23 15:38:23,055 T9352 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行结束
2016-08-23 15:38:23,059 T9352 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:38:23,063 T9352 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}}进行处理
2016-08-23 15:38:23,069 T9352 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'10000', u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov': '', u'mobile': '', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622384609891538799', u'spbillno': u'222222', u'card_type': '', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111', u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver': u'1.0', u'cur_type': ''}
2016-08-23 15:38:23,073 T9352 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=26520300&bank_name=10000&business_no=444444&business_type=14900&card_id=622384609891538799&spbillno=222222&spid=11111&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:38:23,078 T9352 INFO guocai_txj.py|181|进行MD5运算后sign_md5=1895e4e1ec4dac1e6b375308704ad33e
2016-08-23 15:38:23,102 T9352 INFO guocai_txj.py|186|cipher_data[SODVO6AFuQLIM2EDFl268A8QNO4pgjH8NQgSX1bowjmxJqlbPCfCM1YudXSdYehloRrydLWzcxpDQhGGFsYaZn85I8PpUMPrTNRtcYBINQHcU36domMcUrG44N02C/DH4SyMVijVcuuaLhGlBqz57DeIx44oEVV9A2i3n2H1jT4=VASLU3S5IM2eESm1X6992Gtvcugc/fPMeSAgtvF41uzOlQXpP7rnrKo2bu0drX/5LwHAcoqe/M0s6FMqI9qUBT0+7hwUy1urRK3FB0E3P7xbe0dcqb8ZksyFBjaTTvwd8HWucWUBmbrgTCxtAYQjCCqj5F2GjC5EVw5INmv8GZU=UKycAIGCPTMkpfDl2kvACfnvYGvjOaZY3Yz6lcSvxzdRUSMNmOUK4oIHQEqePBbLKI51JFPw0N2ndo4phHFcsWHSr1xXcNTGBCYZ+MLG325xxDlDbIIxDaUJHnTb6NE4uWkDG6Vg6rNveQw2BbNVd7vm06bLg8rZSbag5NUntJo=]
2016-08-23 15:38:23,108 T9352 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:38:23,114 T9352 INFO guocai_txj.py|196|组件[PY_MsgAddHead]执行开始
2016-08-23 15:38:23,117 T9352 INFO guocai_txj.py|199|resp=[POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1
Content-Length: 546
Host: apitest.tfb8.com
Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi
Accept-Encoding: UTF-8, deflate
Cache-Control: no-cache
Accept-Language: zh-cn
Content-Type: application/x-www-form-urlencoded
Connection: Keep-Alive
Accept: image/gif, */*
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)

cipher_data=SODVO6AFuQLIM2EDFl268A8QNO4pgjH8NQgSX1bowjmxJqlbPCfCM1YudXSdYehloRrydLWzcxpDQhGGFsYaZn85I8PpUMPrTNRtcYBINQHcU36domMcUrG44N02C%2FDH4SyMVijVcuuaLhGlBqz57DeIx44oEVV9A2i3n2H1jT4%3DVASLU3S5IM2eESm1X6992Gtvcugc%2FfPMeSAgtvF41uzOlQXpP7rnrKo2bu0drX%2F5LwHAcoqe%2FM0s6FMqI9qUBT0%2B7hwUy1urRK3FB0E3P7xbe0dcqb8ZksyFBjaTTvwd8HWucWUBmbrgTCxtAYQjCCqj5F2GjC5EVw5INmv8GZU%3DUKycAIGCPTMkpfDl2kvACfnvYGvjOaZY3Yz6lcSvxzdRUSMNmOUK4oIHQEqePBbLKI51JFPw0N2ndo4phHFcsWHSr1xXcNTGBCYZ%2BMLG325xxDlDbIIxDaUJHnTb6NE4uWkDG6Vg6rNveQw2BbNVd7vm06bLg8rZSbag5NUntJo%3D]
2016-08-23 15:38:23,127 T9352 INFO guocai_txj.py|200|组件[PY_MsgAddHead]执行结束
2016-08-23 15:38:23,134 T9352 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 15:38:23,138 T9352 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 15:38:23,145 T9352 INFO guocai_txj.py|209|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 15:38:23,150 T9352 INFO guocai_txj.py|210|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 15:38:23,155 T9352 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:38:23,161 T9352 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:38:23,165 T9352 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:38:23,171 T9352 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:38:23,178 T9352 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:38:23,204 T9352 INFO 报文发往送到GAPS成功
2016-08-23 15:38:23,207 T9352 INFO 
--------------提交缓冲日志 END[2016-08-23 15:38:23.208000]---------------

2016-08-23 15:38:23,319 T11372 INFO 从GAPS接收到的数据：【HTTP/1.1 200 OK
Date: Tue, 23 Aug 2016 07:46:00 GMT
Server: Apache/2.2.29 (Unix) DAV/2
Vary: Accept-Encoding
Content-Type: application/xml;charset=UTF-8
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked

87
<?xml version="1.0" encoding="UTF-8" ?><root><retcode>207502</retcode><retmsg>峰烽璇</retmsg><tid>api_acp_single</tid></root>

0

】
2016-08-23 15:38:23,354 T11372 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:38:23,357 T11372 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:38:23,365 T11372 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:38:23,374 T11372 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:38:23,381 T11372 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:38:23,392 T11372 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
cipher_data:'cipher_data=SODVO6AFuQLIM2EDFl268A8QNO4pgjH8NQgSX1bowjmxJqlbPCfCM1Yud
XSdYehloRrydLWzcxpDQhGGFsYaZn85I8PpUMPrTNRtcYBINQHcU36domMcUrG44N02C%2
FDH4SyMVijVcuuaLhGlBqz57DeIx44oEVV9A2i3n2H1jT4%3DVASLU3S5IM2eESm1X6992
Gtvcugc%2FfPMeSAgtvF41uzOlQXpP7rnrKo2bu0drX%2F5LwHAcoqe%2FM0s6FMqI9qUB
T0%2B7hwUy1urRK3FB0E3P7xbe0dcqb8ZksyFBjaTTvwd8HWucWUBmbrgTCxtAYQjCCqj5
F2GjC5EVw5INmv8GZU%3DUKycAIGCPTMkpfDl2kvACfnvYGvjOaZY3Yz6lcSvxzdRUSMNm
OUK4oIHQEqePBbLKI51JFPw0N2ndo4phHFcsWHSr1xXcNTGBCYZ%2BMLG325xxDlDbIIxD
aUJHnTb6NE4uWkDG6Vg6rNveQw2BbNVd7vm06bLg8rZSbag5NUntJo%3D'
commbuf:'HTTP/1.1 200 OK\r\nDate: Tue, 23 Aug 2016 07:46:00 GMT\r\nServer:
Apache/2.2.29 (Unix) DAV/2\r\nVary: Accept-Encoding\r\nContent-Type:
application/xml;charset=UTF-8\r\nKeep-Alive: timeout=5,
max=100\r\nConnection: Keep-Alive\r\nTransfer-Encoding:
chunked\r\n\r\n87\r\n<?xml version="1.0" encoding="UTF-8" ?><root><ret
code>207502</retcode><retmsg>\xe5\x95\x86\xe6\x88\xb7\xe5\x8f\xb7\xe9\
x94\x99\xe8\xaf\xaf</retmsg><tid>api_acp_single</tid></root>\n\r\n0\r\
n\r\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
546\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=SODVO6AFuQ
LIM2EDFl268A8QNO4pgjH8NQgSX1bowjmxJqlbPCfCM1YudXSdYehloRrydLWzcxpDQhGG
FsYaZn85I8PpUMPrTNRtcYBINQHcU36domMcUrG44N02C%2FDH4SyMVijVcuuaLhGlBqz5
7DeIx44oEVV9A2i3n2H1jT4%3DVASLU3S5IM2eESm1X6992Gtvcugc%2FfPMeSAgtvF41u
zOlQXpP7rnrKo2bu0drX%2F5LwHAcoqe%2FM0s6FMqI9qUBT0%2B7hwUy1urRK3FB0E3P7
xbe0dcqb8ZksyFBjaTTvwd8HWucWUBmbrgTCxtAYQjCCqj5F2GjC5EVw5INmv8GZU%3DUK
ycAIGCPTMkpfDl2kvACfnvYGvjOaZY3Yz6lcSvxzdRUSMNmOUK4oIHQEqePBbLKI51JFPw
0N2ndo4phHFcsWHSr1xXcNTGBCYZ%2BMLG325xxDlDbIIxDaUJHnTb6NE4uWkDG6Vg6rNv
eQw2BbNVd7vm06bLg8rZSbag5NUntJo%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:38:23,460 T11372 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:38:23,467 T11372 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:38:23,471 T11372 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:38:23,477 T11372 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:38:23,483 T11372 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:38:23,520 T11372 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:38:23,523 T11372 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:38:23,529 T11372 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:38:23,532 T11372 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:38:23,569 T11372 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:38:23,572 T11372 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:38:23,576 T11372 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:38:23,611 T11372 INFO guocai_txj.py|260|执行['remote2local'=='local2remote']
2016-08-23 15:38:23,615 T11372 INFO guocai_txj.py|265|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:38:23,619 T11372 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:38:23,655 T11372 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:38:23,663 T11372 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name': u'10000',
u'cre_id': '', u'cre_type': '', u'tran_amt': u'10000', u'card_prov':
'', u'mobile': '', u'md5_sign': '', u'true_name': u'11111',
u'card_id': u'622384609891538799', u'spbillno': u'222222',
u'card_type': '', u'postscript': '', u'TransCode':
u'api_acp_single.cgi', u'purpose': '', u'spid': u'11111',
u'business_no': u'444444', u'bank_ins_code': u'26520300', u'ver':
u'1.0', u'cur_type': ''}}
cipher_data:'cipher_data=SODVO6AFuQLIM2EDFl268A8QNO4pgjH8NQgSX1bowjmxJqlbPCfCM1Yud
XSdYehloRrydLWzcxpDQhGGFsYaZn85I8PpUMPrTNRtcYBINQHcU36domMcUrG44N02C%2
FDH4SyMVijVcuuaLhGlBqz57DeIx44oEVV9A2i3n2H1jT4%3DVASLU3S5IM2eESm1X6992
Gtvcugc%2FfPMeSAgtvF41uzOlQXpP7rnrKo2bu0drX%2F5LwHAcoqe%2FM0s6FMqI9qUB
T0%2B7hwUy1urRK3FB0E3P7xbe0dcqb8ZksyFBjaTTvwd8HWucWUBmbrgTCxtAYQjCCqj5
F2GjC5EVw5INmv8GZU%3DUKycAIGCPTMkpfDl2kvACfnvYGvjOaZY3Yz6lcSvxzdRUSMNm
OUK4oIHQEqePBbLKI51JFPw0N2ndo4phHFcsWHSr1xXcNTGBCYZ%2BMLG325xxDlDbIIxD
aUJHnTb6NE4uWkDG6Vg6rNveQw2BbNVd7vm06bLg8rZSbag5NUntJo%3D'
commbuf:'HTTP/1.1 200 OK\r\nDate: Tue, 23 Aug 2016 07:46:00 GMT\r\nServer:
Apache/2.2.29 (Unix) DAV/2\r\nVary: Accept-Encoding\r\nContent-Type:
application/xml;charset=UTF-8\r\nKeep-Alive: timeout=5,
max=100\r\nConnection: Keep-Alive\r\nTransfer-Encoding:
chunked\r\n\r\n87\r\n<?xml version="1.0" encoding="UTF-8" ?><root><ret
code>207502</retcode><retmsg>\xe5\x95\x86\xe6\x88\xb7\xe5\x8f\xb7\xe9\
x94\x99\xe8\xaf\xaf</retmsg><tid>api_acp_single</tid></root>\n\r\n0\r\
n\r\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
546\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=SODVO6AFuQ
LIM2EDFl268A8QNO4pgjH8NQgSX1bowjmxJqlbPCfCM1YudXSdYehloRrydLWzcxpDQhGG
FsYaZn85I8PpUMPrTNRtcYBINQHcU36domMcUrG44N02C%2FDH4SyMVijVcuuaLhGlBqz5
7DeIx44oEVV9A2i3n2H1jT4%3DVASLU3S5IM2eESm1X6992Gtvcugc%2FfPMeSAgtvF41u
zOlQXpP7rnrKo2bu0drX%2F5LwHAcoqe%2FM0s6FMqI9qUBT0%2B7hwUy1urRK3FB0E3P7
xbe0dcqb8ZksyFBjaTTvwd8HWucWUBmbrgTCxtAYQjCCqj5F2GjC5EVw5INmv8GZU%3DUK
ycAIGCPTMkpfDl2kvACfnvYGvjOaZY3Yz6lcSvxzdRUSMNmOUK4oIHQEqePBbLKI51JFPw
0N2ndo4phHFcsWHSr1xXcNTGBCYZ%2BMLG325xxDlDbIIxDaUJHnTb6NE4uWkDG6Vg6rNv
eQw2BbNVd7vm06bLg8rZSbag5NUntJo%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:38:23,733 T11372 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:38:23,746 T11372 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:38:23,750 T11372 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:38:23,756 T11372 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:38:23,762 T11372 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:38:23,767 T11372 INFO guocai_txj.py|289|转换后的字典resp_dict={u'root': {u'tid': u'api_acp_single', u'retcode': u'207502', u'retmsg': u'\u5546\u6237\u53f7\u9519\u8bef'}}
2016-08-23 15:38:23,773 T11372 INFO guocai_txj.py|291|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:38:23,780 T11372 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行开始
2016-08-23 15:38:23,785 T11372 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行结束
2016-08-23 15:38:23,790 T11372 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:38:23,796 T11372 INFO guocai_txj.py|174|对字典req={u'root': {u'tid': u'api_acp_single', u'retcode': u'207502', u'retmsg': u'\u5546\u6237\u53f7\u9519\u8bef'}}进行处理
2016-08-23 15:38:23,802 T11372 INFO guocai_txj.py|176|字典root={u'tid': u'api_acp_single', u'retcode': u'207502', u'retmsg': u'\u5546\u6237\u53f7\u9519\u8bef'}
2016-08-23 15:38:23,805 T11372 INFO guocai_txj.py|178|排序后的数据signdata=tid=api_acp_single&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:38:23,811 T11372 INFO guocai_txj.py|181|进行MD5运算后sign_md5=84a2afe3c78aef0c47509ba67328cddd
2016-08-23 15:38:23,825 T11372 INFO guocai_txj.py|186|cipher_data[QoFYvMQ561S6bjE7QAGRrvUpTb0W1L2DkF6pN/DsJZZw7AOXgKtOY20emDlVTTr57z3qB4RaW0pb3L4CqzsN/OdBlx/EU5SlSFfRY07Z6rSRsL6YPAOv2Q5Hwrf9ffZjEdbj6+VfLXYDhsmu6zwDaIosaT9bzXWryYErlMDRJCg=]
2016-08-23 15:38:23,832 T11372 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:38:23,839 T11372 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 15:38:23,845 T11372 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 15:38:23,857 T11372 INFO guocai_txj.py|209|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 15:38:23,861 T11372 INFO guocai_txj.py|210|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 15:38:23,868 T11372 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:38:23,878 T11372 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:38:23,881 T11372 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:38:23,885 T11372 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:38:23,891 T11372 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:38:23,917 T11372 INFO 报文发往送到GAPS成功
2016-08-23 15:38:23,918 T11372 INFO 
--------------提交缓冲日志 END[2016-08-23 15:38:23.919000]---------------

2016-08-23 15:38:23,936 T9352 INFO 无数据break
2016-08-23 15:38:24,009 T11372 INFO 无数据break
2016-08-23 15:40:55,447 T13080 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 15:41:00,167 T1164 INFO 从GAPS接收到的数据：【00000617<?xml version='1.0' encoding="GB2312" ?><root><ver>1.0</ver><spid>1800631877</spid><spbillno>222223</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>13800000000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type><card_id>622908115000352211</card_id><card_type>0</card_type><bank_name>兴业银行</bank_name><bank_ins_code>03090000</bank_ins_code><card_prov>上海</card_prov><purpose>通讯费</purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 15:41:00,190 T1164 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:41:00,193 T1164 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:41:00,197 T1164 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:41:00,200 T1164 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:41:00,203 T1164 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:41:00,207 T1164 INFO 交易字典内容输出：AttrDict{
commbuf:'00000617<?xml version=\'1.0\' encoding="GB2312" ?><root><ver>1.0</ver
><spid>1800631877</spid><spbillno>222223</spbillno><business_type>1490
0</business_type><business_no>444444</business_no><tran_amt>10000</tra
n_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>138000
00000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type
><card_id>622908115000352211</card_id><card_type>0</card_type><bank_na
me>\xd0\xcb\xd2\xb5\xd2\xf8\xd0\xd0</bank_name><bank_ins_code>03090000
</bank_ins_code><card_prov>\xc9\xcf\xba\xa3</card_prov><purpose>\xcd\x
a8\xd1\xb6\xb7\xd1</purpose><postscript></postscript><md5_sign></md5_s
ign><TransCode>api_acp_single.cgi</TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:41:00,220 T1164 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:41:00,226 T1164 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:41:00,227 T1164 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:41:00,232 T1164 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:41:00,233 T1164 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:41:00,243 T1164 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:41:00,246 T1164 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:41:00,253 T1164 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:41:00,256 T1164 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:41:00,266 T1164 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:41:00,267 T1164 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:41:00,273 T1164 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:41:00,282 T1164 INFO guocai_txj.py|260|执行['local2remote'=='local2remote']
2016-08-23 15:41:00,283 T1164 INFO guocai_txj.py|262|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 15:41:00,292 T1164 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:41:00,312 T1164 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 15:41:00,315 T1164 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000617<?xml version=\'1.0\' encoding="GB2312" ?><root><ver>1.0</ver
><spid>1800631877</spid><spbillno>222223</spbillno><business_type>1490
0</business_type><business_no>444444</business_no><tran_amt>10000</tra
n_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>138000
00000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type
><card_id>622908115000352211</card_id><card_type>0</card_type><bank_na
me>\xd0\xcb\xd2\xb5\xd2\xf8\xd0\xd0</bank_name><bank_ins_code>03090000
</bank_ins_code><card_prov>\xc9\xcf\xba\xa3</card_prov><purpose>\xcd\x
a8\xd1\xb6\xb7\xd1</purpose><postscript></postscript><md5_sign></md5_s
ign><TransCode>api_acp_single.cgi</TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:41:00,339 T1164 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:41:00,351 T1164 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:41:00,354 T1164 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:41:00,358 T1164 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:41:00,362 T1164 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:41:00,367 T1164 INFO guocai_txj.py|289|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718', u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov': u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622908115000352211', u'spbillno': u'222223', u'card_type': u'0', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no': u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type': u'1'}}
2016-08-23 15:41:00,371 T1164 INFO guocai_txj.py|291|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:41:00,375 T1164 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行开始
2016-08-23 15:41:00,380 T1164 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行结束
2016-08-23 15:41:00,384 T1164 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:41:00,388 T1164 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718', u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov': u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622908115000352211', u'spbillno': u'222223', u'card_type': u'0', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no': u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type': u'1'}}进行处理
2016-08-23 15:41:00,394 T1164 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718', u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov': u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622908115000352211', u'spbillno': u'222223', u'card_type': u'0', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no': u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type': u'1'}
2016-08-23 15:41:00,403 T1164 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 178, in PY_GetCipher
    log.info(jyzd.get("systemsign",""),'%s|%s|排序后的数据signdata=%s',FN(),LN(),str(signdata))
            signdata = u'bank_ins_code=03090000&bank_name=\u5174\u4e1a\u94f6\u884c&business_no=444444&business_type=14900&card_id=622908115000352211&card_prov=\u4e0a\u6d77&card_type=0&cre_id=371324198806065718&cre_type=1&cur_type=1&mobile=13800000000&purpose=\u901a\u8baf\u8d39&spbillno=222223&spid=1800631877&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053'
                root = {u'TransCode': u'api_acp_single.cgi',
                        u'bank_ins_code': u'03090000',
                        u'bank_name': u'\u5174\u4e1a\u94f6\u884c',
                        u'business_no': u'444444',
                       ...
                 req = {u'root': {...}}
                jyzd = AttrDict{
                       KEY:'2d3c22048b300db8b347b7024b378053'
                       REQ:{u'root': {u'business_type': u'14900', u'bank_name':
                       u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718',
                       ...
UnicodeEncodeError: 'ascii' codec can't encode characters in position 33-36: ordinal not in range(128)

2016-08-23 15:41:00,471 T1164 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name':
u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718',
u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov':
u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '',
u'true_name': u'11111', u'card_id': u'622908115000352211',
u'spbillno': u'222223', u'card_type': u'0', u'postscript': '',
u'TransCode': u'api_acp_single.cgi', u'purpose':
u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no':
u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type':
u'1'}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 178, in PY_GetCipher\n    log.info(jyzd.g
et("systemsign",""),\'%s|%s|\xc5\xc5\xd0\xf2\xba\xf3\xb5\xc4\xca\xfd\x
be\xddsigndata=%s\',FN(),LN(),str(signdata))\n            signdata = u
\'bank_ins_code=03090000&bank_name=\\u5174\\u4e1a\\u94f6\\u884c&busine
ss_no=444444&business_type=14900&card_id=622908115000352211&card_prov=
\\u4e0a\\u6d77&card_type=0&cre_id=371324198806065718&cre_type=1&cur_ty
pe=1&mobile=13800000000&purpose=\\u901a\\u8baf\\u8d39&spbillno=222223&
spid=1800631877&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b3
00db8b347b7024b378053\'\n                root = {u\'TransCode\':
u\'api_acp_single.cgi\',\n                        u\'bank_ins_code\':
u\'03090000\',\n                        u\'bank_name\':
u\'\\u5174\\u4e1a\\u94f6\\u884c\',\n
u\'business_no\': u\'444444\',\n                       ...\n
req = {u\'root\': {...}}\n                jyzd = AttrDict{\n
KEY:\'2d3c22048b300db8b347b7024b378053\'\n
REQ:{u\'root\': {u\'business_type\': u\'14900\', u\'bank_name\':\n
u\'\\u5174\\u4e1a\\u94f6\\u884c\', u\'cre_id\':
u\'371324198806065718\',\n
...\nUnicodeEncodeError: \'ascii\' codec can\'t encode characters in
position 33-36: ordinal not in range(128)\n'
commbuf:'00000617<?xml version=\'1.0\' encoding="GB2312" ?><root><ver>1.0</ver
><spid>1800631877</spid><spbillno>222223</spbillno><business_type>1490
0</business_type><business_no>444444</business_no><tran_amt>10000</tra
n_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>138000
00000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type
><card_id>622908115000352211</card_id><card_type>0</card_type><bank_na
me>\xd0\xcb\xd2\xb5\xd2\xf8\xd0\xd0</bank_name><bank_ins_code>03090000
</bank_ins_code><card_prov>\xc9\xcf\xba\xa3</card_prov><purpose>\xcd\x
a8\xd1\xb6\xb7\xd1</purpose><postscript></postscript><md5_sign></md5_s
ign><TransCode>api_acp_single.cgi</TransCode></root>'
input:{'_2': 'jyzd/yymc=[/xesb/req/yymc]', '_1': '0'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:41:00,502 T1164 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 308, in SCNTR_CallSubFlow
    ret = flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 115, in goflow
    curr = curr.go_next( ret )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\flow\flow_utils.py", line 66, in go_next
    return self.next[ret][1]
                self = <flow.flow_utils.FlowNode instance at 0x0319E828>
                 ret = -1
KeyError: -1

2016-08-23 15:41:00,561 T1164 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name':
u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718',
u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov':
u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '',
u'true_name': u'11111', u'card_id': u'622908115000352211',
u'spbillno': u'222223', u'card_type': u'0', u'postscript': '',
u'TransCode': u'api_acp_single.cgi', u'purpose':
u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no':
u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type':
u'1'}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 308, in SCNTR_CallSubFlow\n    ret =
flow.flow_utils.goflow("../flow/%s.flow"%subflow,jyzd)\n  File "H:\\sh
are\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\
xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py",
line 115, in goflow\n    curr = curr.go_next( ret )\n  File "H:\\share
\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1
\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_txj\\bin\\flow\\flow_utils.py", line
66, in go_next\n    return self.next[ret][1]\n                self =
<flow.flow_utils.FlowNode instance at 0x0319E828>\n
ret = -1\nKeyError: -1\n'
commbuf:'00000617<?xml version=\'1.0\' encoding="GB2312" ?><root><ver>1.0</ver
><spid>1800631877</spid><spbillno>222223</spbillno><business_type>1490
0</business_type><business_no>444444</business_no><tran_amt>10000</tra
n_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>138000
00000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type
><card_id>622908115000352211</card_id><card_type>0</card_type><bank_na
me>\xd0\xcb\xd2\xb5\xd2\xf8\xd0\xd0</bank_name><bank_ins_code>03090000
</bank_ins_code><card_prov>\xc9\xcf\xba\xa3</card_prov><purpose>\xcd\x
a8\xd1\xb6\xb7\xd1</purpose><postscript></postscript><md5_sign></md5_s
ign><TransCode>api_acp_single.cgi</TransCode></root>'
input:{'_2': 'jyzd/yymc=[/xesb/req/yymc]', '_1': '0'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:41:00,588 T1164 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:41:00,592 T1164 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:41:00,595 T1164 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:41:00,599 T1164 INFO 从三方接收到的数据：【】
2016-08-23 15:41:00,601 T1164 INFO 报文发往送到GAPS成功
2016-08-23 15:41:00,604 T1164 INFO 
--------------提交缓冲日志 END[2016-08-23 15:41:00.604000]---------------

2016-08-23 15:47:54,436 T11416 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 15:47:56,516 T10592 INFO 从GAPS接收到的数据：【00000617<?xml version='1.0' encoding="GB2312" ?><root><ver>1.0</ver><spid>1800631877</spid><spbillno>222223</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>13800000000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type><card_id>622908115000352211</card_id><card_type>0</card_type><bank_name>兴业银行</bank_name><bank_ins_code>03090000</bank_ins_code><card_prov>上海</card_prov><purpose>通讯费</purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 15:47:56,555 T10592 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:47:56,559 T10592 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:47:56,563 T10592 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:47:56,569 T10592 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:47:56,575 T10592 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:47:56,581 T10592 INFO 交易字典内容输出：AttrDict{
commbuf:'00000617<?xml version=\'1.0\' encoding="GB2312" ?><root><ver>1.0</ver
><spid>1800631877</spid><spbillno>222223</spbillno><business_type>1490
0</business_type><business_no>444444</business_no><tran_amt>10000</tra
n_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>138000
00000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type
><card_id>622908115000352211</card_id><card_type>0</card_type><bank_na
me>\xd0\xcb\xd2\xb5\xd2\xf8\xd0\xd0</bank_name><bank_ins_code>03090000
</bank_ins_code><card_prov>\xc9\xcf\xba\xa3</card_prov><purpose>\xcd\x
a8\xd1\xb6\xb7\xd1</purpose><postscript></postscript><md5_sign></md5_s
ign><TransCode>api_acp_single.cgi</TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:47:56,598 T10592 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:47:56,607 T10592 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:47:56,608 T10592 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:47:56,611 T10592 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:47:56,614 T10592 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:47:56,625 T10592 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:47:56,627 T10592 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:47:56,634 T10592 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:47:56,638 T10592 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:47:56,647 T10592 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:47:56,648 T10592 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:47:56,657 T10592 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:47:56,667 T10592 INFO guocai_txj.py|260|执行['local2remote'=='local2remote']
2016-08-23 15:47:56,670 T10592 INFO guocai_txj.py|262|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 15:47:56,680 T10592 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:47:56,697 T10592 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 15:47:56,700 T10592 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000617<?xml version=\'1.0\' encoding="GB2312" ?><root><ver>1.0</ver
><spid>1800631877</spid><spbillno>222223</spbillno><business_type>1490
0</business_type><business_no>444444</business_no><tran_amt>10000</tra
n_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>138000
00000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type
><card_id>622908115000352211</card_id><card_type>0</card_type><bank_na
me>\xd0\xcb\xd2\xb5\xd2\xf8\xd0\xd0</bank_name><bank_ins_code>03090000
</bank_ins_code><card_prov>\xc9\xcf\xba\xa3</card_prov><purpose>\xcd\x
a8\xd1\xb6\xb7\xd1</purpose><postscript></postscript><md5_sign></md5_s
ign><TransCode>api_acp_single.cgi</TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:47:56,726 T10592 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:47:56,739 T10592 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:47:56,742 T10592 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:47:56,746 T10592 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:47:56,750 T10592 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:47:56,753 T10592 INFO guocai_txj.py|289|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718', u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov': u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622908115000352211', u'spbillno': u'222223', u'card_type': u'0', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no': u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type': u'1'}}
2016-08-23 15:47:56,759 T10592 INFO guocai_txj.py|291|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:47:56,765 T10592 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行开始
2016-08-23 15:47:56,767 T10592 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行结束
2016-08-23 15:47:56,773 T10592 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:47:56,776 T10592 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718', u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov': u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622908115000352211', u'spbillno': u'222223', u'card_type': u'0', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no': u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type': u'1'}}进行处理
2016-08-23 15:47:56,782 T10592 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718', u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov': u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622908115000352211', u'spbillno': u'222223', u'card_type': u'0', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no': u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type': u'1'}
2016-08-23 15:47:56,788 T10592 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=03090000&bank_name=翠惰&business_no=444444&business_type=14900&card_id=622908115000352211&card_prov=涓娴&card_type=0&cre_id=371324198806065718&cre_type=1&cur_type=1&mobile=13800000000&purpose=璁璐&spbillno=222223&spid=1800631877&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:47:56,798 T10592 INFO guocai_txj.py|181|进行MD5运算后sign_md5=9aecefed5675fe969a3d2387fd7303c2
2016-08-23 15:47:56,828 T10592 INFO guocai_txj.py|186|cipher_data[kVEOOZOxfE4SJg1QjsgwW7yUOfKzo1R4KRqX5pPlzGNksWO+gEqvGAghTLtte7vGC/Q3Xph6ODj8fl0yKMnyU8ekKx540Mulus2xbxEZq2OrMFSdmedPqhsACHAJK/Rg1DjVw3lEUEzd7dJQliwX0uwYcUFt0JBlCDilUml0C6I=KNDY+M/TyNkiVY1CClOXWloCONKDavRScEFSI8T4gZ1w+OGG5BmTgTRDbuulW+TFGKa+fOCtuuVw8Er1cB6jHGiICdsFwvAH2BZlhsXnl9+kv768pSlFTwSLNFJ9SAtGlfhKBV7ZGjQmPqU+WNjnFO2JcPaBWS5/1cL0rUCcabs=PommweP0Lx3t0KyA5216WPtylmtSicLSiiJCzbkImMbYHkSgRY5iFxjeCuSoDdRaoPLLoSK37+3baypynmbuxnNrisik69Z7goggUwSJEuNrQH6oNb+60zE1zBjnLd5F2YM3o/QZ3iJ68D26d57jWrSd9NydLAPXFPp6oiEKHx8=f3/49P7Xgc45y6QBQRjyH5YhOsICaO2vgQqnM6FUlciCo5VcWRoVPlRm10duIWXE601cx2VVQA3ZdD71+Wc60sGkIRo+eMz6pJowmDe5qdGmq/M0SY7qaNxt1/zYKCHhGSxhKXFRKj7yGqWGcXf7bp62/UGIj6Mg4duMBEeMRiU=]
2016-08-23 15:47:56,835 T10592 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:47:56,841 T10592 INFO guocai_txj.py|196|组件[PY_MsgAddHead]执行开始
2016-08-23 15:47:56,844 T10592 INFO guocai_txj.py|199|resp=[POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1
Content-Length: 748
Host: apitest.tfb8.com
Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi
Accept-Encoding: UTF-8, deflate
Cache-Control: no-cache
Accept-Language: zh-cn
Content-Type: application/x-www-form-urlencoded
Connection: Keep-Alive
Accept: image/gif, */*
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)

cipher_data=kVEOOZOxfE4SJg1QjsgwW7yUOfKzo1R4KRqX5pPlzGNksWO%2BgEqvGAghTLtte7vGC%2FQ3Xph6ODj8fl0yKMnyU8ekKx540Mulus2xbxEZq2OrMFSdmedPqhsACHAJK%2FRg1DjVw3lEUEzd7dJQliwX0uwYcUFt0JBlCDilUml0C6I%3DKNDY%2BM%2FTyNkiVY1CClOXWloCONKDavRScEFSI8T4gZ1w%2BOGG5BmTgTRDbuulW%2BTFGKa%2BfOCtuuVw8Er1cB6jHGiICdsFwvAH2BZlhsXnl9%2Bkv768pSlFTwSLNFJ9SAtGlfhKBV7ZGjQmPqU%2BWNjnFO2JcPaBWS5%2F1cL0rUCcabs%3DPommweP0Lx3t0KyA5216WPtylmtSicLSiiJCzbkImMbYHkSgRY5iFxjeCuSoDdRaoPLLoSK37%2B3baypynmbuxnNrisik69Z7goggUwSJEuNrQH6oNb%2B60zE1zBjnLd5F2YM3o%2FQZ3iJ68D26d57jWrSd9NydLAPXFPp6oiEKHx8%3Df3%2F49P7Xgc45y6QBQRjyH5YhOsICaO2vgQqnM6FUlciCo5VcWRoVPlRm10duIWXE601cx2VVQA3ZdD71%2BWc60sGkIRo%2BeMz6pJowmDe5qdGmq%2FM0SY7qaNxt1%2FzYKCHhGSxhKXFRKj7yGqWGcXf7bp62%2FUGIj6Mg4duMBEeMRiU%3D]
2016-08-23 15:47:56,851 T10592 INFO guocai_txj.py|200|组件[PY_MsgAddHead]执行结束
2016-08-23 15:47:56,858 T10592 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 15:47:56,861 T10592 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 15:47:56,867 T10592 INFO guocai_txj.py|209|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 15:47:56,869 T10592 INFO guocai_txj.py|210|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 15:47:56,875 T10592 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:47:56,881 T10592 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:47:56,884 T10592 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:47:56,888 T10592 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:47:56,894 T10592 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:47:56,917 T10592 INFO 报文发往送到GAPS成功
2016-08-23 15:47:56,920 T10592 INFO 
--------------提交缓冲日志 END[2016-08-23 15:47:56.920000]---------------

2016-08-23 15:47:57,101 T12732 INFO 从GAPS接收到的数据：【HTTP/1.1 200 OK
Date: Tue, 23 Aug 2016 07:55:34 GMT
Server: Apache/2.2.29 (Unix) DAV/2
Vary: Accept-Encoding
Content-Type: application/xml;charset=UTF-8
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked

93
<?xml version="1.0" encoding="UTF-8" ?><root><retcode>207531</retcode><retmsg>澶蜂唬ｅ</retmsg><tid>api_acp_single</tid></root>

】
2016-08-23 15:47:57,122 T12732 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:47:57,127 T12732 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:47:57,131 T12732 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:47:57,138 T12732 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:47:57,142 T12732 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:47:57,151 T12732 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name':
u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718',
u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov':
u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '',
u'true_name': u'11111', u'card_id': u'622908115000352211',
u'spbillno': u'222223', u'card_type': u'0', u'postscript': '',
u'TransCode': u'api_acp_single.cgi', u'purpose':
u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no':
u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type':
u'1'}}
cipher_data:'cipher_data=kVEOOZOxfE4SJg1QjsgwW7yUOfKzo1R4KRqX5pPlzGNksWO%2BgEqvGAg
hTLtte7vGC%2FQ3Xph6ODj8fl0yKMnyU8ekKx540Mulus2xbxEZq2OrMFSdmedPqhsACHA
JK%2FRg1DjVw3lEUEzd7dJQliwX0uwYcUFt0JBlCDilUml0C6I%3DKNDY%2BM%2FTyNkiV
Y1CClOXWloCONKDavRScEFSI8T4gZ1w%2BOGG5BmTgTRDbuulW%2BTFGKa%2BfOCtuuVw8
Er1cB6jHGiICdsFwvAH2BZlhsXnl9%2Bkv768pSlFTwSLNFJ9SAtGlfhKBV7ZGjQmPqU%2
BWNjnFO2JcPaBWS5%2F1cL0rUCcabs%3DPommweP0Lx3t0KyA5216WPtylmtSicLSiiJCz
bkImMbYHkSgRY5iFxjeCuSoDdRaoPLLoSK37%2B3baypynmbuxnNrisik69Z7goggUwSJE
uNrQH6oNb%2B60zE1zBjnLd5F2YM3o%2FQZ3iJ68D26d57jWrSd9NydLAPXFPp6oiEKHx8
%3Df3%2F49P7Xgc45y6QBQRjyH5YhOsICaO2vgQqnM6FUlciCo5VcWRoVPlRm10duIWXE6
01cx2VVQA3ZdD71%2BWc60sGkIRo%2BeMz6pJowmDe5qdGmq%2FM0SY7qaNxt1%2FzYKCH
hGSxhKXFRKj7yGqWGcXf7bp62%2FUGIj6Mg4duMBEeMRiU%3D'
commbuf:'HTTP/1.1 200 OK\r\nDate: Tue, 23 Aug 2016 07:55:34 GMT\r\nServer:
Apache/2.2.29 (Unix) DAV/2\r\nVary: Accept-Encoding\r\nContent-Type:
application/xml;charset=UTF-8\r\nKeep-Alive: timeout=5,
max=100\r\nConnection: Keep-Alive\r\nTransfer-Encoding:
chunked\r\n\r\n93\r\n<?xml version="1.0" encoding="UTF-8" ?><root><ret
code>207531</retcode><retmsg>\xe9\x87\x8d\xe5\xa4\x8d\xe7\x9a\x84\xe5\
x95\x86\xe6\x88\xb7\xe4\xbb\xa3\xe6\x89\xa3\xe5\x8d\x95\xe5\x8f\xb7</r
etmsg><tid>api_acp_single</tid></root>\n\r\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
748\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=kVEOOZOxfE
4SJg1QjsgwW7yUOfKzo1R4KRqX5pPlzGNksWO%2BgEqvGAghTLtte7vGC%2FQ3Xph6ODj8
fl0yKMnyU8ekKx540Mulus2xbxEZq2OrMFSdmedPqhsACHAJK%2FRg1DjVw3lEUEzd7dJQ
liwX0uwYcUFt0JBlCDilUml0C6I%3DKNDY%2BM%2FTyNkiVY1CClOXWloCONKDavRScEFS
I8T4gZ1w%2BOGG5BmTgTRDbuulW%2BTFGKa%2BfOCtuuVw8Er1cB6jHGiICdsFwvAH2BZl
hsXnl9%2Bkv768pSlFTwSLNFJ9SAtGlfhKBV7ZGjQmPqU%2BWNjnFO2JcPaBWS5%2F1cL0
rUCcabs%3DPommweP0Lx3t0KyA5216WPtylmtSicLSiiJCzbkImMbYHkSgRY5iFxjeCuSo
DdRaoPLLoSK37%2B3baypynmbuxnNrisik69Z7goggUwSJEuNrQH6oNb%2B60zE1zBjnLd
5F2YM3o%2FQZ3iJ68D26d57jWrSd9NydLAPXFPp6oiEKHx8%3Df3%2F49P7Xgc45y6QBQR
jyH5YhOsICaO2vgQqnM6FUlciCo5VcWRoVPlRm10duIWXE601cx2VVQA3ZdD71%2BWc60s
GkIRo%2BeMz6pJowmDe5qdGmq%2FM0SY7qaNxt1%2FzYKCHhGSxhKXFRKj7yGqWGcXf7bp
62%2FUGIj6Mg4duMBEeMRiU%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:47:57,220 T12732 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:47:57,226 T12732 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:47:57,230 T12732 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:47:57,234 T12732 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:47:57,239 T12732 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:47:57,279 T12732 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:47:57,282 T12732 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:47:57,288 T12732 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:47:57,292 T12732 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:47:57,335 T12732 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:47:57,338 T12732 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:47:57,344 T12732 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:47:57,395 T12732 INFO guocai_txj.py|260|执行['remote2local'=='local2remote']
2016-08-23 15:47:57,398 T12732 INFO guocai_txj.py|265|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:47:57,405 T12732 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:47:57,497 T12732 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:47:57,506 T12732 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name':
u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718',
u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov':
u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '',
u'true_name': u'11111', u'card_id': u'622908115000352211',
u'spbillno': u'222223', u'card_type': u'0', u'postscript': '',
u'TransCode': u'api_acp_single.cgi', u'purpose':
u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no':
u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type':
u'1'}}
cipher_data:'cipher_data=kVEOOZOxfE4SJg1QjsgwW7yUOfKzo1R4KRqX5pPlzGNksWO%2BgEqvGAg
hTLtte7vGC%2FQ3Xph6ODj8fl0yKMnyU8ekKx540Mulus2xbxEZq2OrMFSdmedPqhsACHA
JK%2FRg1DjVw3lEUEzd7dJQliwX0uwYcUFt0JBlCDilUml0C6I%3DKNDY%2BM%2FTyNkiV
Y1CClOXWloCONKDavRScEFSI8T4gZ1w%2BOGG5BmTgTRDbuulW%2BTFGKa%2BfOCtuuVw8
Er1cB6jHGiICdsFwvAH2BZlhsXnl9%2Bkv768pSlFTwSLNFJ9SAtGlfhKBV7ZGjQmPqU%2
BWNjnFO2JcPaBWS5%2F1cL0rUCcabs%3DPommweP0Lx3t0KyA5216WPtylmtSicLSiiJCz
bkImMbYHkSgRY5iFxjeCuSoDdRaoPLLoSK37%2B3baypynmbuxnNrisik69Z7goggUwSJE
uNrQH6oNb%2B60zE1zBjnLd5F2YM3o%2FQZ3iJ68D26d57jWrSd9NydLAPXFPp6oiEKHx8
%3Df3%2F49P7Xgc45y6QBQRjyH5YhOsICaO2vgQqnM6FUlciCo5VcWRoVPlRm10duIWXE6
01cx2VVQA3ZdD71%2BWc60sGkIRo%2BeMz6pJowmDe5qdGmq%2FM0SY7qaNxt1%2FzYKCH
hGSxhKXFRKj7yGqWGcXf7bp62%2FUGIj6Mg4duMBEeMRiU%3D'
commbuf:'HTTP/1.1 200 OK\r\nDate: Tue, 23 Aug 2016 07:55:34 GMT\r\nServer:
Apache/2.2.29 (Unix) DAV/2\r\nVary: Accept-Encoding\r\nContent-Type:
application/xml;charset=UTF-8\r\nKeep-Alive: timeout=5,
max=100\r\nConnection: Keep-Alive\r\nTransfer-Encoding:
chunked\r\n\r\n93\r\n<?xml version="1.0" encoding="UTF-8" ?><root><ret
code>207531</retcode><retmsg>\xe9\x87\x8d\xe5\xa4\x8d\xe7\x9a\x84\xe5\
x95\x86\xe6\x88\xb7\xe4\xbb\xa3\xe6\x89\xa3\xe5\x8d\x95\xe5\x8f\xb7</r
etmsg><tid>api_acp_single</tid></root>\n\r\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
748\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=kVEOOZOxfE
4SJg1QjsgwW7yUOfKzo1R4KRqX5pPlzGNksWO%2BgEqvGAghTLtte7vGC%2FQ3Xph6ODj8
fl0yKMnyU8ekKx540Mulus2xbxEZq2OrMFSdmedPqhsACHAJK%2FRg1DjVw3lEUEzd7dJQ
liwX0uwYcUFt0JBlCDilUml0C6I%3DKNDY%2BM%2FTyNkiVY1CClOXWloCONKDavRScEFS
I8T4gZ1w%2BOGG5BmTgTRDbuulW%2BTFGKa%2BfOCtuuVw8Er1cB6jHGiICdsFwvAH2BZl
hsXnl9%2Bkv768pSlFTwSLNFJ9SAtGlfhKBV7ZGjQmPqU%2BWNjnFO2JcPaBWS5%2F1cL0
rUCcabs%3DPommweP0Lx3t0KyA5216WPtylmtSicLSiiJCzbkImMbYHkSgRY5iFxjeCuSo
DdRaoPLLoSK37%2B3baypynmbuxnNrisik69Z7goggUwSJEuNrQH6oNb%2B60zE1zBjnLd
5F2YM3o%2FQZ3iJ68D26d57jWrSd9NydLAPXFPp6oiEKHx8%3Df3%2F49P7Xgc45y6QBQR
jyH5YhOsICaO2vgQqnM6FUlciCo5VcWRoVPlRm10duIWXE601cx2VVQA3ZdD71%2BWc60s
GkIRo%2BeMz6pJowmDe5qdGmq%2FM0SY7qaNxt1%2FzYKCHhGSxhKXFRKj7yGqWGcXf7bp
62%2FUGIj6Mg4duMBEeMRiU%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:47:57,648 T12732 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:47:57,667 T12732 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:47:57,673 T12732 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:47:57,684 T12732 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:47:57,690 T12732 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:47:57,697 T12732 INFO guocai_txj.py|289|转换后的字典resp_dict={u'root': {u'tid': u'api_acp_single', u'retcode': u'207531', u'retmsg': u'\u91cd\u590d\u7684\u5546\u6237\u4ee3\u6263\u5355\u53f7'}}
2016-08-23 15:47:57,701 T12732 INFO guocai_txj.py|291|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:47:57,711 T12732 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行开始
2016-08-23 15:47:57,732 T12732 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行结束
2016-08-23 15:47:57,742 T12732 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:47:57,749 T12732 INFO guocai_txj.py|174|对字典req={u'root': {u'tid': u'api_acp_single', u'retcode': u'207531', u'retmsg': u'\u91cd\u590d\u7684\u5546\u6237\u4ee3\u6263\u5355\u53f7'}}进行处理
2016-08-23 15:47:57,756 T12732 INFO guocai_txj.py|176|字典root={u'tid': u'api_acp_single', u'retcode': u'207531', u'retmsg': u'\u91cd\u590d\u7684\u5546\u6237\u4ee3\u6263\u5355\u53f7'}
2016-08-23 15:47:57,762 T12732 INFO guocai_txj.py|178|排序后的数据signdata=tid=api_acp_single&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:47:57,773 T12732 INFO guocai_txj.py|181|进行MD5运算后sign_md5=84a2afe3c78aef0c47509ba67328cddd
2016-08-23 15:47:57,790 T12732 INFO guocai_txj.py|186|cipher_data[LUSnK+k8S60NjWOGMglg7nidx+2Vy6pBmts4b8un4KAOJvjMbTGUyaUjl0f67lsqNIQNqdOXrrQmwuTCJurk+WsypuD3KDLSJIGDvxCYj9cK7KDSk6cPE7dbqeNKQi9Xznx19OZYUyLUc3OIinb4NXV7WwhaZYb5/97s4Jk5Ca4=]
2016-08-23 15:47:57,796 T12732 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:47:57,803 T12732 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 15:47:57,809 T12732 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 15:47:57,816 T12732 INFO guocai_txj.py|209|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 15:47:57,822 T12732 INFO guocai_txj.py|210|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 15:47:57,832 T12732 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:47:57,934 T12732 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:47:57,940 T12732 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:47:57,984 T12732 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:47:58,066 T12732 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:47:58,210 T12732 INFO 报文发往送到GAPS成功
2016-08-23 15:47:58,214 T12732 INFO 
--------------提交缓冲日志 END[2016-08-23 15:47:58.215000]---------------

2016-08-23 15:47:58,224 T12732 INFO 从GAPS接收到的数据：【0

】
2016-08-23 15:47:58,246 T10592 INFO 无数据break
2016-08-23 15:47:58,289 T12732 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:47:58,296 T12732 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:47:58,331 T12732 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:47:58,345 T12732 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:47:58,374 T12732 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:47:58,394 T12732 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'tid': u'api_acp_single', u'retcode': u'207531',
u'retmsg': u'\u91cd\u590d\u7684\u5546\u6237\u4ee3\u6263\u5355\u53f7'}}
cipher_data:'cipher_data=LUSnK%2Bk8S60NjWOGMglg7nidx%2B2Vy6pBmts4b8un4KAOJvjMbTGUy
aUjl0f67lsqNIQNqdOXrrQmwuTCJurk%2BWsypuD3KDLSJIGDvxCYj9cK7KDSk6cPE7dbq
eNKQi9Xznx19OZYUyLUc3OIinb4NXV7WwhaZYb5%2F97s4Jk5Ca4%3D'
commbuf:'0\r\n\r\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
748\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=kVEOOZOxfE
4SJg1QjsgwW7yUOfKzo1R4KRqX5pPlzGNksWO%2BgEqvGAghTLtte7vGC%2FQ3Xph6ODj8
fl0yKMnyU8ekKx540Mulus2xbxEZq2OrMFSdmedPqhsACHAJK%2FRg1DjVw3lEUEzd7dJQ
liwX0uwYcUFt0JBlCDilUml0C6I%3DKNDY%2BM%2FTyNkiVY1CClOXWloCONKDavRScEFS
I8T4gZ1w%2BOGG5BmTgTRDbuulW%2BTFGKa%2BfOCtuuVw8Er1cB6jHGiICdsFwvAH2BZl
hsXnl9%2Bkv768pSlFTwSLNFJ9SAtGlfhKBV7ZGjQmPqU%2BWNjnFO2JcPaBWS5%2F1cL0
rUCcabs%3DPommweP0Lx3t0KyA5216WPtylmtSicLSiiJCzbkImMbYHkSgRY5iFxjeCuSo
DdRaoPLLoSK37%2B3baypynmbuxnNrisik69Z7goggUwSJEuNrQH6oNb%2B60zE1zBjnLd
5F2YM3o%2FQZ3iJ68D26d57jWrSd9NydLAPXFPp6oiEKHx8%3Df3%2F49P7Xgc45y6QBQR
jyH5YhOsICaO2vgQqnM6FUlciCo5VcWRoVPlRm10duIWXE601cx2VVQA3ZdD71%2BWc60s
GkIRo%2BeMz6pJowmDe5qdGmq%2FM0SY7qaNxt1%2FzYKCHhGSxhKXFRKj7yGqWGcXf7bp
62%2FUGIj6Mg4duMBEeMRiU%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:47:58,463 T12732 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:47:58,477 T12732 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:47:58,483 T12732 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:47:58,513 T12732 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:47:58,522 T12732 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:47:58,571 T12732 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:47:58,573 T12732 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:47:58,582 T12732 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:47:58,586 T12732 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:47:58,618 T12732 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:47:58,621 T12732 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:47:58,628 T12732 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:47:58,657 T12732 INFO guocai_txj.py|260|执行['remote2local'=='local2remote']
2016-08-23 15:47:58,660 T12732 INFO guocai_txj.py|265|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:47:58,665 T12732 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:47:58,691 T12732 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:47:58,697 T12732 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'tid': u'api_acp_single', u'retcode': u'207531',
u'retmsg': u'\u91cd\u590d\u7684\u5546\u6237\u4ee3\u6263\u5355\u53f7'}}
cipher_data:'cipher_data=LUSnK%2Bk8S60NjWOGMglg7nidx%2B2Vy6pBmts4b8un4KAOJvjMbTGUy
aUjl0f67lsqNIQNqdOXrrQmwuTCJurk%2BWsypuD3KDLSJIGDvxCYj9cK7KDSk6cPE7dbq
eNKQi9Xznx19OZYUyLUc3OIinb4NXV7WwhaZYb5%2F97s4Jk5Ca4%3D'
commbuf:'0\r\n\r\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
748\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=kVEOOZOxfE
4SJg1QjsgwW7yUOfKzo1R4KRqX5pPlzGNksWO%2BgEqvGAghTLtte7vGC%2FQ3Xph6ODj8
fl0yKMnyU8ekKx540Mulus2xbxEZq2OrMFSdmedPqhsACHAJK%2FRg1DjVw3lEUEzd7dJQ
liwX0uwYcUFt0JBlCDilUml0C6I%3DKNDY%2BM%2FTyNkiVY1CClOXWloCONKDavRScEFS
I8T4gZ1w%2BOGG5BmTgTRDbuulW%2BTFGKa%2BfOCtuuVw8Er1cB6jHGiICdsFwvAH2BZl
hsXnl9%2Bkv768pSlFTwSLNFJ9SAtGlfhKBV7ZGjQmPqU%2BWNjnFO2JcPaBWS5%2F1cL0
rUCcabs%3DPommweP0Lx3t0KyA5216WPtylmtSicLSiiJCzbkImMbYHkSgRY5iFxjeCuSo
DdRaoPLLoSK37%2B3baypynmbuxnNrisik69Z7goggUwSJEuNrQH6oNb%2B60zE1zBjnLd
5F2YM3o%2FQZ3iJ68D26d57jWrSd9NydLAPXFPp6oiEKHx8%3Df3%2F49P7Xgc45y6QBQR
jyH5YhOsICaO2vgQqnM6FUlciCo5VcWRoVPlRm10duIWXE601cx2VVQA3ZdD71%2BWc60s
GkIRo%2BeMz6pJowmDe5qdGmq%2FM0SY7qaNxt1%2FzYKCHhGSxhKXFRKj7yGqWGcXf7bp
62%2FUGIj6Mg4duMBEeMRiU%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:47:58,737 T12732 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:47:58,750 T12732 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:47:58,753 T12732 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:47:58,759 T12732 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:47:58,763 T12732 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:47:58,766 T12732 ERROR Traceback (most recent call last):
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\utils\utils.py", line 20, in _call
    r = func( _jyzd )
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\guocai_txj.py", line 286, in SDATA_ImpFromBuf
    xml = getxml(jyzd.commbuf)
  File "H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\bin\tysf_uitls.py", line 36, in getxml
    body = re.findall('<.*>',data,re.S)[0]
                data = '0\r\n\r\n'
IndexError: list index out of range

2016-08-23 15:47:58,819 T12732 ERROR 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'tid': u'api_acp_single', u'retcode': u'207531',
u'retmsg': u'\u91cd\u590d\u7684\u5546\u6237\u4ee3\u6263\u5355\u53f7'}}
SYS_RspCode:'TS0004'
SYS_RspInfo:'Traceback (most recent call last):\n  File "H:\\share\\work\\\xd2\xf8
\xc1\xaa\xc8\xab\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1
\xb6\xbb\xfa\\tfb_txj\\bin\\utils\\utils.py", line 20, in _call\n    r
= func( _jyzd )\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xab\xc7
\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\tfb_tx
j\\bin\\guocai_txj.py", line 286, in SDATA_ImpFromBuf\n    xml =
getxml(jyzd.commbuf)\n  File "H:\\share\\work\\\xd2\xf8\xc1\xaa\xc8\xa
b\xc7\xfe\xb5\xc0\\\xcc\xec\xb8\xb6\xb1\xa6\xcd\xa8\xd1\xb6\xbb\xfa\\t
fb_txj\\bin\\tysf_uitls.py", line 36, in getxml\n    body =
re.findall(\'<.*>\',data,re.S)[0]\n                data =
\'0\\r\\n\\r\\n\'\nIndexError: list index out of range\n'
cipher_data:'cipher_data=LUSnK%2Bk8S60NjWOGMglg7nidx%2B2Vy6pBmts4b8un4KAOJvjMbTGUy
aUjl0f67lsqNIQNqdOXrrQmwuTCJurk%2BWsypuD3KDLSJIGDvxCYj9cK7KDSk6cPE7dbq
eNKQi9Xznx19OZYUyLUc3OIinb4NXV7WwhaZYb5%2F97s4Jk5Ca4%3D'
commbuf:'0\r\n\r\n'
input:{'_4': '0', '_3': '1', '_2': '/jyzd', '_1': '/commbuf'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
748\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=kVEOOZOxfE
4SJg1QjsgwW7yUOfKzo1R4KRqX5pPlzGNksWO%2BgEqvGAghTLtte7vGC%2FQ3Xph6ODj8
fl0yKMnyU8ekKx540Mulus2xbxEZq2OrMFSdmedPqhsACHAJK%2FRg1DjVw3lEUEzd7dJQ
liwX0uwYcUFt0JBlCDilUml0C6I%3DKNDY%2BM%2FTyNkiVY1CClOXWloCONKDavRScEFS
I8T4gZ1w%2BOGG5BmTgTRDbuulW%2BTFGKa%2BfOCtuuVw8Er1cB6jHGiICdsFwvAH2BZl
hsXnl9%2Bkv768pSlFTwSLNFJ9SAtGlfhKBV7ZGjQmPqU%2BWNjnFO2JcPaBWS5%2F1cL0
rUCcabs%3DPommweP0Lx3t0KyA5216WPtylmtSicLSiiJCzbkImMbYHkSgRY5iFxjeCuSo
DdRaoPLLoSK37%2B3baypynmbuxnNrisik69Z7goggUwSJEuNrQH6oNb%2B60zE1zBjnLd
5F2YM3o%2FQZ3iJ68D26d57jWrSd9NydLAPXFPp6oiEKHx8%3Df3%2F49P7Xgc45y6QBQR
jyH5YhOsICaO2vgQqnM6FUlciCo5VcWRoVPlRm10duIWXE601cx2VVQA3ZdD71%2BWc60s
GkIRo%2BeMz6pJowmDe5qdGmq%2FM0SY7qaNxt1%2FzYKCHhGSxhKXFRKj7yGqWGcXf7bp
62%2FUGIj6Mg4duMBEeMRiU%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:47:58,845 T12732 INFO guocai_txj.py|27|组件[pub_error]执行开始
2016-08-23 15:47:58,848 T12732 INFO 交易异常，更新响应码响应信息，更新流水，插入冲正表
2016-08-23 15:47:58,854 T12732 INFO guocai_txj.py|30|组件[pub_error]执行结束
2016-08-23 15:47:58,857 T12732 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:47:58,861 T12732 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:47:58,867 T12732 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:47:58,887 T12732 INFO line[238] Dispatch Socket write error of 127.0.0.1:50841: [Errno 10058] 
2016-08-23 15:52:57,915 T9624 INFO Listening at 0.0.0.0:8028 ...
2016-08-23 15:53:01,063 T11168 INFO 从GAPS接收到的数据：【00000617<?xml version='1.0' encoding="GB2312" ?><root><ver>1.0</ver><spid>1800631877</spid><spbillno>222223</spbillno><business_type>14900</business_type><business_no>444444</business_no><tran_amt>10000</tran_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>13800000000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type><card_id>622908115000352211</card_id><card_type>0</card_type><bank_name>兴业银行</bank_name><bank_ins_code>03090000</bank_ins_code><card_prov>上海</card_prov><purpose>通讯费</purpose><postscript></postscript><md5_sign></md5_sign><TransCode>api_acp_single.cgi</TransCode></root>】
2016-08-23 15:53:01,089 T11168 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:53:01,092 T11168 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:53:01,098 T11168 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:53:01,105 T11168 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:53:01,109 T11168 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:53:01,115 T11168 INFO 交易字典内容输出：AttrDict{
commbuf:'00000617<?xml version=\'1.0\' encoding="GB2312" ?><root><ver>1.0</ver
><spid>1800631877</spid><spbillno>222223</spbillno><business_type>1490
0</business_type><business_no>444444</business_no><tran_amt>10000</tra
n_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>138000
00000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type
><card_id>622908115000352211</card_id><card_type>0</card_type><bank_na
me>\xd0\xcb\xd2\xb5\xd2\xf8\xd0\xd0</bank_name><bank_ins_code>03090000
</bank_ins_code><card_prov>\xc9\xcf\xba\xa3</card_prov><purpose>\xcd\x
a8\xd1\xb6\xb7\xd1</purpose><postscript></postscript><md5_sign></md5_s
ign><TransCode>api_acp_single.cgi</TransCode></root>'
input:{'_0': 'None', '_1': '80'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:53:01,130 T11168 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:53:01,140 T11168 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:53:01,142 T11168 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:53:01,147 T11168 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:53:01,150 T11168 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:53:01,161 T11168 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:53:01,165 T11168 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:53:01,170 T11168 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:53:01,173 T11168 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:53:01,187 T11168 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:53:01,188 T11168 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:53:01,197 T11168 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:53:01,207 T11168 INFO guocai_txj.py|260|执行['local2remote'=='local2remote']
2016-08-23 15:53:01,210 T11168 INFO guocai_txj.py|262|组件[SDATA_MStrCompare]执行结束 返回 1
2016-08-23 15:53:01,219 T11168 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:53:01,240 T11168 INFO 执行[subflow_sys_guocai_local2remote]
2016-08-23 15:53:01,244 T11168 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
commbuf:'00000617<?xml version=\'1.0\' encoding="GB2312" ?><root><ver>1.0</ver
><spid>1800631877</spid><spbillno>222223</spbillno><business_type>1490
0</business_type><business_no>444444</business_no><tran_amt>10000</tra
n_amt><cur_type>1</cur_type><true_name>11111</true_name><mobile>138000
00000</mobile><cre_id>371324198806065718</cre_id><cre_type>1</cre_type
><card_id>622908115000352211</card_id><card_type>0</card_type><bank_na
me>\xd0\xcb\xd2\xb5\xd2\xf8\xd0\xd0</bank_name><bank_ins_code>03090000
</bank_ins_code><card_prov>\xc9\xcf\xba\xa3</card_prov><purpose>\xcd\x
a8\xd1\xb6\xb7\xd1</purpose><postscript></postscript><md5_sign></md5_s
ign><TransCode>api_acp_single.cgi</TransCode></root>'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_local2remote'}
name:'local2remote'
pub:{'subsysname': 'sys_guocai'}
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:53:01,280 T11168 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:53:01,295 T11168 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:53:01,299 T11168 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:53:01,306 T11168 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:53:01,309 T11168 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:53:01,313 T11168 INFO guocai_txj.py|289|转换后的字典resp_dict={u'root': {u'business_type': u'14900', u'bank_name': u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718', u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov': u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622908115000352211', u'spbillno': u'222223', u'card_type': u'0', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no': u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type': u'1'}}
2016-08-23 15:53:01,322 T11168 INFO guocai_txj.py|291|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:53:01,331 T11168 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行开始
2016-08-23 15:53:01,336 T11168 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行结束
2016-08-23 15:53:01,345 T11168 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:53:01,348 T11168 INFO guocai_txj.py|174|对字典req={u'root': {u'business_type': u'14900', u'bank_name': u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718', u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov': u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622908115000352211', u'spbillno': u'222223', u'card_type': u'0', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no': u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type': u'1'}}进行处理
2016-08-23 15:53:01,359 T11168 INFO guocai_txj.py|176|字典root={u'business_type': u'14900', u'bank_name': u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718', u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov': u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '', u'true_name': u'11111', u'card_id': u'622908115000352211', u'spbillno': u'222223', u'card_type': u'0', u'postscript': '', u'TransCode': u'api_acp_single.cgi', u'purpose': u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no': u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type': u'1'}
2016-08-23 15:53:01,367 T11168 INFO guocai_txj.py|178|排序后的数据signdata=bank_ins_code=03090000&bank_name=翠惰&business_no=444444&business_type=14900&card_id=622908115000352211&card_prov=涓娴&card_type=0&cre_id=371324198806065718&cre_type=1&cur_type=1&mobile=13800000000&purpose=璁璐&spbillno=222223&spid=1800631877&tran_amt=10000&true_name=11111&ver=1.0&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:53:01,377 T11168 INFO guocai_txj.py|181|进行MD5运算后sign_md5=9aecefed5675fe969a3d2387fd7303c2
2016-08-23 15:53:01,441 T11168 INFO guocai_txj.py|186|cipher_data[Rj0kkB8S0X/tnPSlQImd0dRpj4D0upFVh/ncNPhCsTZYqFFgk7C8xZJm8LkmXDyN0dGpjlzxDbhz7ciUZ+7GvyAfQ8GHNllVQMFND3+GydUubFsr24DIiS1JFDFcHF07g0QR4qsnUhmy23loEt6nl9pU8LPREN1JDSlOoWZbkvY=MhhlBrmd2KK3cdPkCWl/EuuW7f5kR917uE0iJDF6HwSdJDhzeMQ1U6XVdmUahF/TfLdzNq+2G6l9HDc/tycR7+/Fa68aqVz+PDGFEqs+KQqrfvalCE7cNeak4LTCpcWgZI/j4OdjvIVcAZW/9DzlNXDyiXysqKtTwlK4tNnqaEw=IocLxOtPSAeosU5OV1YuZIx8nyeyrsKJuTpPg1mGbB5F0UTbJfnl+wDSRDdLtKXhIRzXDWkxrbuwCZ8LpcC0zUB4LRX2pG/8GvkGSFPJDYGEHsWR1aUazwofgzEz9lD2kxlfWSmnfCeAqj5KdwIOYp796EVQlziVkj8gTVb0A2M=eldOlto/VdI3d7NlDjXiVvejImv2tMMgJsZG+gtJsShF8tycNGo8wDsqG41EFZbiZXUWiLB0SJvWKnGjd9yF5OCR/ZgJMbjtNrd+xYo9VCGheo9Zq5EnGDjee2GbPMoUAM5JsBaXQUKJM3QwnOB4T15gS2RrNzDGCOTd+UImTdU=]
2016-08-23 15:53:01,448 T11168 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:53:01,454 T11168 INFO guocai_txj.py|196|组件[PY_MsgAddHead]执行开始
2016-08-23 15:53:01,459 T11168 INFO guocai_txj.py|199|resp=[POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1
Content-Length: 750
Host: apitest.tfb8.com
Referer: http://apitest.tfb8.com/cgi-bin/v2.0/api_acp_single.cgi
Accept-Encoding: UTF-8, deflate
Cache-Control: no-cache
Accept-Language: zh-cn
Content-Type: application/x-www-form-urlencoded
Connection: Keep-Alive
Accept: image/gif, */*
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)

cipher_data=Rj0kkB8S0X%2FtnPSlQImd0dRpj4D0upFVh%2FncNPhCsTZYqFFgk7C8xZJm8LkmXDyN0dGpjlzxDbhz7ciUZ%2B7GvyAfQ8GHNllVQMFND3%2BGydUubFsr24DIiS1JFDFcHF07g0QR4qsnUhmy23loEt6nl9pU8LPREN1JDSlOoWZbkvY%3DMhhlBrmd2KK3cdPkCWl%2FEuuW7f5kR917uE0iJDF6HwSdJDhzeMQ1U6XVdmUahF%2FTfLdzNq%2B2G6l9HDc%2FtycR7%2B%2FFa68aqVz%2BPDGFEqs%2BKQqrfvalCE7cNeak4LTCpcWgZI%2Fj4OdjvIVcAZW%2F9DzlNXDyiXysqKtTwlK4tNnqaEw%3DIocLxOtPSAeosU5OV1YuZIx8nyeyrsKJuTpPg1mGbB5F0UTbJfnl%2BwDSRDdLtKXhIRzXDWkxrbuwCZ8LpcC0zUB4LRX2pG%2F8GvkGSFPJDYGEHsWR1aUazwofgzEz9lD2kxlfWSmnfCeAqj5KdwIOYp796EVQlziVkj8gTVb0A2M%3DeldOlto%2FVdI3d7NlDjXiVvejImv2tMMgJsZG%2BgtJsShF8tycNGo8wDsqG41EFZbiZXUWiLB0SJvWKnGjd9yF5OCR%2FZgJMbjtNrd%2BxYo9VCGheo9Zq5EnGDjee2GbPMoUAM5JsBaXQUKJM3QwnOB4T15gS2RrNzDGCOTd%2BUImTdU%3D]
2016-08-23 15:53:01,469 T11168 INFO guocai_txj.py|200|组件[PY_MsgAddHead]执行结束
2016-08-23 15:53:01,474 T11168 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 15:53:01,479 T11168 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 15:53:01,486 T11168 INFO guocai_txj.py|209|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 15:53:01,490 T11168 INFO guocai_txj.py|210|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 15:53:01,499 T11168 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:53:01,506 T11168 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:53:01,510 T11168 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:53:01,517 T11168 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:53:01,523 T11168 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:53:01,549 T11168 INFO 报文发往送到GAPS成功
2016-08-23 15:53:01,551 T11168 INFO 
--------------提交缓冲日志 END[2016-08-23 15:53:01.551000]---------------

2016-08-23 15:53:01,710 T4616 INFO 从GAPS接收到的数据：【HTTP/1.1 200 OK
Date: Tue, 23 Aug 2016 08:00:39 GMT
Server: Apache/2.2.29 (Unix) DAV/2
Vary: Accept-Encoding
Content-Type: application/xml;charset=UTF-8
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked

93
<?xml version="1.0" encoding="UTF-8" ?><root><retcode>207531</retcode><retmsg>澶蜂唬ｅ</retmsg><tid>api_acp_single</tid></root>

】
2016-08-23 15:53:01,740 T4616 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:53:01,743 T4616 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:53:01,750 T4616 INFO guocai_txj.py|233|组件[STRAC_Commbuf]执行开始
2016-08-23 15:53:01,759 T4616 INFO guocai_txj.py|236|组件[STRAC_Commbuf]执行结束
2016-08-23 15:53:01,765 T4616 INFO guocai_txj.py|245|组件[STRAC_XMLTree]执行开始
2016-08-23 15:53:01,776 T4616 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name':
u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718',
u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov':
u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '',
u'true_name': u'11111', u'card_id': u'622908115000352211',
u'spbillno': u'222223', u'card_type': u'0', u'postscript': '',
u'TransCode': u'api_acp_single.cgi', u'purpose':
u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no':
u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type':
u'1'}}
cipher_data:'cipher_data=Rj0kkB8S0X%2FtnPSlQImd0dRpj4D0upFVh%2FncNPhCsTZYqFFgk7C8x
ZJm8LkmXDyN0dGpjlzxDbhz7ciUZ%2B7GvyAfQ8GHNllVQMFND3%2BGydUubFsr24DIiS1
JFDFcHF07g0QR4qsnUhmy23loEt6nl9pU8LPREN1JDSlOoWZbkvY%3DMhhlBrmd2KK3cdP
kCWl%2FEuuW7f5kR917uE0iJDF6HwSdJDhzeMQ1U6XVdmUahF%2FTfLdzNq%2B2G6l9HDc
%2FtycR7%2B%2FFa68aqVz%2BPDGFEqs%2BKQqrfvalCE7cNeak4LTCpcWgZI%2Fj4Odjv
IVcAZW%2F9DzlNXDyiXysqKtTwlK4tNnqaEw%3DIocLxOtPSAeosU5OV1YuZIx8nyeyrsK
JuTpPg1mGbB5F0UTbJfnl%2BwDSRDdLtKXhIRzXDWkxrbuwCZ8LpcC0zUB4LRX2pG%2F8G
vkGSFPJDYGEHsWR1aUazwofgzEz9lD2kxlfWSmnfCeAqj5KdwIOYp796EVQlziVkj8gTVb
0A2M%3DeldOlto%2FVdI3d7NlDjXiVvejImv2tMMgJsZG%2BgtJsShF8tycNGo8wDsqG41
EFZbiZXUWiLB0SJvWKnGjd9yF5OCR%2FZgJMbjtNrd%2BxYo9VCGheo9Zq5EnGDjee2GbP
MoUAM5JsBaXQUKJM3QwnOB4T15gS2RrNzDGCOTd%2BUImTdU%3D'
commbuf:'HTTP/1.1 200 OK\r\nDate: Tue, 23 Aug 2016 08:00:39 GMT\r\nServer:
Apache/2.2.29 (Unix) DAV/2\r\nVary: Accept-Encoding\r\nContent-Type:
application/xml;charset=UTF-8\r\nKeep-Alive: timeout=5,
max=100\r\nConnection: Keep-Alive\r\nTransfer-Encoding:
chunked\r\n\r\n93\r\n<?xml version="1.0" encoding="UTF-8" ?><root><ret
code>207531</retcode><retmsg>\xe9\x87\x8d\xe5\xa4\x8d\xe7\x9a\x84\xe5\
x95\x86\xe6\x88\xb7\xe4\xbb\xa3\xe6\x89\xa3\xe5\x8d\x95\xe5\x8f\xb7</r
etmsg><tid>api_acp_single</tid></root>\n\r\n'
input:{'_0': 'None', '_1': '80'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
750\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=Rj0kkB8S0X
%2FtnPSlQImd0dRpj4D0upFVh%2FncNPhCsTZYqFFgk7C8xZJm8LkmXDyN0dGpjlzxDbhz
7ciUZ%2B7GvyAfQ8GHNllVQMFND3%2BGydUubFsr24DIiS1JFDFcHF07g0QR4qsnUhmy23
loEt6nl9pU8LPREN1JDSlOoWZbkvY%3DMhhlBrmd2KK3cdPkCWl%2FEuuW7f5kR917uE0i
JDF6HwSdJDhzeMQ1U6XVdmUahF%2FTfLdzNq%2B2G6l9HDc%2FtycR7%2B%2FFa68aqVz%
2BPDGFEqs%2BKQqrfvalCE7cNeak4LTCpcWgZI%2Fj4OdjvIVcAZW%2F9DzlNXDyiXysqK
tTwlK4tNnqaEw%3DIocLxOtPSAeosU5OV1YuZIx8nyeyrsKJuTpPg1mGbB5F0UTbJfnl%2
BwDSRDdLtKXhIRzXDWkxrbuwCZ8LpcC0zUB4LRX2pG%2F8GvkGSFPJDYGEHsWR1aUazwof
gzEz9lD2kxlfWSmnfCeAqj5KdwIOYp796EVQlziVkj8gTVb0A2M%3DeldOlto%2FVdI3d7
NlDjXiVvejImv2tMMgJsZG%2BgtJsShF8tycNGo8wDsqG41EFZbiZXUWiLB0SJvWKnGjd9
yF5OCR%2FZgJMbjtNrd%2BxYo9VCGheo9Zq5EnGDjee2GbPMoUAM5JsBaXQUKJM3QwnOB4
T15gS2RrNzDGCOTd%2BUImTdU%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:53:01,855 T4616 INFO guocai_txj.py|247|组件[STRAC_XMLTree]执行结束
2016-08-23 15:53:01,861 T4616 INFO guocai_txj.py|133|组件[Agentx_SysInit]执行开始
2016-08-23 15:53:01,865 T4616 INFO guocai_txj.py|134|组件[Agentx_SysInit]执行结束
2016-08-23 15:53:01,871 T4616 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:53:01,875 T4616 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:53:01,930 T4616 INFO guocai_txj.py|153|jyzd/KEY=2d3c22048b300db8b347b7024b378053
2016-08-23 15:53:01,934 T4616 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:53:01,943 T4616 INFO guocai_txj.py|145|组件[SSYS_GetIniCfg]执行开始
2016-08-23 15:53:01,947 T4616 INFO guocai_txj.py|146|GAPSETCDIR=[H:\share\work\银联全渠道\天付宝通讯机\tfb_txj\etc]
2016-08-23 15:53:02,005 T4616 INFO guocai_txj.py|153|jyzd/shh=1800631877
2016-08-23 15:53:02,009 T4616 INFO guocai_txj.py|154|组件[SSYS_GetIniCfg]执行结束
2016-08-23 15:53:02,019 T4616 INFO guocai_txj.py|258|组件[SDATA_MStrCompare]执行开始
2016-08-23 15:53:02,069 T4616 INFO guocai_txj.py|260|执行['remote2local'=='local2remote']
2016-08-23 15:53:02,073 T4616 INFO guocai_txj.py|265|组件[SDATA_MStrCompare]执行结束 返回 0
2016-08-23 15:53:02,081 T4616 INFO guocai_txj.py|302|组件[SCNTR_CallSubFlow]执行开始
2016-08-23 15:53:02,135 T4616 INFO 执行[subflow_sys_guocai_remote2local]
2016-08-23 15:53:02,144 T4616 INFO 交易字典内容输出：AttrDict{
KEY:'2d3c22048b300db8b347b7024b378053'
REQ:{u'root': {u'business_type': u'14900', u'bank_name':
u'\u5174\u4e1a\u94f6\u884c', u'cre_id': u'371324198806065718',
u'cre_type': u'1', u'tran_amt': u'10000', u'card_prov':
u'\u4e0a\u6d77', u'mobile': u'13800000000', u'md5_sign': '',
u'true_name': u'11111', u'card_id': u'622908115000352211',
u'spbillno': u'222223', u'card_type': u'0', u'postscript': '',
u'TransCode': u'api_acp_single.cgi', u'purpose':
u'\u901a\u8baf\u8d39', u'spid': u'1800631877', u'business_no':
u'444444', u'bank_ins_code': u'03090000', u'ver': u'1.0', u'cur_type':
u'1'}}
cipher_data:'cipher_data=Rj0kkB8S0X%2FtnPSlQImd0dRpj4D0upFVh%2FncNPhCsTZYqFFgk7C8x
ZJm8LkmXDyN0dGpjlzxDbhz7ciUZ%2B7GvyAfQ8GHNllVQMFND3%2BGydUubFsr24DIiS1
JFDFcHF07g0QR4qsnUhmy23loEt6nl9pU8LPREN1JDSlOoWZbkvY%3DMhhlBrmd2KK3cdP
kCWl%2FEuuW7f5kR917uE0iJDF6HwSdJDhzeMQ1U6XVdmUahF%2FTfLdzNq%2B2G6l9HDc
%2FtycR7%2B%2FFa68aqVz%2BPDGFEqs%2BKQqrfvalCE7cNeak4LTCpcWgZI%2Fj4Odjv
IVcAZW%2F9DzlNXDyiXysqKtTwlK4tNnqaEw%3DIocLxOtPSAeosU5OV1YuZIx8nyeyrsK
JuTpPg1mGbB5F0UTbJfnl%2BwDSRDdLtKXhIRzXDWkxrbuwCZ8LpcC0zUB4LRX2pG%2F8G
vkGSFPJDYGEHsWR1aUazwofgzEz9lD2kxlfWSmnfCeAqj5KdwIOYp796EVQlziVkj8gTVb
0A2M%3DeldOlto%2FVdI3d7NlDjXiVvejImv2tMMgJsZG%2BgtJsShF8tycNGo8wDsqG41
EFZbiZXUWiLB0SJvWKnGjd9yF5OCR%2FZgJMbjtNrd%2BxYo9VCGheo9Zq5EnGDjee2GbP
MoUAM5JsBaXQUKJM3QwnOB4T15gS2RrNzDGCOTd%2BUImTdU%3D'
commbuf:'HTTP/1.1 200 OK\r\nDate: Tue, 23 Aug 2016 08:00:39 GMT\r\nServer:
Apache/2.2.29 (Unix) DAV/2\r\nVary: Accept-Encoding\r\nContent-Type:
application/xml;charset=UTF-8\r\nKeep-Alive: timeout=5,
max=100\r\nConnection: Keep-Alive\r\nTransfer-Encoding:
chunked\r\n\r\n93\r\n<?xml version="1.0" encoding="UTF-8" ?><root><ret
code>207531</retcode><retmsg>\xe9\x87\x8d\xe5\xa4\x8d\xe7\x9a\x84\xe5\
x95\x86\xe6\x88\xb7\xe4\xbb\xa3\xe6\x89\xa3\xe5\x8d\x95\xe5\x8f\xb7</r
etmsg><tid>api_acp_single</tid></root>\n\r\n'
input:{'_3': 'None', '_2': '0', '_1':
'subflow_[jyzd/subsysname]_remote2local'}
name:'remote2local'
pub:{'subsysname': 'sys_guocai'}
resp:u'POST /cgi-bin/v2.0/api_acp_single.cgi HTTP/1.1\r\nContent-Length:
750\r\nHost: apitest.tfb8.com\r\nReferer: http://apitest.tfb8.com/cgi-
bin/v2.0/api_acp_single.cgi\r\nAccept-Encoding: UTF-8, deflate\r
\nCache-Control: no-cache\r\nAccept-Language: zh-cn\r\nContent-Type:
application/x-www-form-urlencoded\r\nConnection: Keep-Alive\r\nAccept:
image/gif, */*\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0;
Windows NT 5.1; SV1; .NET CLR 2.0.50727)\r\n\r\ncipher_data=Rj0kkB8S0X
%2FtnPSlQImd0dRpj4D0upFVh%2FncNPhCsTZYqFFgk7C8xZJm8LkmXDyN0dGpjlzxDbhz
7ciUZ%2B7GvyAfQ8GHNllVQMFND3%2BGydUubFsr24DIiS1JFDFcHF07g0QR4qsnUhmy23
loEt6nl9pU8LPREN1JDSlOoWZbkvY%3DMhhlBrmd2KK3cdPkCWl%2FEuuW7f5kR917uE0i
JDF6HwSdJDhzeMQ1U6XVdmUahF%2FTfLdzNq%2B2G6l9HDc%2FtycR7%2B%2FFa68aqVz%
2BPDGFEqs%2BKQqrfvalCE7cNeak4LTCpcWgZI%2Fj4OdjvIVcAZW%2F9DzlNXDyiXysqK
tTwlK4tNnqaEw%3DIocLxOtPSAeosU5OV1YuZIx8nyeyrsKJuTpPg1mGbB5F0UTbJfnl%2
BwDSRDdLtKXhIRzXDWkxrbuwCZ8LpcC0zUB4LRX2pG%2F8GvkGSFPJDYGEHsWR1aUazwof
gzEz9lD2kxlfWSmnfCeAqj5KdwIOYp796EVQlziVkj8gTVb0A2M%3DeldOlto%2FVdI3d7
NlDjXiVvejImv2tMMgJsZG%2BgtJsShF8tycNGo8wDsqG41EFZbiZXUWiLB0SJvWKnGjd9
yF5OCR%2FZgJMbjtNrd%2BxYo9VCGheo9Zq5EnGDjee2GbPMoUAM5JsBaXQUKJM3QwnOB4
T15gS2RrNzDGCOTd%2BUImTdU%3D'
shh:'1800631877'
subsysname:'sys_guocai'
systemsign:'sys_guocai'
}

2016-08-23 15:53:02,232 T4616 INFO jyzd[<class 'utils.ftools.AttrDict'>]
2016-08-23 15:53:02,246 T4616 INFO guocai_txj.py|59|组件[BEGIN]执行开始
2016-08-23 15:53:02,252 T4616 INFO guocai_txj.py|60|组件[BEGIN]执行结束
2016-08-23 15:53:02,259 T4616 INFO guocai_txj.py|284|组件[SDATA_ImpFromBuf]执行开始
2016-08-23 15:53:02,263 T4616 INFO guocai_txj.py|285|将commbuf内容转换到字典中
2016-08-23 15:53:02,266 T4616 INFO guocai_txj.py|289|转换后的字典resp_dict={u'root': {u'tid': u'api_acp_single', u'retcode': u'207531', u'retmsg': u'\u91cd\u590d\u7684\u5546\u6237\u4ee3\u6263\u5355\u53f7'}}
2016-08-23 15:53:02,269 T4616 INFO guocai_txj.py|291|组件[SDATA_ImpFromBuf]执行结束
2016-08-23 15:53:02,276 T4616 INFO guocai_txj.py|274|组件[SDATA_MSetValue]执行开始
2016-08-23 15:53:02,279 T4616 INFO guocai_txj.py|275|组件[SDATA_MSetValue]执行结束
2016-08-23 15:53:02,285 T4616 INFO guocai_txj.py|172|组件[PY_GetCipher]执行开始
2016-08-23 15:53:02,289 T4616 INFO guocai_txj.py|174|对字典req={u'root': {u'tid': u'api_acp_single', u'retcode': u'207531', u'retmsg': u'\u91cd\u590d\u7684\u5546\u6237\u4ee3\u6263\u5355\u53f7'}}进行处理
2016-08-23 15:53:02,293 T4616 INFO guocai_txj.py|176|字典root={u'tid': u'api_acp_single', u'retcode': u'207531', u'retmsg': u'\u91cd\u590d\u7684\u5546\u6237\u4ee3\u6263\u5355\u53f7'}
2016-08-23 15:53:02,298 T4616 INFO guocai_txj.py|178|排序后的数据signdata=tid=api_acp_single&key=2d3c22048b300db8b347b7024b378053
2016-08-23 15:53:02,302 T4616 INFO guocai_txj.py|181|进行MD5运算后sign_md5=84a2afe3c78aef0c47509ba67328cddd
2016-08-23 15:53:02,315 T4616 INFO guocai_txj.py|186|cipher_data[E+DXU+JJyY2n3ie310TzoZDWQ9vz3SWUrohgtd9B7QhZFpDRnLMxVmLu4Sb6xIC5UMDukch/p0uB6C5SQw2gVibZ/GtMKBGuwMfhKcRczzZUJDEadbSVANpm4y3S134JZ/6sGrESLu3AfYcWkMqsw+szDRRZ/eTFy1dEyW2tK54=]
2016-08-23 15:53:02,319 T4616 INFO guocai_txj.py|187|组件[PY_GetCipher]执行结束
2016-08-23 15:53:02,326 T4616 INFO guocai_txj.py|163|组件[SAPEX_RESCHECK]执行开始
2016-08-23 15:53:02,329 T4616 INFO guocai_txj.py|164|组件[SAPEX_RESCHECK]执行结束
2016-08-23 15:53:02,338 T4616 INFO guocai_txj.py|209|组件[SPKG_IXMLtoOXML]执行开始
2016-08-23 15:53:02,342 T4616 INFO guocai_txj.py|210|组件[SPKG_IXMLtoOXML]执行结束
2016-08-23 15:53:02,351 T4616 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:53:02,357 T4616 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:53:02,359 T4616 INFO guocai_txj.py|309|组件[SCNTR_CallSubFlow]执行结束
2016-08-23 15:53:02,365 T4616 INFO guocai_txj.py|69|组件[END]执行开始
2016-08-23 15:53:02,371 T4616 INFO guocai_txj.py|71|组件[END]执行结束
2016-08-23 15:53:02,395 T4616 INFO 报文发往送到GAPS成功
2016-08-23 15:53:02,398 T4616 INFO 
--------------提交缓冲日志 END[2016-08-23 15:53:02.398000]---------------

2016-08-23 15:53:02,414 T11168 INFO 无数据break
